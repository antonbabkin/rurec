---
title: "Index for R"
format: html
---

# BEA IO tables

```{r}
source("R/dataprep_bea_io.R", local = (bea_io <- new.env()))

# data needed for Python-less environments:
source("R/basic_utilities.R", local = (util <- new.env()))
util$zip_pack("tmp/bea_io_v231108.zip", bea_io$opath, TRUE)
util$zip_unpack("tmp/bea_io_v231108.zip")

# bea_io$clear_outputs()
# bea_io$test_pubdata_bea_io()
# bea_io$test_dataprep_bea_io()

bea_io$pubdata$get_naics_concord(2017)

bea_io$pubdata$get_use(2017, "det", TRUE)$table

bea_io$b_matrix(2017, "det")


```

# Geography


```{r}
source("R/geography.R", local = (geo <- new.env()))


geo$clear_outputs()
geo$test_pubdata_geo()
geo$test_dataprep_geo()


# data needed for Python-less environments:
# source("R/basic_utilities.R", local = (util <- new.env()))
# util$zip_pack("tmp/geography_vYYMMDD.zip", geo$opath, TRUE)
# util$zip_unpack("tmp/geography_vYYMMDD.zip")
```


# CBP

```{r}
source("R/dataprep_cbp.R", local = (cbp <- new.env()))

cbp$call_cbp(2012, "county", FALSE)

```



# InfoGroup


```{r}
source("R/dataprep_infogroup.R", local = (ig <- new.env()))

ig$prep_county_agg(seq(2002, 2017, 5))

# soybean processing
open_dataset(glue(ig$opath$county_, .envir = list(year = 2012))) |>
  filter(naics == "311224") |>
  arrange(st, cty) |>
  collect()

```

# Census of Agriculture

Farm sales


```{r}
source("R/dataprep_agcensus.R", local = (agcen <- new.env()))

agcen$test_all()

x <- agcen$call_agoutput(2012, "county")

# data needed for Python-less environments:
# source("R/basic_utilities.R", local = (util <- new.env()))
# util$zip_pack("tmp/agcen_vYYMMDD.zip", agcen$opath, TRUE)
# util$zip_unpack("tmp/agcen_vYYMMDD.zip")# 

```

