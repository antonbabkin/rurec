<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.298">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Austin Sandler">

<title>Rural Economy - Toy Story</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link id="quarto-text-highlighting-styles" href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Rural Economy</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./geography.html">Geography</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./rurality.html">Rurality</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./io_for_dummies.html">IO for Dummies</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./toy_story.html" aria-current="page">Toy Story</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content column-page" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Toy Story</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>





<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Austin Sandler </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">3/22/2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<p>This R Markdown document is a testing ground for Toy model specifications with numerical examples.</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Project Narrative</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Toy IO</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Toy TUC</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Redux</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false">Exposé</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-6" role="tab" aria-controls="tabset-1-6" aria-selected="false">Extension</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-7" role="tab" aria-controls="tabset-1-7" aria-selected="false">Remission</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-8" role="tab" aria-controls="tabset-1-8" aria-selected="false">Resurrection</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-9" role="tab" aria-controls="tabset-1-9" aria-selected="false">Notes</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exercise to replicate table and analysis from project narrative</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>Use_SUT_Framework_2007_2012_DET <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="fu">file.path</span>(root_dir, <span class="st">"data/AllTablesSUP/Use_SUT_Framework_2007_2012_DET.xlsx"</span>), <span class="at">sheet =</span> <span class="st">"2012"</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>, <span class="at">skip =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">suppressMessages</span>()</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>ProjNarrIO <span class="ot">&lt;-</span> <span class="fu">c</span>(Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">4</span>]],</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">196</span>]],</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">211</span>]],</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">286</span>]],</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">291</span>]],</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">4</span>]],</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">196</span>]],</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">211</span>]],</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">286</span>]],</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">291</span>]],</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">4</span>]],</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">196</span>]],</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">211</span>]],</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">286</span>]],</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">291</span>]],</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">4</span>]],</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">196</span>]],</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">211</span>]],</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">286</span>]],</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">291</span>]],</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">4</span>]],</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">196</span>]],</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">211</span>]],</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">286</span>]],</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">291</span>]]) </span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>ProjNarrIO[<span class="fu">is.na</span>(ProjNarrIO)] <span class="ot">&lt;-</span> <span class="dv">0</span> </span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>codenames <span class="ot">&lt;-</span> <span class="fu">c</span>(Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">1</span>]],</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">1</span>]],</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">1</span>]],</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">1</span>]],</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">1</span>]])</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>descriptionnames <span class="ot">&lt;-</span> <span class="fu">c</span>(Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">2</span>]],</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">2</span>]],</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">2</span>]],</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">2</span>]],</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">2</span>]])</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>ProjNarrIO <span class="sc">%&lt;&gt;%</span>  <span class="fu">as.numeric</span>() <span class="sc">%&gt;%</span> <span class="fu">matrix</span>(<span class="at">nrow =</span> <span class="dv">5</span>, <span class="at">ncol =</span> <span class="dv">5</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>,  <span class="at">dimnames =</span> <span class="fu">list</span>(descriptionnames, codenames))</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>ProjNarrRegSales <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">A  =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">500</span>,   <span class="dv">0</span>,  <span class="dv">1000</span>,   <span class="dv">500</span>),  <span class="at">B =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>,    <span class="dv">200</span>,    <span class="dv">500</span>,    <span class="dv">200</span>) ) <span class="sc">%&gt;%</span> <span class="fu">t</span>() <span class="sc">%&gt;%</span> <span class="fu">as.matrix</span>()</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>i_mat <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(ProjNarrIO)) <span class="sc">%&gt;%</span> <span class="fu">as.matrix</span>()</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="fu">sweep</span>(ProjNarrIO[<span class="dv">1</span>, ] <span class="sc">%*%</span> <span class="fu">t</span>(ProjNarrRegSales), <span class="dv">1</span>, ProjNarrIO[<span class="dv">1</span>, ] <span class="sc">%*%</span> i_mat, <span class="st">"/"</span>)</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>rho <span class="ot">&lt;-</span> <span class="fu">sweep</span>(alpha, <span class="dv">2</span>, ProjNarrRegSales <span class="sc">%*%</span> i_mat, <span class="st">"/"</span>)</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(ProjNarrRegSales) <span class="ot">&lt;-</span> codenames</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>sample_RUC<span class="ot">&lt;-</span><span class="fu">cbind</span>(ProjNarrRegSales, <span class="fu">t</span>(alpha), <span class="fu">t</span>(rho))</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(sample_RUC)[<span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="st">"alpha"</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(sample_RUC)[<span class="dv">7</span>] <span class="ot">&lt;-</span> <span class="st">"rho"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Generate Economic Catchment Area (ECA) codes</strong></p>
<p>Since 1880, the Census Bureau has applied formal rules to categorize geographic areas as urban for the purposes of statistical reporting. The most recent version of this taxonomic schema classifies areas as urban areas (UA, densely settled with a population greater than 50,000) and urban clusters (UC, densely settled with populations greater than 2,500 and less than 50,000). <u> For as long as the Census Bureau has been defining urbanicity, rural has <strong>ALWAYS</strong> been the residual category</u>: from the 2010 Census Urban-Rural Classification Criterion, “‘rural’ encompasses all population, housing, and territory not included within an urban area.”</p>
<p>The construction of urban places follows a complex set of rules accounting for the attributes of urban land use and residential development patterns, but the intuition is fairly straight-forward. First, identify contiguous Census blocks (sometimes, tracts) above a minimum population density thereby defining a potential urban core. Then, continue to agglomerate adjacent-<em>ish</em> (again, there are complex rules allowing for hops, jumps, exclaves, enclaves, indentations, etc.) blocks/tracts meeting other density and population thresholds until the boundaries of the place are established. The population of this agglomeration then determines whether it is a UA, UC, or rural. The RUCA codes are a further refinement constructed by ERS to account for 1) the size of urban agglomerations and 2) resident commuting patterns, while applying the urban-rural typology employed by OMB. Thus, every UA is termed a Metropolitan Area Core. UCs are delimited by population into Micropolitan Area Core (10,000 to 49,999) and Small Town Core (2,500 to 9,999). Remaining blocks/tracts are then classified according to whether a high (more than 30%) or low (10% to 30%) percentage of residents commute to an urban core, as well as the type of core of the primary flow. Secondary codes are also assigned based upon the destination type of the secondary commuter flow.</p>
<p>We propose to use core units as the basis for building Rural-Urban Economic Catchment Areas codes from InfoGroup and the Census of Agriculture in very much the same vein as ERS constructs the RUCA codes, but with a notable design distinction: we will classify tracts from low density to high density, rather than defining rural as a catch-all, non-urban residual. Specifically:</p>
<ol type="1">
<li><p>We will define a <em>primary economic catchment area</em> (ECA) centered on each small UC core (RUCA 7) that includes associated commuting Census tracts (RUCA 8 and 9) and nearby rural tracts that include large employers in InfoGroup. The latter condition accommodates economic activities that may employ relatively large numbers of residents but are purposefully located far from residential areas, e.g., paper milling and government military installations. We will explore the sensitivity of our coding to various definitions of nearby, e.g.&nbsp;5, 10, and 20 mile radii.</p></li>
<li><p>We will use the Census of Agriculture to identify the <em>primary</em> crop and livestock production activities and the County Business Patterns to identify the presence of forestry and mining activity in rural Zip codes surrounding the primary ECA (the smallest published unit for both programs is the Zip code). We anticipate that for the overwhelming majority of the country, using the county as the basic unit will suffice for identifying agricultural, forestry, and extraction, but western counties are sufficiently large to benefit from a more disaggregated reporting unit.</p></li>
<li><p>We will then use the most recent Use Tables published by BEA as part of its Input-Output Accounts program (2018 for 71 two- and three-digit NAICS industries and 2012 for 415 fourdigit NAICS industries) to calculate absolute and relative <em>rural use coefficients</em> for each <em>primary</em> ECA with respect to the agricultural, forestry, and extraction (AFE) activity in its vicinity.</p></li>
</ol>
<p align="center">
<span class="math inline">\(\alpha^{r}_{i} = \sum^{k} s^{k}_{i} \sum^{m} s^{m}_{i} \rho^{k}_{m}\)</span> and <span class="math inline">\(\rho^{r}_{i} = \sum^{k} s^{k}_{i} \left( \frac{\sum^{m} s^{m}_{i} \rho^{k}_{m}} {\sum^{m} \rho^{k}_{m} } \right)\)</span>
</p>
<p>where <span class="math inline">\(s^{m}_{i}\)</span> is the share of employment/sales for industry <span class="math inline">\(m\)</span> in business catchment area <span class="math inline">\(i\)</span> calculated from InfoGroup; <span class="math inline">\(\rho^{k}_{m}\)</span> is the use parameter for AFE activity <span class="math inline">\(k\)</span> in industry <span class="math inline">\(m\)</span> from the BEA Use Tables; <span class="math inline">\(s^{k}_{i}\)</span> is the share of agricultural or forestry activity <span class="math inline">\(k\)</span> of total AFE activities; and <span class="math inline">\(M\)</span> and <span class="math inline">\(K\)</span> are the set of non-AFE and AFE industries, respectively.</p>
<p>To illustrate, a simplified five-sector economy based on the BEA 2012 Use Table might be:</p>
<table class="table">
<caption>Use Factor</caption>
<colgroup>
<col style="width: 53%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">1111B0</th>
<th style="text-align: right;">311210</th>
<th style="text-align: right;">311810</th>
<th style="text-align: right;">445000</th>
<th style="text-align: right;">448000</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Grain farming</td>
<td style="text-align: right;">6440</td>
<td style="text-align: right;">14398</td>
<td style="text-align: right;">1924</td>
<td style="text-align: right;">684</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Flour milling and malt manufacturing</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">303</td>
<td style="text-align: right;">2983</td>
<td style="text-align: right;">1064</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bread and bakery product manufacturing</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">63</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Food and beverage stores</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Clothing and clothing accessories stores</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<ol start="4" type="1">
<li>We will then assign remaining rural tracts to <em>primary</em> ECAs using a gravity model based on the use coefficients defined above. Gravity models have been applied as far back as the 1850s (Carey, 1858) to describe social phenomena and continue to be used across disciplines (Erlander, 1980; Haynes and Fotheringham, 1984; Sen and Smith, 1995; Wilson 2000), including contemporary analyses of international trade (USITC, 2020). To illustrate, suppose that there were two <em>primary</em> ECAs with the following industry sales (in $1000s) and calculated rural use coefficients:</li>
</ol>
<table class="table">
<caption>Industry Sales</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">1111B0</th>
<th style="text-align: right;">311210</th>
<th style="text-align: right;">311810</th>
<th style="text-align: right;">445000</th>
<th style="text-align: right;">448000</th>
<th style="text-align: right;">alpha</th>
<th style="text-align: right;">rho</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">500</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1000</td>
<td style="text-align: right;">500</td>
<td style="text-align: right;">336.2</td>
<td style="text-align: right;">0.168</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">500</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">92.4</td>
<td style="text-align: right;">0.092</td>
</tr>
</tbody>
</table>
<p>To simplify, suppose Area A were at 0 on the unit interval and Area B at 1 with all intervening space representing rural tracts. A gravity approach based on the use coefficient would assign the intervening rural tracts on (0,0.784) to Area A and tracts (0.784,1) to Area B. In contrast, a gravity approach using the adjusted use coefficient would assign the intervening rural tracts on (0,0.645) to Area A and tracts (0.645,1) to Area B. More generally, for either use coefficient, we will treat the United States as a plane over the unit simplex and apply a gravity approach to assign rural tracts to any <em>primary</em> ECA.</p>
<p>A notable feature of this approach is that <em>primary</em> ECAs may exhibit sufficiently low gravity that they are effectively economic islands. For example, a small-town anchored by car manufacturing plant surrounded by cropland. Of course, that small-town may be associated with larger, discontiguous economic areas through the manufacturing supply chain, which will reveal itself at higher economic geographies described subsequently, but <u><strong>creating measures to make meaningful economic distinctions between population centers currently lumped as “small towns” is a valuable project output that will benefit policy-makers</strong></u>.</p>
<ol start="5" type="1">
<li>We will then move to assigning the remaining tracts, beginning with Micropolitan low commuting (RUCA 6) tracts. For each tract, we will calculate the following <em>total use coefficients</em>:</li>
</ol>
<p align="center">
<span class="math inline">\(\rho_{ij} = \sum^{M} s^{m}_{i} \left( \frac{\sum^{m} s^{n}_{j} \rho^{n}_{i}} {\rho^{n}_{i} } \right)\)</span>, <span class="math inline">\(\rho_{ji} = \sum^{M} s^{m}_{j} \left( \frac{\sum^{m} s^{n}_{i} \rho^{n}_{j}} {\rho^{n}_{j} } \right)\)</span>, <span class="math inline">\(\rho_{ik} = \sum^{M} s^{m}_{i} \left( \frac{\sum^{m} s^{n}_{k} \rho^{n}_{i}} {\rho^{n}_{i} } \right)\)</span>, <span class="math inline">\(\rho_{ki} = \sum^{M} s^{m}_{k} \left( \frac{\sum^{m} s^{n}_{i} \rho^{n}_{k}} {\rho^{n}_{k} } \right)\)</span>
</p>
<p>where <span class="math inline">\(i\)</span> denotes the tract, <span class="math inline">\(j\)</span> denotes the adjacent primary ECA, and <span class="math inline">\(k\)</span> denotes the Micropolitan core (RUCA 4) [NB: There may be multiple adjacent <em>primary</em> ECA, so that for the general case of Z adjacent <em>primary</em> ECA, 2Z+2 total use coefficients are calculated]. These coefficients summarize the economic flow to and from the tract. Thus, we will assign the tract to either the Micropolitan Core or the adjacent <em>primary</em> ECA according to the magnitude of the largest total use coefficients, or leave the tract as an economic island if flows are insufficiently strong, i.e., gravity is sufficiently weak.</p>
<ol start="6" type="1">
<li><p>After assigning all Micropolitan and Metropolitan commuting tracts (RUCA 2, 3, and 5) following a similar approach to the one above, we will define <em>secondary</em> ECAs. To do so, we will again treat the United States as a plane with nodes defined by Micropolitan cores and <em>primary</em> ECAs attracted to those nodes by <em>total use coefficients</em>. <em>Primary</em> ECAs are assigned to <em>secondary</em> ECAs centered on Micropolitan cores when gravity is sufficiently strong. Next, contiguous groups of yet-unassigned <em>primary</em> ECAs with sufficiently strong gravity will be aggregated into <em>secondary</em> ECAs independent of a Micropolitan core; those without are classified as isolated.</p></li>
<li><p>Step 6 is repeated with Metropolitan cores to define <em>tertiary</em> ECAs.</p></li>
</ol>
<p>The approach described above is based on the three categories of urbanized places from the RUCA system, but it generalizes broadly to an N-level hierarchy of nodes where the nth ECA is defined by the parameter pair (<span class="math inline">\(\rho_{n}\)</span>, <span class="math inline">\(\theta_{n}\)</span>), the upper limit on the population of the core and the gravity threshold that defines economic islands, respectively. Refinements based on the former would permit the definition of small and large metropolitan cores, or even Megapolitan cores. The latter parameter can be varied according to moments of the use coefficient distribution (the lowest quintile or decile) or absolute values with a priori relevance, e.g., a parameter from a specified decay function in a formal model. We will implement the gravity model in Python, as it is open-source and with spatial modeling packages, e.g., <a href="https://github.com/pysal/spint">SpInt</a> <a href="https://doi.org/10.18335/region.v3i2.175">(Oshan 2016)</a> and <a href="https://github.com/USITC-Gravity-Group/GME">GME</a> <a href="http://dx.doi.org/10.2139/ssrn.3832208">(USITC 2019)</a>, that are already being used to model international trade, migration flows, and transportation networks.</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>The static Input-Output analysis, à la Wassily Leontief, poses the question: What level of output should each industry produce, such that it will satisfy the total demand of that industries output across all industries in an economy?</p>
<p>Simplifying assumptions:</p>
<ol type="1">
<li>Each industry produces only one homogeneous commodity.</li>
<li>Each industry uses a fixed input ratio.</li>
<li>Each industry exhibits constant returns to scale.</li>
</ol>
<p>Suppose the <strong>N</strong>ational level economy is composed of 2 industries (e.g., <strong>E</strong>xtraction and <strong>F</strong>arming). Let the interindustry sales be given by,</p>
<p><span class="math display">\[\begin{equation}
\underset{(i \times i)}{\mathbf{Z}} =
  \begin{bmatrix}
    z_{11} &amp; z_{12} \\
    z_{21} &amp; z_{22} \\
  \end{bmatrix}
  =
  \begin{bmatrix}
    150 &amp; 500 \\
    200 &amp; 100 \\
  \end{bmatrix}
\end{equation}\]</span></p>
<p>Given the vector of total output <span class="math inline">\(\mathbf{x}' = \begin{bmatrix} 1000 &amp; 2000 \end{bmatrix}\)</span>, the Direct Requirements matrix (input requirements), constructed as <span class="math inline">\(\mathbf{A} = \mathbf{Z\hat{x}^{-1}}\)</span>, is given by,</p>
<p><span class="math display">\[\begin{equation}
\underset{(i \times i)}{\mathbf{A}} =
    \begin{bmatrix}
    \frac{z_{11}}{x_{1}} &amp; \frac{z_{12}}{x_{2}} \\
    \frac{z_{21}}{x_{1}} &amp; \frac{z_{22}}{x_{2}} \\
  \end{bmatrix}
  =
    \begin{bmatrix}
    a_{11} &amp; a_{12} \\
    a_{21} &amp; a_{22} \\
  \end{bmatrix}
  =
  \begin{bmatrix}
    0.15 &amp; 0.25 \\
    0.20 &amp; 0.05 \\
  \end{bmatrix}
\end{equation}\]</span></p>
<p>The Total Requirements matrix (Leontief inverse), constructed as <span class="math inline">\(\mathbf{L} = \left(\mathbf{I} - \mathbf{A}\right)^{-1}\)</span>, is given by,</p>
<p><span class="math display">\[\begin{equation}
\underset{(i \times i)}{\mathbf{L}} =
    \begin{bmatrix}
    l_{11} &amp; l_{12} \\
    l_{21} &amp; l_{22} \\
  \end{bmatrix}
  =
  \begin{bmatrix}
    1.2541254 &amp; 0.330033 \\
    0.2640264 &amp; 1.122112 \\
  \end{bmatrix}
\end{equation}\]</span></p>
<p>Given total output <span class="math inline">\(\mathbf{x}\)</span> and interindustry sales <span class="math inline">\(\mathbf{Z}\)</span>, the exogenous final demand is simply the difference in total output and the row sums of interindustry transactions given by, <span class="math inline">\(\mathbf{f} = \mathbf{x} - \mathbf{Zi}\)</span> where <span class="math inline">\(\mathbf{f}' = \begin{bmatrix} 350 &amp; 1700 \end{bmatrix}\)</span></p>
<p>Suppose, <em>final demand</em> for extraction were to increase to $600 next year and decrease to $1500 for farming, such that the change in final demand is given by, <span class="math inline">\(\Delta\mathbf{f}' = \begin{bmatrix} 250 &amp; 200 \end{bmatrix}\)</span>. Using the Leontief inverse (total requirements) matrix, the expected change in total output of the economy is given by <span class="math inline">\(\Delta\mathbf{x} = \mathbf{L}\Delta\mathbf{f}\)</span> such that <span class="math inline">\(\Delta\mathbf{x}' = \begin{bmatrix} 247.5248 &amp; -158.4158 \end{bmatrix}\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#A simple I/O analysis "by hand" presuming given national accounts are in the form of raw interindustry flows where one must generate a direct requirements matrices (Technical Coefficients) and the total requirements matrix (Leontief inverse).</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note the national IO table at present is a domestic flow specification as such the interindustry transactions table is no longer representative of a technological matrix. It rather represents the intra-national interindustry transactions, which are determined not only by technological factors, but also by trade factors. As a consequence in the domestic-flow table the balance between supply and demand is made considering only domestic production.</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy Transaction matrix</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>Toy_Z_mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">150</span>, <span class="dv">500</span>, <span class="dv">200</span>, <span class="dv">100</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Z_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Farm"</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Z_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Farm"</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Transaction matrix"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Transaction matrix"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Toy_Z_mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        Extract Farm
Extract     150  500
Farm        200  100</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy Total Output vector</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>Toy_Total_Output <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Total Output vector"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Total Output vector"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>Toy_Total_Output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1000 2000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy Final Demand vector</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>Toy_Final_Demand <span class="ot">&lt;-</span> Toy_Total_Output <span class="sc">-</span> (Toy_Z_mat <span class="sc">%*%</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Z_mat)))</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Final Demand vector"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Final Demand vector"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Toy_Final_Demand</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        [,1]
Extract  350
Farm    1700</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy Direct Requirements matrix</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>Toy_A_mat <span class="ot">&lt;-</span> Toy_Z_mat <span class="sc">%*%</span> <span class="fu">diag</span>(<span class="dv">1</span><span class="sc">/</span>Toy_Total_Output)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_A_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Farm"</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_A_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Farm"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Direct Requirements matrix"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Direct Requirements matrix"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>Toy_A_mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        Extract Farm
Extract    0.15 0.25
Farm       0.20 0.05</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy Total Requirements matrix</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>Toy_L_mat <span class="ot">&lt;-</span> <span class="fu">solve</span>(<span class="fu">diag</span>(<span class="fu">nrow</span>(Toy_A_mat)) <span class="sc">-</span> Toy_A_mat)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Total Requirements matrix"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Total Requirements matrix"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>Toy_L_mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          Extract     Farm
Extract 1.2541254 0.330033
Farm    0.2640264 1.122112</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy change in Final Demand vector</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>Toy_Delta_Demand <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">250</span>, <span class="sc">-</span><span class="dv">200</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Final Demand vector change"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Final Demand vector change"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>Toy_Delta_Demand</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  250 -200</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy change in Total Output vector</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>Toy_Delta_Output <span class="ot">&lt;-</span> Toy_L_mat <span class="sc">%*%</span> Toy_Delta_Demand</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Total Output vector change"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Total Output vector change"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>Toy_Delta_Output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>             [,1]
Extract  247.5248
Farm    -158.4158</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note, to allow for the presence of final demand and primary inputs, in an open model, the sum of each column in $A$ must be less than 1. </span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple sufficient, but not necessary condition of sustainability. All must be TRUE.</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">colSums</span>(Toy_A_mat) <span class="sc">&lt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> {<span class="fu">paste0</span>(<span class="st">"Technology matrix structure passes sufficient test of sustainability: "</span>, . )}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Technology matrix structure passes sufficient test of sustainability: TRUE"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Hawkins – Simon condition check. All must be TRUE.</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">local</span>({</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>PM <span class="ot">=</span> <span class="cn">NULL</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(n <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_A_mat)){</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  PM[<span class="dv">1</span><span class="sc">:</span>n] <span class="ot">=</span> (<span class="fu">det</span>((<span class="fu">diag</span>(<span class="fu">nrow</span>(Toy_A_mat)) <span class="sc">-</span> Toy_A_mat)[<span class="dv">1</span><span class="sc">:</span>n,<span class="dv">1</span><span class="sc">:</span>n]) <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">all</span>(PM) <span class="sc">&amp;</span> (<span class="fu">diag</span>(<span class="fu">diag</span>(<span class="fu">nrow</span>(Toy_A_mat)) <span class="sc">-</span> Toy_A_mat) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">&amp;</span> (<span class="fu">det</span>(<span class="fu">diag</span>(<span class="fu">nrow</span>(Toy_A_mat)) <span class="sc">-</span> Toy_A_mat) <span class="sc">&gt;</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> {<span class="fu">paste0</span>(<span class="st">"Leontief matrix structure passes necessary and sufficient test of practibility and viability: "</span>, . )}</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Leontief matrix structure passes necessary and sufficient test of practibility and viability: TRUE"</code></pre>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p><strong>Retrospective</strong></p>
<p>One objective of the project narative is to quantify and match the economic connectedness of Micropolitian and Urban clusters to large Metropolitan economies. This is done by analyzing how well the commodity output mix of Micropolitian and Urban clusters to the commodity uses of industries in large Metropolitan cores.</p>
<p>In practice, for two <em>primary ECAs</em> <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, we construct the absolute rural use coefficients as:</p>
<p align="center">
<span class="math inline">\(\displaystyle \alpha^{r}_{A} = \frac{\sum^{n}_{j=1} u_{cj} s_{Aj}} {\sum^{n}_{j=1} u_{cj}}\)</span>, <span class="math inline">\(\displaystyle \alpha^{r}_{B} = \frac{\sum^{n}_{j=1} u_{cj} s_{Bj}} {\sum^{n}_{j=1} u_{cj}}\)</span>
</p>
<p>where <span class="math inline">\(u_{cj}\)</span> the the value of purchases of a single commodity <span class="math inline">\(c\)</span> by industry <span class="math inline">\(j\)</span> from the BEA’s the <em>Use</em> matrix, and <span class="math inline">\(s_{Aj}\)</span> and <span class="math inline">\(s_{Bj}\)</span> are the annual sales of industry <span class="math inline">\(j\)</span> in <em>primary</em> ECA regions <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, for <span class="math inline">\(j = 1, \dots, n\)</span> industries. Similarly, we construct the relative rural use coefficients as:</p>
<p align="center">
<span class="math inline">\(\displaystyle \rho^{r}_{A} = \frac{\alpha^{r}_{A}} {\sum^{n}_{j=1} s_{Aj}}\)</span>, <span class="math inline">\(\displaystyle \rho^{r}_{B} = \frac{\alpha^{r}_{B}} {\sum^{n}_{j=1} s_{Bj}}\)</span>
</p>
<p>In the absolute specification, the numerator is a uniform modification of the elements in a row of the national <em>Use</em> matrix. The national value of purchases of commodity <span class="math inline">\(c\)</span> by each industry <span class="math inline">\(j\)</span> weighted by the regional value of “sales” by each industry <span class="math inline">\(j\)</span> (CBP will offer values of county-level industry employment, Q1 payroll, and annual payroll). This is divided by the total intermediate value of commodity <span class="math inline">\(c\)</span> at the national level.</p>
<p>The relative specification then takes the absolute coefficient divided by the sum of the regional “sales” by each industry <span class="math inline">\(j\)</span>.</p>
<p><strong>Toy Model</strong></p>
<p>Suppose there is 1 <strong>N</strong>ational level economy composed of 2 industries (e.g., Hydrocarbon <strong>E</strong>xtraction and <strong>F</strong>arming), 3 commodities (e.g., <strong>G</strong>asoline, <strong>H</strong>ogs, and <strong>I</strong>ce cream), and 4 regions (e.g., <strong>D</strong>ane county (Madison , WI), <strong>C</strong>ook county (Chicago, IL), <strong>B</strong>rown County (Green Bay, WI), and the <strong>A</strong>ll the rest as a collective residual).</p>
<p>Available data consists of a <span class="math inline">\(3 \times 2\)</span> <strong>N</strong>ational level commodity by industry <em>Use table</em> (<span class="math inline">\(\underset{(3 \times 2)}{\mathbf{U}} = [u_{ij}]\)</span>) that depicts the value of purchases of commodity <span class="math inline">\(i\)</span> by industry <span class="math inline">\(j\)</span>. (In conjunction with a column vector of total industry outputs (<span class="math inline">\(\underset{(2 \times 1)}{\mathbf{x}} = [x_{j}]\)</span>), this gives rise to the standard <em>Use coefficients</em> <span class="math inline">\(\mathbf{B} = [b_{ij}] = u_{ij}/x_{j}\)</span> in which column <span class="math inline">\(j\)</span> represents the value of inputs of each commodity per dollar’s worth <span class="math inline">\(\mathbf{B}\)</span> are therefore commodities-by-industries.) Similarly, other available data consists of a <span class="math inline">\(2 \times 3\)</span> <strong>N</strong>ational level commodity by industry <em>Make table</em> (<span class="math inline">\(\underset{(2 \times 3)}{\mathbf{V}} = [v_{ij}]\)</span>) that depicts the value of output of commodity <span class="math inline">\(j\)</span> that is produced by industry <span class="math inline">\(i\)</span>. (Note, the row sums of <span class="math inline">\(\mathbf{V}\)</span> are total industry output <span class="math inline">\(\mathbf{x}\)</span> and column sums of <span class="math inline">\(\mathbf{V}\)</span> are total [commodity] output <span class="math inline">\(\mathbf{q}'\)</span>.)</p>
<p>Available data of at the region level consists of sector specific industry activity (<span class="math inline">\(\underset{(2 \times 4)}{\mathbf{x}^r} = [x^{r}_{j}]\)</span>) in the form of either employment, payroll, or simply number of establishments.</p>
<p>As such let,</p>
<p><span class="math display">\[\begin{equation}
\underset{(c \times i)}{\mathbf{U}^{n}} =
  \begin{bmatrix}
    u^{n}_{11} &amp; u^{n}_{12} \\
    u^{n}_{21} &amp; u^{n}_{22} \\
    u^{n}_{31} &amp; u^{n}_{32} \\
  \end{bmatrix}
  =
  \begin{bmatrix}
    u^{n}_{GE} &amp; u^{n}_{GF} \\
    u^{n}_{HE} &amp; u^{n}_{HF} \\
    u^{n}_{IE} &amp; u^{n}_{IF} \\
  \end{bmatrix}, \;  \text{ and} \; \;
\underset{(i \times g)}{\mathbf{X}^{r}_{empl/pay}} =
  \begin{bmatrix}
    x^{1}_{1} &amp; x^{2}_{1} &amp; x^{3}_{1} &amp; x^{4}_{1} \\
    x^{1}_{2} &amp; x^{2}_{2} &amp; x^{3}_{2} &amp; x^{4}_{2} \\
  \end{bmatrix}
  =
    \begin{bmatrix}
    x^{A}_{E} &amp; x^{B}_{E} &amp; x^{C}_{E} &amp; x^{D}_{E} \\
    x^{A}_{F} &amp; x^{B}_{F} &amp; x^{C}_{F} &amp; x^{D}_{F} \\  
    \end{bmatrix}
\end{equation}\]</span></p>
<p>As such the project narrative use coefficients (as demonstrated in the excel trial) are:</p>
<p><span class="math display">\[
\underset{(c \times g)}{\mathbf{\alpha}} = (\hat{\mathbf{Ui}}^{n})^{-1}\mathbf{U}^{n}\mathbf{X}^{r} =
\begin{bmatrix}
    \frac{u^{n}_{GE}x^{A}_{E}+u^{n}_{GF}x^{A}_{F}}{u^{n}_{GE}+u^{n}_{GF}} &amp; \frac{u^{n}_{GE}x^{B}_{E}+u^{n}_{GF}x^{B}_{F}}{u^{n}_{GE}+u^{n}_{GF}} &amp; \frac{u^{n}_{GE}x^{C}_{E}+u^{n}_{GF}x^{C}_{F}}{u^{n}_{GE}+u^{n}_{GF}} &amp; \frac{u^{n}_{GE}x^{D}_{E}+u^{n}_{GF}x^{D}_{F}}{u^{n}_{GE}+u^{n}_{GF}} \\
    \frac{u^{n}_{HE}x^{A}_{E}+u^{n}_{HF}x^{A}_{F}}{u^{n}_{HE}+u^{n}_{HF}} &amp; \frac{u^{n}_{HE}x^{B}_{E}+u^{n}_{HF}x^{B}_{F}}{u^{n}_{HE}+u^{n}_{HF}} &amp; \frac{u^{n}_{HE}x^{C}_{E}+u^{n}_{HF}x^{C}_{F}}{u^{n}_{HE}+u^{n}_{HF}} &amp; \frac{u^{n}_{HE}x^{D}_{E}+u^{n}_{HF}x^{D}_{F}}{u^{n}_{HE}+u^{n}_{HF}} \\
    \frac{u^{n}_{IE}x^{A}_{E}+u^{n}_{IF}x^{A}_{F}}{u^{n}_{IE}+u^{n}_{IF}} &amp; \frac{u^{n}_{IE}x^{B}_{E}+u^{n}_{IF}x^{B}_{F}}{u^{n}_{IE}+u^{n}_{IF}} &amp; \frac{u^{n}_{IE}x^{C}_{E}+u^{n}_{IF}x^{C}_{F}}{u^{n}_{IE}+u^{n}_{IF}} &amp; \frac{u^{n}_{IE}x^{D}_{E}+u^{n}_{IF}x^{D}_{F}}{u^{n}_{IE}+u^{n}_{IF}} \\
\end{bmatrix}
\]</span> and</p>
<p><span class="math display">\[
\underset{(c \times g)}{\mathbf{\rho}} = (\hat{\mathbf{Ui}}^{n})^{-1}\mathbf{U}^{n}\mathbf{X}^{r}(\hat{\mathbf{iX}}^{r})^{-1} =
\begin{bmatrix}
    \frac{u^{n}_{GE}x^{A}_{E}+u^{n}_{GF}x^{A}_{F}}{(u^{n}_{GE}+u^{n}_{GF})(x^{A}_{E} + x^{A}_{F})} &amp; \frac{u^{n}_{GE}x^{B}_{E}+u^{n}_{GF}x^{B}_{F}}{(u^{n}_{GE}+u^{n}_{GF})(x^{B}_{E} + x^{B}_{F})} &amp;  \frac{u^{n}_{GE}x^{C}_{E}+u^{n}_{GF}x^{C}_{F}}{(u^{n}_{GE}+u^{n}_{GF})(x^{C}_{E} + x^{C}_{F})} &amp; \frac{u^{n}_{GE}x^{D}_{E}+u^{n}_{GF}x^{D}_{F}}{(u^{n}_{GE}+u^{n}_{GF})(x^{D}_{E} + x^{D}_{F})} \\
    \frac{u^{n}_{HE}x^{A}_{E}+u^{n}_{HF}x^{A}_{F}}{(u^{n}_{HE}+u^{n}_{HF})(x^{A}_{E} + x^{A}_{F})} &amp; \frac{u^{n}_{HE}x^{B}_{E}+u^{n}_{HF}x^{B}_{F}}{(u^{n}_{HE}+u^{n}_{HF})(x^{B}_{E} + x^{B}_{F})} &amp; \frac{u^{n}_{HE}x^{C}_{E}+u^{n}_{HF}x^{C}_{F}}{(u^{n}_{HE}+u^{n}_{HF})(x^{C}_{E} + x^{C}_{F})} &amp; \frac{u^{n}_{HE}x^{D}_{E}+u^{n}_{HF}x^{D}_{F}}{(u^{n}_{HE}+u^{n}_{HF})(x^{D}_{E} + x^{D}_{F})} \\
    \frac{u^{n}_{IE}x^{A}_{E}+u^{n}_{IF}x^{A}_{F}}{(u^{n}_{IE}+u^{n}_{IF})(x^{A}_{E} + x^{A}_{F})} &amp; \frac{u^{n}_{IE}x^{B}_{E}+u^{n}_{IF}x^{B}_{F}}{(u^{n}_{IE}+u^{n}_{IF})(x^{B}_{E} + x^{B}_{F})} &amp; \frac{u^{n}_{IE}x^{C}_{E}+u^{n}_{IF}x^{C}_{F}}{(u^{n}_{IE}+u^{n}_{IF})(x^{C}_{E} + x^{C}_{F})} &amp; \frac{u^{n}_{IE}x^{D}_{E}+u^{n}_{IF}x^{D}_{F}}{(x^{C}_{E} + x^{C}_{F})(x^{D}_{E} + x^{D}_{F})} \\
\end{bmatrix}
\]</span></p>
<p><strong>What are the interpretations of these coefficients explicitly?</strong></p>
<p>From here we can ask the question: Is Madison more economically connected to Chicago or Green Bay or is it an economic island? More specifically, is the commodity(?) output (mix?) of Madison more congruent with the commodity(?) output (mix?) of Chicago or Green Bay? (Note: there is no claim/evidence of trade and commodity flows across space using this specification, instead we are measuring possible (one direction) sector compatibility.)</p>
<p>Given the commodity by geography, relative use coefficient matrix <span class="math inline">\(\mathbf{\rho}\)</span>, we can now construct a geography by geography (from-to) score for each commodity given by:</p>
<p><span class="math display">\[
\mathbf{\phi}_{Gasoline} = \hat{\rho}_{G}\mathbf{i}\mathbf{i}'[\hat{\rho}_{G}\mathbf{i}\mathbf{i}'+\hat{\rho}'_{G}\mathbf{i}\mathbf{i}']^{-1} =
  \begin{bmatrix}
    \frac{\rho_{G}^{A}}{\rho_{G}^{A} + \rho_{G}^{A}} &amp; \frac{\rho_{G}^{A}}{\rho_{G}^{A} + \rho_{G}^{B}} &amp; \frac{\rho_{G}^{A}}{\rho_{G}^{A} + \rho_{G}^{C}} &amp; \frac{\rho_{G}^{A}}{\rho_{G}^{A} + \rho_{G}^{D}} \\
    \frac{\rho_{G}^{B}}{\rho_{G}^{B} + \rho_{G}^{A}} &amp; \frac{\rho_{G}^{B}}{\rho_{G}^{B} + \rho_{G}^{B}} &amp; \frac{\rho_{G}^{B}}{\rho_{G}^{B} + \rho_{G}^{C}} &amp; \frac{\rho_{G}^{B}}{\rho_{G}^{B} + \rho_{G}^{D}} \\
    \frac{\rho_{G}^{C}}{\rho_{G}^{C} + \rho_{G}^{A}} &amp; \frac{\rho_{G}^{C}}{\rho_{G}^{C} + \rho_{G}^{B}} &amp; \frac{\rho_{G}^{C}}{\rho_{G}^{C} + \rho_{G}^{C}} &amp; \frac{\rho_{G}^{C}}{\rho_{G}^{C} + \rho_{G}^{D}} \\
    \frac{\rho_{G}^{D}}{\rho_{G}^{D} + \rho_{G}^{A}} &amp; \frac{\rho_{G}^{D}}{\rho_{G}^{D} + \rho_{G}^{B}} &amp; \frac{\rho_{G}^{D}}{\rho_{G}^{D} + \rho_{G}^{C}} &amp; \frac{\rho_{G}^{D}}{\rho_{G}^{D} + \rho_{G}^{D}} \\
  \end{bmatrix}
\]</span> The maximum value by row of <span class="math inline">\(\mathbf{\phi}_{G}\)</span> determines which typology each region is assigned on a per commodity basis.</p>
<p>Similarly the other commodities are given by:</p>
<p><span class="math display">\[
\mathbf{\phi}_{Hogs} = \hat{\rho}_{H}\mathbf{i}\mathbf{i}'[\hat{\rho}_{H}\mathbf{i}\mathbf{i}'+\hat{\rho}'_{H}\mathbf{i}\mathbf{i}']^{-1} =
  \begin{bmatrix}
    \frac{\rho_{H}^{A}}{\rho_{H}^{A} + \rho_{H}^{A}} &amp; \frac{\rho_{H}^{A}}{\rho_{H}^{A} + \rho_{H}^{B}} &amp; \frac{\rho_{H}^{A}}{\rho_{H}^{A} + \rho_{H}^{C}} &amp; \frac{\rho_{H}^{A}}{\rho_{H}^{A} + \rho_{H}^{D}} \\
    \frac{\rho_{H}^{B}}{\rho_{H}^{B} + \rho_{H}^{A}} &amp; \frac{\rho_{H}^{B}}{\rho_{H}^{B} + \rho_{H}^{B}} &amp; \frac{\rho_{H}^{B}}{\rho_{H}^{B} + \rho_{H}^{C}} &amp; \frac{\rho_{H}^{B}}{\rho_{H}^{B} + \rho_{H}^{D}} \\
    \frac{\rho_{H}^{C}}{\rho_{H}^{C} + \rho_{H}^{A}} &amp; \frac{\rho_{H}^{C}}{\rho_{H}^{C} + \rho_{H}^{B}} &amp; \frac{\rho_{H}^{C}}{\rho_{H}^{C} + \rho_{H}^{C}} &amp; \frac{\rho_{H}^{C}}{\rho_{H}^{C} + \rho_{H}^{D}} \\
    \frac{\rho_{H}^{D}}{\rho_{H}^{D} + \rho_{H}^{A}} &amp; \frac{\rho_{H}^{D}}{\rho_{H}^{D} + \rho_{H}^{B}} &amp; \frac{\rho_{H}^{D}}{\rho_{H}^{D} + \rho_{H}^{C}} &amp; \frac{\rho_{H}^{D}}{\rho_{H}^{D} + \rho_{H}^{D}} \\
  \end{bmatrix}
\]</span> <span class="math display">\[
\mathbf{\phi}_{Ice cream} = \hat{\rho}_{I}\mathbf{i}\mathbf{i}'[\hat{\rho}_{I}\mathbf{i}\mathbf{i}'+\hat{\rho}'_{I}\mathbf{i}\mathbf{i}']^{-1} =
  \begin{bmatrix}
    \frac{\rho_{I}^{A}}{\rho_{I}^{A} + \rho_{I}^{A}} &amp; \frac{\rho_{I}^{A}}{\rho_{I}^{A} + \rho_{I}^{B}} &amp; \frac{\rho_{I}^{A}}{\rho_{I}^{A} + \rho_{I}^{C}} &amp; \frac{\rho_{I}^{A}}{\rho_{I}^{A} + \rho_{I}^{D}} \\
    \frac{\rho_{I}^{B}}{\rho_{I}^{B} + \rho_{I}^{A}} &amp; \frac{\rho_{I}^{B}}{\rho_{I}^{B} + \rho_{I}^{B}} &amp; \frac{\rho_{I}^{B}}{\rho_{I}^{B} + \rho_{I}^{C}} &amp; \frac{\rho_{I}^{B}}{\rho_{I}^{B} + \rho_{I}^{D}} \\
    \frac{\rho_{I}^{C}}{\rho_{I}^{C} + \rho_{I}^{A}} &amp; \frac{\rho_{I}^{C}}{\rho_{I}^{C} + \rho_{I}^{B}} &amp; \frac{\rho_{I}^{C}}{\rho_{I}^{C} + \rho_{I}^{C}} &amp; \frac{\rho_{I}^{C}}{\rho_{I}^{C} + \rho_{I}^{D}} \\
    \frac{\rho_{I}^{D}}{\rho_{I}^{D} + \rho_{I}^{A}} &amp; \frac{\rho_{I}^{D}}{\rho_{I}^{D} + \rho_{I}^{B}} &amp; \frac{\rho_{I}^{D}}{\rho_{I}^{D} + \rho_{I}^{C}} &amp; \frac{\rho_{I}^{D}}{\rho_{I}^{D} + \rho_{I}^{D}} \\
  \end{bmatrix}
\]</span></p>
<p>Such that</p>
<p><span class="math display">\[
\mathbf{\phi} =
\begin{bmatrix}
\mathbf{\phi}_{G} &amp; 0 &amp; 0 \\
0 &amp; \mathbf{\phi}_{H} &amp; 0 \\
0 &amp; 0 &amp; \mathbf{\phi}_{I} \\
\end{bmatrix}
\]</span></p>
<p>The maximum value by row of <span class="math inline">\(\mathbf{\phi}\)</span> determines which typology each region is assigned on an overall commodity basis.</p>
<p>(Alternative assignment procedures may incorporate a weighted mix of commodities or alternatively measure the “gravity” of regions by commodities to determine a regions commodity center of gravity.)</p>
<p>Suppose,</p>
<p><span class="math display">\[\begin{equation}
\underset{(c \times i)}{\mathbf{U}^{n}} =
  \begin{bmatrix}
    18 &amp; 12 \\
    20 &amp; 16 \\
    2 &amp; 6 \\
  \end{bmatrix}, \;  \text{ and} \; \;
\underset{(i \times g)}{\mathbf{X}^{r}_{employment}} =
  \begin{bmatrix}
    500 &amp; 10 &amp; 30 &amp; 4 \\
    6000 &amp; 200 &amp; 400 &amp; 50 \\
  \end{bmatrix}
\end{equation}\]</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>Toy_U_mat <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">12</span>, <span class="dv">20</span>, <span class="dv">16</span>, <span class="dv">2</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_U_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Gas"</span>, <span class="st">"Hogs"</span>, <span class="st">"Ice"</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_U_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Farm"</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>Toy_X_mat <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">10</span>,  <span class="dv">30</span>, <span class="dv">4</span>, <span class="dv">6000</span>, <span class="dv">200</span>, <span class="dv">400</span>, <span class="dv">50</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_X_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Farm"</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_X_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>Toy_u_vec <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(Toy_U_mat <span class="sc">%*%</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_U_mat)))</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>Toy_x_vec <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">t</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">nrow</span>(Toy_X_mat))) <span class="sc">%*%</span> Toy_X_mat)</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>Toy_Alpha_mat <span class="ot">&lt;-</span> <span class="fu">solve</span>(<span class="fu">matrix</span>(<span class="fu">diag</span>(Toy_u_vec, <span class="at">nrow =</span> <span class="dv">3</span>),  <span class="at">ncol=</span><span class="dv">3</span>)) <span class="sc">%*%</span> Toy_U_mat <span class="sc">%*%</span> Toy_X_mat</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Alpha_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Gas"</span>, <span class="st">"Hogs"</span>, <span class="st">"Ice"</span>)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Alpha matrix"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Alpha matrix"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>Toy_Alpha_mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      AllElse     Brown     Cook     Dane
Gas  2700.000  86.00000 178.0000 22.40000
Hogs 2944.444  94.44444 194.4444 24.44444
Ice  4625.000 152.50000 307.5000 38.50000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>Toy_Rho_mat <span class="ot">&lt;-</span> Toy_Alpha_mat <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">matrix</span>(<span class="fu">diag</span>(Toy_x_vec, <span class="at">nrow =</span> <span class="dv">4</span>),  <span class="at">ncol=</span><span class="dv">4</span>)) </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Rho_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Rho matrix"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Rho matrix"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>Toy_Rho_mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>       AllElse     Brown      Cook      Dane
Gas  0.4153846 0.4095238 0.4139535 0.4148148
Hogs 0.4529915 0.4497354 0.4521964 0.4526749
Ice  0.7115385 0.7261905 0.7151163 0.7129630</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>Toy_Phi_tilde_mat_G <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">diag</span>(Toy_Rho_mat[<span class="dv">1</span>,], <span class="at">nrow =</span> <span class="dv">4</span>),  <span class="at">ncol=</span><span class="dv">4</span>) <span class="sc">%*%</span>  <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_X_mat))  <span class="sc">%*%</span> <span class="fu">t</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_X_mat)))</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_G <span class="ot">&lt;-</span>  Toy_Phi_tilde_mat_G <span class="sc">/</span> (Toy_Phi_tilde_mat_G <span class="sc">+</span> <span class="fu">t</span>(Toy_Phi_tilde_mat_G))</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Phi_mat_G) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Phi_mat_G) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Phi matrix - Gas"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Phi matrix - Gas"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_G</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          AllElse     Brown      Cook      Dane
AllElse 0.5000000 0.5035524 0.5008628 0.5003432
Brown   0.4964476 0.5000000 0.4973104 0.4967908
Cook    0.4991372 0.5026896 0.5000000 0.4994804
Dane    0.4996568 0.5032092 0.5005196 0.5000000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>Toy_Phi_tilde_mat_H <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">diag</span>(Toy_Rho_mat[<span class="dv">2</span>,], <span class="at">nrow =</span> <span class="dv">4</span>),  <span class="at">ncol=</span><span class="dv">4</span>) <span class="sc">%*%</span>  <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_X_mat))  <span class="sc">%*%</span> <span class="fu">t</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_X_mat)))</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_H <span class="ot">&lt;-</span>  Toy_Phi_tilde_mat_H <span class="sc">/</span> (Toy_Phi_tilde_mat_H <span class="sc">+</span> <span class="fu">t</span>(Toy_Phi_tilde_mat_H))</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Phi_mat_H) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Phi_mat_H) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Phi matrix - Hogs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Phi matrix - Hogs"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_H</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          AllElse     Brown      Cook      Dane
AllElse 0.5000000 0.5018034 0.5004392 0.5001748
Brown   0.4981966 0.5000000 0.4986357 0.4983713
Cook    0.4995608 0.5013643 0.5000000 0.4997356
Dane    0.4998252 0.5016287 0.5002644 0.5000000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>Toy_Phi_tilde_mat_I <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">diag</span>(Toy_Rho_mat[<span class="dv">3</span>,], <span class="at">nrow =</span> <span class="dv">4</span>),  <span class="at">ncol=</span><span class="dv">4</span>) <span class="sc">%*%</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_X_mat))  <span class="sc">%*%</span> <span class="fu">t</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_X_mat)))</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_I <span class="ot">&lt;-</span>  Toy_Phi_tilde_mat_I <span class="sc">/</span> (Toy_Phi_tilde_mat_I <span class="sc">+</span> <span class="fu">t</span>(Toy_Phi_tilde_mat_I))</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Phi_mat_I) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Phi_mat_I) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Phi matrix - Ice"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Phi matrix - Ice"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_I</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          AllElse     Brown      Cook      Dane
AllElse 0.5000000 0.4949045 0.4987461 0.4995000
Brown   0.5050955 0.5000000 0.5038417 0.5045956
Cook    0.5012539 0.4961583 0.5000000 0.5007539
Dane    0.5005000 0.4954044 0.4992461 0.5000000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat <span class="ot">&lt;-</span> <span class="fu">bdiag</span>(Toy_Phi_mat_G, Toy_Phi_mat_H, Toy_Phi_mat_I)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<p>“Quantify the economic connectedness of places through production supply chains.”</p>
<p>Simply put at the core of our analysis lies the question: How similar are the inputs of Chicago to the outputs of Madison?</p>
<p>Given only national level Input-Output tables (consisting of Make/Use tables, industry-by-industry, industry-by-commodity, and commodity-by-commodity total requirements tables, and commodity-by-industry direct requirements tables) and regional level industry activity (in the form of employment, payroll, and number of establishments), we are left with a handful of possible methods to derive an answer.</p>
<p><em>Possible Methodologies</em></p>
<p>Seemingly, our first task is to “regionalize” the national level I/O accounts down to the desired regional scale.</p>
<ul>
<li><p>The most comprehensive approach is to execute an <em>interregional input–output (IRIO)</em> model. However, this approach really only serves as a platonic abstraction given the vast and detailed necessary exogenous inputs.</p></li>
<li><p>One possible approach is to implement parts or all of a <em>multiregional input–output model</em>. The regional tables of an MRIO employ a regional <em>technical</em> coefficients matrix, <span class="math inline">\(\mathbf{A^{r}}\)</span>. Under this paradigm, information regarding the region of origin is ignored. These transactions are denoted <span class="math inline">\(z^{\cdot r}_{ij}\)</span>, with the coefficients estimated as <span class="math inline">\(a^{r}_{ij} = \frac{z^{\cdot r}_{ij}}{x^{r}_{j}}\)</span> where <span class="math inline">\(\mathbf{A^{r}} = \left[ a^{r}_{ij} \right]\)</span>. In practice, estimates are can be made using a <em>product-mix approach</em>. This technique essentially uses detailed level national technical coefficients and detailed level regional outputs to produce regional coefficients at a less detailed summary level (from weighted averages of the national detailed coefficients). This approach may be feasible given the available data, however, the necessary agglomeration of industry classes is not ideal. Furthermore, extending this approach into the realm of interregional tables, requires data on dollar flow of goods between regions, <span class="math inline">\(z^{rs}_{i}\)</span>, irrespective of the sector of destination in the receiving region. Again, however, this extension is beyond the scope of the available data.</p></li>
<li><p>Another possible approach is to employ the <em>RAS technique</em>, however, instead of the typical deployment for updating coefficients across time, we may update input coefficients across space. This approach requires <span class="math inline">\(3n\)</span> sets of information for the location of interest. These are, <em>total gross outputs</em>, <span class="math inline">\(x^{r}_{j}\)</span>, <em>total interindustry sales</em>, by sector <span class="math inline">\(u_{i} = \sum^{n}_{j=1} z^{r}_{ij}\)</span>, and <em>total interindustry purchases</em>, by sector <span class="math inline">\(v_{i} = \sum^{n}_{i=1} z^{r}_{ij}\)</span>. But even this slimmed down approach is still beyond the scope of the data.</p></li>
<li><p>Yet another possible alternative approach might be to estimate <em>regional supply percentages</em>, <span class="math inline">\(p^{r}_{i}\)</span>. This approach requires knowledge of total regional output of each sector, <span class="math inline">\(x^{r}_{i}\)</span>, and the exports of the product of each sector from the region, <span class="math inline">\(e^{r}_{i}\)</span>, and the imports of all goods into the region, <span class="math inline">\(m^{r}_{i}\)</span>. With knowledge of <em>regional supply percentages</em> one can scale the national level <em>direct/input requirements matrix</em> to estimate a regional <em>input requirements matrix</em>, <span class="math inline">\(\mathbf{A^{rr}} = \mathbf{\hat{p}^{r}A}\)</span>. Clearly, this too is beyond the scope of the available data.</p></li>
</ul>
<p>However in this manner, when trying to estimate <span class="math inline">\(a^{rr}_{ij}\)</span> from national data, one can generalize the problem as a two step process of: (1) estimate a regional technical coefficient, <span class="math inline">\(a^{r}_{ij}\)</span>, from the corresponding national coefficient, <span class="math inline">\(a^{n}_{ij}\)</span>, and then (2) estimate the regional input coefficient, <span class="math inline">\(a^{rr}_{ij}\)</span>, as some proportion of the regional technical coefficient; that is, <span class="math inline">\(a^{rr}_{ij} = p^{r}_{ij}a^{r}_{ij}\)</span> (where <span class="math inline">\(0 \leq p^{r}_{ij} \leq 1\)</span>).</p>
<p>The procedure for estimating <span class="math inline">\(a^{rr}_{ij}\)</span> from <span class="math inline">\(a^{n}_{ij}\)</span> is therefore:</p>
<ol type="1">
<li><p>find <span class="math inline">\(\alpha^{r}_{ij} \geq 0\)</span> such that <span class="math inline">\(a^{r}_{ij} = (\alpha^{r}_{ij}) (a^{n}_{ij})\)</span>, and</p></li>
<li><p>find <span class="math inline">\(\beta^{r}_{ij}\)</span> (<span class="math inline">\(0 \leq \beta^{r}_{ij} \leq 1\)</span>) such that <span class="math inline">\(a^{rr}_{ij} = (\beta^{r}_{ij}) (a^{r}_{ij})\)</span></p></li>
</ol>
<p>If we assume regional production recipes are identical then <span class="math inline">\(\alpha^{r}_{ij} = 1\)</span> and <span class="math inline">\(a^{r}_{ij} = a^{n}_{ij}\)</span> for all <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>. Or if we assume each regional purchaser buys the same proportion of inputs from within the region, then <span class="math inline">\(\beta^{r}_{ij} = p^{r}_{i}\)</span> for all <span class="math inline">\(i\)</span>.</p>
<ul>
<li><p>Given this structure, and assuming <span class="math inline">\(a^{r}_{ij} = a^{n}_{ij}\)</span>, we may propose various functional estimates of <span class="math inline">\(\beta^{r}_{ij}\)</span> to derive <span class="math inline">\(a^{rr}_{ij}\)</span> from <span class="math inline">\(a^{n}_{ij}\)</span>, i.e., <em>Location Quotients</em>. The <span class="math inline">\(LQ\)</span>s only require knowledge of gross output of sector <span class="math inline">\(i\)</span> in region <span class="math inline">\(r\)</span> and total output of all sectors in the region, <span class="math inline">\(x^{r}_{i}\)</span> and <span class="math inline">\(x^{r}\)</span>, along with these values at the national level: <span class="math inline">\(LQ^{r}_{i} = \left( \frac{x^{r}_{i} / x^{r}} {x^{n}_{i} / x^{n}} \right)\)</span>. Furthermore, many regional analysts will use employment rather than output as an alternative to the relevant measures of regional and national activity. This is a feasible option given the available data.</p></li>
<li><p>Another possible approach is to employ <em>Regional Purchase Coefficients</em>. The <span class="math inline">\(RPC\)</span> is defined as the proportion of regional demand for that sector’s output that is fulfilled from regional production. Much in the same way that location quotients operate, we may designate <span class="math inline">\(\beta^{r}_{ij} = p^{r}_{i} = RPC^{r}_{i}\)</span>, where <span class="math inline">\(RPC^{r}_{i} = z^{rr}_{i} / (z^{rr}_{i} + z^{sr}_{i}) = 1/[1 + 1/(z^{rr}_{i}/z^{sr}_{i})]\)</span>. The <em>relative shipment</em> term <span class="math inline">\(z^{rr}_{i}/z^{sr}_{i}\)</span>, may itself be estimated from published sources such as <em>Census of Transportation</em>, unfortunately these are beyond the current scope and available data.</p></li>
<li><p>The final standard approach is to implement a <em>Gravity Model</em> formulation to estimate commodity flows between regions. The <em>Gravity Model</em> estimates the flow of goods between regions as a function of (1) some measure of the total output of <span class="math inline">\(i\)</span> in <span class="math inline">\(r\)</span>, <span class="math inline">\(x^{r}_{i}\)</span>, (2) some measure of the total purchases of <span class="math inline">\(i\)</span> in <span class="math inline">\(s\)</span>, <span class="math inline">\(x^{s}_{i}\)</span>, and (3) the distance (as a measure of “impedance”) between the two regions, <span class="math inline">\(d^{rs}\)</span>. The relatively simplified gravity model specification is given by: <span class="math inline">\(z^{rs}_{i} = \frac{x^{r \cdot}_{i}x^{\cdot s}_{i}} {x^{\cdot \cdot}_{i}} Q^{rs}_{i}\)</span> where <span class="math inline">\(x^{r \cdot}_{i}\)</span> is the “supply pool” of good <span class="math inline">\(i\)</span> in region <span class="math inline">\(r\)</span>, <span class="math inline">\(x^{\cdot s}_{i}\)</span> is the “demand pool” of good <span class="math inline">\(i\)</span> in region <span class="math inline">\(s\)</span>, <span class="math inline">\(x^{\cdot \cdot}_{i}\)</span> is the total production of commodity <span class="math inline">\(i\)</span> in the system and <span class="math inline">\(Q^{rs}_{i}\)</span> is a parameter to be estimated. In practice the interregional flows per industry <span class="math inline">\(i\)</span> are given by <span class="math inline">\([\mathbf{{x'}}_{i}\mathbf{x}_{i}](\mathbf{x}_{i}\mathbf{i})^{-1} \odot \mathbf{Q}\)</span>, where <span class="math inline">\(\mathbf{Q} = (\mathbf{d \odot d})^{-1}\)</span> and <span class="math inline">\(\mathbf{d}\)</span> is the great-circle distance matrix derived from longitude and latitude vector pairs from region centroid. This approach may be feasible given the available data, too, (again with harsh simplifying assumptions).</p></li>
</ul>
<p><em>Assumptions and Caveats</em></p>
<p>Note that strictly speaking, the <span class="math inline">\(x^{r}_{j}\)</span> terms throughout are specified as gross outputs of each sector in the region. In practice, however, these outputs are approximated through the use of employment, payroll, or number of establishments data, and they are not technically equivalent substitutes. Furthermore, the “supply pool” and “demand pool” total outputs called for in in the simple Gravity specification are even greater abstractions. First we assume <span class="math inline">\(\alpha^{r}_{ij} = 1\)</span> such that <span class="math inline">\(a^{r}_{ij} = a^{n}_{ij}\)</span>, then assuming regional industry activity is equivalent to regional gross output <span class="math inline">\(x^{r}_{j}\)</span> and regional final demand is approximated by a single region model (i.e., <span class="math inline">\(\mathbf{f^{r}} = \mathbf{(I} - \mathbf{A^{rr})x^{r}}\)</span>), which restricts by definition regional supply for good <span class="math inline">\(i\)</span> to be equivalent to regional demand for good <span class="math inline">\(i\)</span> (i.e., <span class="math inline">\(x^{r \cdot}_{i} = x^{\cdot r}_{i}\)</span>). Note in fact, no national accounting data are needed for this gravity approach, one only needs regional industry activity and the impedance function, <span class="math inline">\(Q^{rs}_{i}\)</span>, which is given by <span class="math inline">\(e^{-d^{rs}}\)</span> (or <span class="math inline">\(1/(d^{rs})^2\)</span>) where <span class="math inline">\(d^{rs}\)</span> is the great-circle distance between each region.</p>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<p>Note that given an industry-by-industry BEA total requirements matrix, <span class="math inline">\(\mathbf{L}\)</span>, we can derive an industry based technology, industry-by-industry direct requirements matrix, <span class="math inline">\(\mathbf{A}\)</span> from the accounting identity <span class="math inline">\(\mathbf{L} = (\mathbf{I} - \mathbf{A})^{-1}\)</span>. And total industry output, <span class="math inline">\(\mathbf{x}\)</span>, is also exogenously obtainable from the BEA Make/Use tables, allowing the further derivation of the transactions matrix, <span class="math inline">\(\mathbf{Z}\)</span>, from the accounting identity <span class="math inline">\(\mathbf{A} = \mathbf{Z\hat{x}^{-1}}\)</span>.</p>
<p><em>Data</em></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>Industry_Count <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>Toy_Total_mat <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fl">1.2523</span>,  <span class="fl">0.0143</span>, <span class="fl">0.0055</span>, <span class="fl">0.0276</span>, <span class="fl">0.0892</span>,</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.0251</span>,  <span class="fl">1.1230</span>, <span class="fl">0.1450</span>, <span class="fl">0.0331</span>, <span class="fl">0.0709</span>,</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.0203</span>,  <span class="fl">0.0236</span>, <span class="fl">1.0420</span>, <span class="fl">0.0128</span>, <span class="fl">0.0237</span>,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.0092</span>,  <span class="fl">0.0171</span>, <span class="fl">0.0088</span>, <span class="fl">1.0048</span>, <span class="fl">0.0105</span>,</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.4020</span>,  <span class="fl">0.2675</span>, <span class="fl">0.1055</span>, <span class="fl">0.5102</span>, <span class="fl">1.7703</span>), <span class="at">nrow =</span> Industry_Count, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Total_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Total_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="co">#kable(Toy_Total_mat, caption = "Total Requirements Table ( Leontief inverse )") </span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Total Requirements Table (Leontief inverse)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Total Requirements Table (Leontief inverse)"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>Toy_Total_mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        Extract  Fiber Grains   Hogs   Info
Extract  1.2523 0.0143 0.0055 0.0276 0.0892
Fiber    0.0251 1.1230 0.1450 0.0331 0.0709
Grains   0.0203 0.0236 1.0420 0.0128 0.0237
Hogs     0.0092 0.0171 0.0088 1.0048 0.0105
Info     0.4020 0.2675 0.1055 0.5102 1.7703</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>Toy_Direct_mat <span class="ot">&lt;-</span> <span class="fu">diag</span>(<span class="fu">ncol</span>(Toy_Total_mat)) <span class="sc">-</span> <span class="fu">solve</span>(Toy_Total_mat)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Direct_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Direct_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="co">#kable(round(Toy_Direct_mat, 4), caption = "Direct Requirements Table (input coefficients / structural matrix / national technical coefficients)") </span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Direct Requirements Table (input coefficients / structural matrix / national technical coefficients)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Direct Requirements Table (input coefficients / structural matrix / national technical coefficients)"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>Toy_Direct_mat <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        Extract  Fiber Grains   Hogs   Info
Extract  0.1883 0.0006 0.0001 0.0015 0.0409
Fiber    0.0051 0.0986 0.1219 0.0107 0.0342
Grains   0.0115 0.0173 0.0366 0.0055 0.0116
Hogs     0.0054 0.0138 0.0060 0.0016 0.0050
Info     0.1813 0.1311 0.0373 0.2855 0.4185</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>Toy_Total_Industry_Output <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">263919</span>, <span class="dv">171317</span>, <span class="dv">244999</span>, <span class="dv">708461</span>, <span class="dv">3883386</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>Toy_Transactions_mat <span class="ot">&lt;-</span> <span class="fu">round</span>(Toy_Direct_mat <span class="sc">%*%</span>  <span class="fu">diag</span>(Toy_Total_Industry_Output), <span class="dv">2</span>)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Transactions_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Interindustry Transactions Table"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Interindustry Transactions Table"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>Toy_Transactions_mat <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         Extract    Fiber   Grains      Hogs       Info
Extract 49703.25    98.89    13.13   1080.98  158693.79
Fiber    1332.82 16892.81 29855.46   7553.40  132623.40
Grains   3037.32  2955.82  8973.12   3897.20   45022.95
Hogs     1412.01  2366.61  1463.49   1098.39   19491.48
Info    47854.80 22453.50  9129.78 202242.65 1625377.67</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>Region_Count <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>Toy_Xemp_mat <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">13</span>, <span class="dv">100</span>, <span class="dv">50</span>, </span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>                          <span class="dv">400</span>, <span class="dv">34</span>,  <span class="dv">30</span>, <span class="dv">88</span>,</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>                          <span class="dv">300</span>, <span class="dv">120</span>,  <span class="dv">20</span>, <span class="dv">123</span>,</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>                          <span class="dv">200</span>, <span class="dv">200</span>,  <span class="dv">75</span>, <span class="dv">40</span>,</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>                          <span class="dv">100</span>, <span class="dv">10</span>,  <span class="dv">400</span>, <span class="dv">4</span>), <span class="at">nrow =</span> Industry_Count, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Xemp_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Xemp_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a><span class="co">#kable(Toy_Xemp_mat, caption = "Regional Industry-Employment Table") </span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regional Industry-Employment Table"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Regional Industry-Employment Table"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>Toy_Xemp_mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse Brown Cook Dane
Extract     500    13  100   50
Fiber       400    34   30   88
Grains      300   120   20  123
Hogs        200   200   75   40
Info        100    10  400    4</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>Toy_Direct_mat_r <span class="ot">&lt;-</span> <span class="fu">kronecker</span>(<span class="fu">diag</span>(<span class="dv">1</span>, Region_Count), Toy_Direct_mat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><em>Location Quotients</em></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="do">############ Simple Location Quotient</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>Toy_LQ <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span>Industry_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>  Toy_LQ[i,j] <span class="ot">&lt;-</span>((Toy_Xemp_mat[i,j])<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat[,j]))<span class="sc">/</span>(<span class="fu">sum</span>(Toy_Xemp_mat[i,])<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat))</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_LQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_LQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Simple Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Simple Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(Toy_LQ, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse  Brown   Cook   Dane
Extract  1.4113 0.1460 0.6774 0.6941
Fiber    1.3560 0.4586 0.2441 1.4672
Grains   0.9972 1.5870 0.1595 2.0107
Hogs     0.7267 2.8915 0.6541 0.7148
Info     0.3641 0.1449 3.4951 0.0716</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>Toy_LQc <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Industry_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_LQ[i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>   Toy_LQc[i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>   Toy_LQc[i,j] <span class="ot">&lt;-</span> Toy_LQ[i,j]</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_LQc) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_LQc) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a><span class="co">#round(Toy_LQc,  4)</span></span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_LQc)){</span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_LQ[[i]] <span class="ot">&lt;-</span> (<span class="fu">diag</span>(Toy_LQc[,i]) <span class="sc">%*%</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Dir_LQ[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb76-22"><a href="#cb76-22" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_LQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb76-23"><a href="#cb76-23" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regionial Direct Requirement Coeffecients from Simple Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Regionial Direct Requirement Coeffecients from Simple Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$AllElse
        Extract  Fiber Grains   Hogs   Info
Extract  0.1883 0.0006 0.0001 0.0015 0.0409
Fiber    0.0051 0.0986 0.1219 0.0107 0.0342
Grains   0.0115 0.0172 0.0365 0.0055 0.0116
Hogs     0.0039 0.0100 0.0043 0.0011 0.0036
Info     0.0660 0.0477 0.0136 0.1039 0.1524

$Brown
        Extract  Fiber Grains   Hogs   Info
Extract  0.0275 0.0001 0.0000 0.0002 0.0060
Fiber    0.0023 0.0452 0.0559 0.0049 0.0157
Grains   0.0115 0.0173 0.0366 0.0055 0.0116
Hogs     0.0054 0.0138 0.0060 0.0016 0.0050
Info     0.0263 0.0190 0.0054 0.0414 0.0606

$Cook
        Extract  Fiber Grains   Hogs   Info
Extract  0.1276 0.0004 0.0000 0.0010 0.0277
Fiber    0.0012 0.0241 0.0297 0.0026 0.0083
Grains   0.0018 0.0028 0.0058 0.0009 0.0018
Hogs     0.0035 0.0090 0.0039 0.0010 0.0033
Info     0.1813 0.1311 0.0373 0.2855 0.4185

$Dane
        Extract  Fiber Grains   Hogs   Info
Extract  0.1307 0.0004 0.0000 0.0011 0.0284
Fiber    0.0051 0.0986 0.1219 0.0107 0.0342
Grains   0.0115 0.0173 0.0366 0.0055 0.0116
Hogs     0.0038 0.0099 0.0043 0.0011 0.0036
Info     0.0130 0.0094 0.0027 0.0204 0.0300</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="do">############ Cross-Industry Location Quotient</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="co">#This allows for differing modifiers within a given row of the national matrix; that is, it allows for differing cell-by-cell adjustments within An rather than uniform adjustments along each row.</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>Toy_CLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>  Toy_CLQ[[i]] <span class="ot">&lt;-</span> (Toy_LQ[,i] <span class="sc">%*%</span> <span class="fu">t</span>(<span class="dv">1</span><span class="sc">/</span>Toy_LQ[,i])) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_CLQ[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_CLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a> <span class="fu">print</span>(<span class="st">"Cross-Industry Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Cross-Industry Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a> Toy_CLQ</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$AllElse
        Extract  Fiber Grains   Hogs   Info
Extract  1.0000 1.0407 1.4153 1.9419 3.8763
Fiber    0.9609 1.0000 1.3599 1.8659 3.7246
Grains   0.7066 0.7353 1.0000 1.3721 2.7389
Hogs     0.5150 0.5359 0.7288 1.0000 1.9961
Info     0.2580 0.2685 0.3651 0.5010 1.0000

$Brown
        Extract  Fiber Grains   Hogs    Info
Extract  1.0000 0.3183 0.0920 0.0505  1.0078
Fiber    3.1413 1.0000 0.2890 0.1586  3.1659
Grains  10.8703 3.4605 1.0000 0.5488 10.9556
Hogs    19.8058 6.3050 1.8220 1.0000 19.9612
Info     0.9922 0.3159 0.0913 0.0501  1.0000

$Cook
        Extract   Fiber  Grains   Hogs   Info
Extract  1.0000  2.7753  4.2459 1.0357 0.1938
Fiber    0.3603  1.0000  1.5299 0.3732 0.0698
Grains   0.2355  0.6536  1.0000 0.2439 0.0456
Hogs     0.9655  2.6796  4.0995 1.0000 0.1871
Info     5.1595 14.3191 21.9066 5.3437 1.0000

$Dane
        Extract  Fiber Grains   Hogs    Info
Extract  1.0000 0.4731 0.3452 0.9710  9.6908
Fiber    2.1139 1.0000 0.7297 2.0525 20.4855
Grains   2.8969 1.3704 1.0000 2.8128 28.0737
Hogs     1.0299 0.4872 0.3555 1.0000  9.9806
Info     0.1032 0.0488 0.0356 0.1002  1.0000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>Toy_CLQc <span class="ot">&lt;-</span> Toy_CLQ</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_CLQc)){</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_CLQc[[r]])){</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_CLQc[[r]])){</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_CLQc[[r]][i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>   Toy_CLQc[[r]][i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>   Toy_CLQc[[r]][i,j] <span class="ot">&lt;-</span> Toy_CLQc[[r]][i,j]</span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb84-13"><a href="#cb84-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb84-14"><a href="#cb84-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-15"><a href="#cb84-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-16"><a href="#cb84-16" aria-hidden="true" tabindex="-1"></a>Toy_Dir_CLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb84-17"><a href="#cb84-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_CLQc)){</span>
<span id="cb84-18"><a href="#cb84-18" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_CLQ[[i]] <span class="ot">&lt;-</span> (Toy_CLQc[[i]] <span class="sc">*</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb84-19"><a href="#cb84-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb84-20"><a href="#cb84-20" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_CLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb84-21"><a href="#cb84-21" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regionial Direct Requirement Coeffecients from Cross-Industry Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Regionial Direct Requirement Coeffecients from Cross-Industry Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>Toy_Dir_CLQ</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$AllElse
        Extract  Fiber Grains   Hogs   Info
Extract  0.1883 0.0006 0.0001 0.0015 0.0409
Fiber    0.0049 0.0986 0.1219 0.0107 0.0342
Grains   0.0081 0.0127 0.0366 0.0055 0.0116
Hogs     0.0028 0.0074 0.0044 0.0016 0.0050
Info     0.0468 0.0352 0.0136 0.1430 0.4185

$Brown
        Extract  Fiber Grains   Hogs   Info
Extract  0.1883 0.0002 0.0000 0.0001 0.0409
Fiber    0.0051 0.0986 0.0352 0.0017 0.0342
Grains   0.0115 0.0173 0.0366 0.0030 0.0116
Hogs     0.0054 0.0138 0.0060 0.0016 0.0050
Info     0.1799 0.0414 0.0034 0.0143 0.4185

$Cook
        Extract  Fiber Grains   Hogs   Info
Extract  0.1883 0.0006 0.0001 0.0015 0.0079
Fiber    0.0018 0.0986 0.1219 0.0040 0.0024
Grains   0.0027 0.0113 0.0366 0.0013 0.0005
Hogs     0.0052 0.0138 0.0060 0.0016 0.0009
Info     0.1813 0.1311 0.0373 0.2855 0.4185

$Dane
        Extract  Fiber Grains   Hogs   Info
Extract  0.1883 0.0003 0.0000 0.0015 0.0409
Fiber    0.0051 0.0986 0.0889 0.0107 0.0342
Grains   0.0115 0.0173 0.0366 0.0055 0.0116
Hogs     0.0054 0.0067 0.0021 0.0016 0.0050
Info     0.0187 0.0064 0.0013 0.0286 0.4185</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="do">############ Semilogarithmic Location Quotient</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>Toy_SLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  Toy_SLQ[[i]] <span class="ot">&lt;-</span> (Toy_LQ[,i] <span class="sc">%*%</span> <span class="fu">t</span>(<span class="dv">1</span><span class="sc">/</span>(<span class="fu">log2</span>(<span class="dv">1</span> <span class="sc">+</span> Toy_LQ[,i])))) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_SLQ[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_SLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Semilogarithmic Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Semilogarithmic Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>Toy_SLQ</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$AllElse
        Extract  Fiber Grains   Hogs   Info
Extract  1.1114 1.1415 1.4142 1.7908 3.1507
Fiber    1.0679 1.0968 1.3588 1.7208 3.0274
Grains   0.7853 0.8065 0.9992 1.2654 2.2262
Hogs     0.5723 0.5878 0.7282 0.9222 1.6225
Info     0.2867 0.2945 0.3648 0.4620 0.8128

$Brown
        Extract  Fiber Grains   Hogs    Info
Extract  0.7426 0.2681 0.1065 0.0745  0.7480
Fiber    2.3327 0.8421 0.3344 0.2339  2.3498
Grains   8.0723 2.9141 1.1573 0.8096  8.1315
Hogs    14.7077 5.3095 2.1086 1.4750 14.8156
Info     0.7368 0.2660 0.1056 0.0739  0.7422

$Cook
        Extract   Fiber  Grains   Hogs   Info
Extract  0.9078  2.1499  3.1720 0.9331 0.3124
Fiber    0.3271  0.7747  1.1429 0.3362 0.1126
Grains   0.2138  0.5064  0.7471 0.2198 0.0736
Hogs     0.8765  2.0758  3.0627 0.9009 0.3016
Info     4.6837 11.0925 16.3659 4.8141 1.6119

$Dane
        Extract  Fiber Grains   Hogs    Info
Extract  0.9127 0.5327 0.4365 0.8920  6.9549
Fiber    1.9293 1.1261 0.9227 1.8857 14.7021
Grains   2.6439 1.5433 1.2645 2.5842 20.1480
Hogs     0.9399 0.5486 0.4495 0.9187  7.1629
Info     0.0942 0.0550 0.0450 0.0921  0.7177</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>Toy_SLQc <span class="ot">&lt;-</span> Toy_SLQ</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_SLQc)){</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_SLQc[[r]])){</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_SLQc[[r]])){</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_SLQc[[r]][i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>   Toy_SLQc[[r]][i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>   Toy_SLQc[[r]][i,j] <span class="ot">&lt;-</span> Toy_SLQc[[r]][i,j]</span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-16"><a href="#cb92-16" aria-hidden="true" tabindex="-1"></a>Toy_Dir_SLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb92-17"><a href="#cb92-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_SLQc)){</span>
<span id="cb92-18"><a href="#cb92-18" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_SLQ[[i]] <span class="ot">&lt;-</span> (Toy_SLQc[[i]] <span class="sc">*</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb92-19"><a href="#cb92-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb92-20"><a href="#cb92-20" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_SLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb92-21"><a href="#cb92-21" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regionial Direct Requirement Coeffecients from Semilogarithmic Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Regionial Direct Requirement Coeffecients from Semilogarithmic Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>Toy_Dir_SLQ</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$AllElse
        Extract  Fiber Grains   Hogs   Info
Extract  0.1883 0.0006 0.0001 0.0015 0.0409
Fiber    0.0051 0.0986 0.1219 0.0107 0.0342
Grains   0.0090 0.0139 0.0366 0.0055 0.0116
Hogs     0.0031 0.0081 0.0043 0.0014 0.0050
Info     0.0520 0.0386 0.0136 0.1319 0.3402

$Brown
        Extract  Fiber Grains   Hogs   Info
Extract  0.1399 0.0002 0.0000 0.0001 0.0306
Fiber    0.0051 0.0830 0.0407 0.0025 0.0342
Grains   0.0115 0.0173 0.0366 0.0045 0.0116
Hogs     0.0054 0.0138 0.0060 0.0016 0.0050
Info     0.1336 0.0349 0.0039 0.0211 0.3106

$Cook
        Extract  Fiber Grains   Hogs   Info
Extract  0.1710 0.0006 0.0001 0.0014 0.0128
Fiber    0.0017 0.0764 0.1219 0.0036 0.0038
Grains   0.0025 0.0087 0.0274 0.0012 0.0009
Hogs     0.0047 0.0138 0.0060 0.0014 0.0015
Info     0.1813 0.1311 0.0373 0.2855 0.4185

$Dane
        Extract  Fiber Grains   Hogs   Info
Extract  0.1719 0.0003 0.0000 0.0014 0.0409
Fiber    0.0051 0.0986 0.1124 0.0107 0.0342
Grains   0.0115 0.0173 0.0366 0.0055 0.0116
Hogs     0.0050 0.0076 0.0027 0.0014 0.0050
Info     0.0171 0.0072 0.0017 0.0263 0.3004</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="do">############ Flegg Location Quotient</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>Toy_FLQ_delta <span class="ot">&lt;-</span> .<span class="dv">3</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>Toy_lambda <span class="ot">&lt;-</span> (<span class="fu">log2</span>(<span class="dv">1</span> <span class="sc">+</span> (<span class="fu">colSums</span>(Toy_Xemp_mat)<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat))))<span class="sc">^</span>(Toy_FLQ_delta)</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>Toy_FLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>  Toy_FLQ[[i]] <span class="ot">&lt;-</span> ((Toy_LQ[,i] <span class="sc">%*%</span> <span class="fu">t</span>(<span class="dv">1</span><span class="sc">/</span>Toy_LQ[,i])) <span class="sc">*</span> Toy_lambda[i]) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_FLQ[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_FLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Flegg Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Flegg Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>Toy_FLQ </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$AllElse
        Extract  Fiber Grains   Hogs   Info
Extract  0.8654 0.9007 1.2248 1.6806 3.3546
Fiber    0.8315 0.8654 1.1769 1.6148 3.2234
Grains   0.6115 0.6364 0.8654 1.1874 2.3703
Hogs     0.4456 0.4638 0.6307 0.8654 1.7275
Info     0.2233 0.2323 0.3160 0.4335 0.8654

$Brown
        Extract  Fiber Grains   Hogs    Info
Extract  0.5996 0.1909 0.0552 0.0303  0.6043
Fiber    1.8836 0.5996 0.1733 0.0951  1.8984
Grains   6.5182 2.0750 0.5996 0.3291  6.5693
Hogs    11.8762 3.7807 1.0925 0.5996 11.9694
Info     0.5950 0.1894 0.0547 0.0300  0.5996

$Cook
        Extract  Fiber  Grains   Hogs   Info
Extract  0.6898 1.9144  2.9288 0.7144 0.1337
Fiber    0.2486 0.6898  1.0553 0.2574 0.0482
Grains   0.1625 0.4509  0.6898 0.1683 0.0315
Hogs     0.6660 1.8484  2.8279 0.6898 0.1291
Info     3.5591 9.8774 15.1114 3.6861 0.6898

$Dane
        Extract  Fiber Grains   Hogs    Info
Extract  0.5647 0.2671 0.1949 0.5483  5.4721
Fiber    1.1937 0.5647 0.4120 1.1590 11.5675
Grains   1.6358 0.7738 0.5647 1.5883 15.8523
Hogs     0.5816 0.2751 0.2007 0.5647  5.6357
Info     0.0583 0.0276 0.0201 0.0566  0.5647</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>Toy_FLQc <span class="ot">&lt;-</span> Toy_FLQ</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_FLQc)){</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_FLQc[[r]])){</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_FLQc[[r]])){</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_FLQc[[r]][i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>   Toy_FLQc[[r]][i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>   Toy_FLQc[[r]][i,j] <span class="ot">&lt;-</span> Toy_FLQc[[r]][i,j]</span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a>Toy_Dir_FLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_FLQc)){</span>
<span id="cb100-18"><a href="#cb100-18" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_FLQ[[i]] <span class="ot">&lt;-</span> (Toy_FLQc[[i]] <span class="sc">*</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb100-19"><a href="#cb100-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb100-20"><a href="#cb100-20" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_FLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb100-21"><a href="#cb100-21" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regionial Direct Requirement Coeffecients from Flegg Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Regionial Direct Requirement Coeffecients from Flegg Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>Toy_Dir_FLQ</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$AllElse
        Extract  Fiber Grains   Hogs   Info
Extract  0.1630 0.0005 0.0001 0.0015 0.0409
Fiber    0.0042 0.0853 0.1219 0.0107 0.0342
Grains   0.0070 0.0110 0.0317 0.0055 0.0116
Hogs     0.0024 0.0064 0.0038 0.0013 0.0050
Info     0.0405 0.0304 0.0118 0.1238 0.3622

$Brown
        Extract  Fiber Grains   Hogs   Info
Extract  0.1129 0.0001 0.0000 0.0000 0.0247
Fiber    0.0051 0.0591 0.0211 0.0010 0.0342
Grains   0.0115 0.0173 0.0220 0.0018 0.0116
Hogs     0.0054 0.0138 0.0060 0.0009 0.0050
Info     0.1079 0.0248 0.0020 0.0086 0.2510

$Cook
        Extract  Fiber Grains   Hogs   Info
Extract  0.1299 0.0006 0.0001 0.0011 0.0055
Fiber    0.0013 0.0680 0.1219 0.0027 0.0016
Grains   0.0019 0.0078 0.0253 0.0009 0.0004
Hogs     0.0036 0.0138 0.0060 0.0011 0.0006
Info     0.1813 0.1311 0.0373 0.2855 0.2887

$Dane
        Extract  Fiber Grains   Hogs   Info
Extract  0.1063 0.0002 0.0000 0.0008 0.0409
Fiber    0.0051 0.0557 0.0502 0.0107 0.0342
Grains   0.0115 0.0134 0.0207 0.0055 0.0116
Hogs     0.0031 0.0038 0.0012 0.0009 0.0050
Info     0.0106 0.0036 0.0007 0.0162 0.2364</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="do">############ Augmented Flegg Location Quotient</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>Toy_LQa <span class="ot">&lt;-</span> Toy_LQ</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_LQa)){</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_LQa)){</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_LQ[i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>  Toy_LQa[i,j] <span class="ot">&lt;-</span> <span class="fu">log2</span>(<span class="dv">1</span> <span class="sc">+</span> Toy_LQ[i,j])</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span>{</span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>  Toy_LQa[i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a>Toy_AFLQ <span class="ot">&lt;-</span> Toy_FLQ</span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_FLQ)){</span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a>  Toy_AFLQ[[r]] <span class="ot">&lt;-</span> (Toy_FLQ[[r]] <span class="sc">%*%</span> <span class="fu">diag</span>(Toy_LQa[,r])) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb104-18"><a href="#cb104-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(Toy_AFLQ[[r]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb104-19"><a href="#cb104-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb104-20"><a href="#cb104-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-21"><a href="#cb104-21" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Augmented Flegg Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Augmented Flegg Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>Toy_AFLQ </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$AllElse
        Extract  Fiber Grains   Hogs   Info
Extract  1.0989 1.1136 1.2248 1.6806 3.3546
Fiber    1.0558 1.0699 1.1769 1.6148 3.2234
Grains   0.7765 0.7868 0.8654 1.1874 2.3703
Hogs     0.5658 0.5734 0.6307 0.8654 1.7275
Info     0.2835 0.2872 0.3160 0.4335 0.8654

$Brown
        Extract  Fiber Grains   Hogs    Info
Extract  0.5996 0.1909 0.0757 0.0594  0.6043
Fiber    1.8836 0.5996 0.2376 0.1864  1.8984
Grains   6.5182 2.0750 0.8222 0.6451  6.5693
Hogs    11.8762 3.7807 1.4981 1.1754 11.9694
Info     0.5950 0.1894 0.0750 0.0588  0.5996

$Cook
        Extract  Fiber  Grains   Hogs   Info
Extract  0.6898 1.9144  2.9288 0.7144 0.2899
Fiber    0.2486 0.6898  1.0553 0.2574 0.1045
Grains   0.1625 0.4509  0.6898 0.1683 0.0683
Hogs     0.6660 1.8484  2.8279 0.6898 0.2799
Info     3.5591 9.8774 15.1114 3.6861 1.4957

$Dane
        Extract  Fiber Grains   Hogs    Info
Extract  0.5647 0.3480 0.3099 0.5483  5.4721
Fiber    1.1937 0.7357 0.6551 1.1590 11.5675
Grains   1.6358 1.0082 0.8979 1.5883 15.8523
Hogs     0.5816 0.3584 0.3191 0.5647  5.6357
Info     0.0583 0.0360 0.0320 0.0566  0.5647</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>Toy_Dir_AFLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_AFLQ)){</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_AFLQ[[i]] <span class="ot">&lt;-</span> (Toy_AFLQ[[i]] <span class="sc">*</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_AFLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regionial Direct Requirement Coeffecients from Augmented Flegg Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Regionial Direct Requirement Coeffecients from Augmented Flegg Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>Toy_Dir_AFLQ</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$AllElse
        Extract  Fiber Grains   Hogs   Info
Extract  0.2070 0.0006 0.0001 0.0026 0.1371
Fiber    0.0053 0.1055 0.1434 0.0172 0.1101
Grains   0.0089 0.0136 0.0317 0.0065 0.0275
Hogs     0.0030 0.0079 0.0038 0.0013 0.0087
Info     0.0514 0.0376 0.0118 0.1238 0.3622

$Brown
        Extract  Fiber Grains   Hogs   Info
Extract  0.1129 0.0001 0.0000 0.0001 0.0247
Fiber    0.0095 0.0591 0.0290 0.0020 0.0648
Grains   0.0750 0.0358 0.0301 0.0035 0.0762
Hogs     0.0635 0.0522 0.0089 0.0018 0.0601
Info     0.1079 0.0248 0.0028 0.0168 0.2510

$Cook
        Extract  Fiber Grains   Hogs   Info
Extract  0.1299 0.0011 0.0002 0.0011 0.0118
Fiber    0.0013 0.0680 0.1286 0.0027 0.0036
Grains   0.0019 0.0078 0.0253 0.0009 0.0008
Hogs     0.0036 0.0255 0.0169 0.0011 0.0014
Info     0.6453 1.2946 0.5631 1.0523 0.6260

$Dane
        Extract  Fiber Grains   Hogs   Info
Extract  0.1063 0.0002 0.0000 0.0008 0.2236
Fiber    0.0060 0.0725 0.0798 0.0124 0.3950
Grains   0.0188 0.0174 0.0329 0.0087 0.1838
Hogs     0.0031 0.0050 0.0019 0.0009 0.0283
Info     0.0106 0.0047 0.0012 0.0162 0.2364</code></pre>
</div>
</div>
<p>Each Location Quotient is a different estimate of the regional supply proportion of good <span class="math inline">\(i\)</span>. Using a Location Quotient in conjunction with the national-level Direct Requirements matrix, one can estimate an <em>intra</em>regional Direct Requirements (input/ technical coefficients) matrix.</p>
<p><em>Reprise</em></p>
<p>However, to get back to the central question: How similar are the inputs of Chicago to the outputs of Madison? we may only need to look as far as the Location Quotients themselves. We have established that if <span class="math inline">\(LQ_{i}^{r} &gt; 1\)</span>, then industry <span class="math inline">\(i\)</span> is concentrated in region <span class="math inline">\(r\)</span> relative to the nation. As such we can expect all demand of good <span class="math inline">\(i\)</span> to be satisfied regionally and regional surplus will be exported to other less concentrated regions. Similarly, if <span class="math inline">\(LQ_{i}^{r} &lt; 1\)</span>, then industry <span class="math inline">\(i\)</span> is less concentrated in region <span class="math inline">\(r\)</span> relative to the nation. Thus if we look for industries in Madison where <span class="math inline">\(LQ_{i}^{r} &gt; 1\)</span>, <strong>and</strong> in Chicago where <span class="math inline">\(LQ_{i}^{r} &lt; 1\)</span>, we may use this matching to address the central question.</p>
<p>For example, the Fiber and Grains simple LQ for Dane County (i.e., Madison) are both greater than 1. Similarly, only the Fiber simple LQ for Brown County (i.e., Green Bay), and only the Grain simple LQ for All Else is less than 1, making either only a partial partner. However, the Fiber and Grains simple LQ for Cook County (i.e., Chicago) are both less than 1, implying it is the strongest sink and best matched for using goods for which Madison is concentrated.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>Toy_export <span class="ot">&lt;-</span> Toy_CLQ<span class="sc">$</span>Dane</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>Toy_import <span class="ot">&lt;-</span> Toy_CLQ<span class="sc">$</span>Cook</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_export[i,j] <span class="sc">&lt;</span> <span class="dv">1</span>){</span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>   Toy_export[i,j] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>   Toy_export[i,j] <span class="ot">&lt;-</span> Toy_export[i,j]</span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb112-14"><a href="#cb112-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-15"><a href="#cb112-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb112-16"><a href="#cb112-16" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb112-17"><a href="#cb112-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_import[i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb112-18"><a href="#cb112-18" aria-hidden="true" tabindex="-1"></a>   Toy_import[i,j] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb112-19"><a href="#cb112-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-20"><a href="#cb112-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb112-21"><a href="#cb112-21" aria-hidden="true" tabindex="-1"></a>   Toy_import[i,j] <span class="ot">&lt;-</span> Toy_import[i,j]</span>
<span id="cb112-22"><a href="#cb112-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-23"><a href="#cb112-23" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb112-24"><a href="#cb112-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb112-25"><a href="#cb112-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-26"><a href="#cb112-26" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Sub-industry CLQ Import/Export Compatibility - Madison as Exporter, Chicago as Importer"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-industry CLQ Import/Export Compatibility - Madison as Exporter, Chicago as Importer"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>(Toy_export<span class="sc">/</span>Toy_import) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        Extract  Fiber Grains    Hogs     Info
Extract  1.0000    NaN    NaN     NaN  50.0041
Fiber    5.8671 1.0000    NaN  5.4997 293.4885
Grains  12.3011 2.0967      1 11.5326 615.6513
Hogs     1.0667    NaN    NaN  1.0000  53.3437
Info        NaN    NaN    NaN     NaN   1.0000</code></pre>
</div>
</div>
<p>Similarly, for the other sub-industry location quotients, if sector <span class="math inline">\(i\)</span> at the region-level is relatively smaller than sector <span class="math inline">\(j\)</span> at the region-level (i.e, <span class="math inline">\(CLQ^{r}_{ij} &lt;1\)</span>), then some of <span class="math inline">\(j\)</span>’s need for <span class="math inline">\(i\)</span> in <span class="math inline">\(r\)</span> will need to be imported.</p>
<p>One can divide two sub-industry location quotients, an export region by an import region, and derive the following relationships:</p>
<p>NaN -&gt; Exp &lt; 1 &amp; Imp &gt; 1</p>
<p>Inf -&gt; Exp &gt;1 &amp; Imp &gt; 1</p>
<p>0.0 -&gt; Exp &lt; 1 &amp; Imp &lt; 1</p>
<p>‘##’ -&gt; Exp &gt; 1 &amp; Imp &lt; 1</p>
<p>In this example, Chicago will need to import: Extract, Fiber, Grains, and Hog commodities for the Info sector, Fiber for the Extract sector, Fiber and Grains for the Hogs sector, Nothing for the Grains sector, Grains for the Fiber sector, and finally Fiber, Grains, and Hogs for the Extract sector. While Madison will export its excess in the exact same categories!</p>
<p><em>MAPE</em></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co">#MAPE</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="fu">local</span>({ </span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  MAT <span class="ot">&lt;-</span> <span class="fu">bdiag</span>(Toy_Dir_LQ)</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>  Toy_MAPE_mat  <span class="ot">&lt;&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="fu">length</span>(Toy_LQ), <span class="at">by =</span> <span class="dv">5</span> )){</span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="fu">length</span>(Toy_LQ), <span class="at">by =</span> <span class="dv">5</span> )){</span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a>  Toy_MAPE_mat <span class="ot">&lt;&lt;-</span> <span class="fu">c</span>(Toy_MAPE_mat, <span class="fu">mean</span>((<span class="fu">abs</span>(<span class="fu">c</span>(MAT[j<span class="sc">:</span>j<span class="sc">+</span>n,j<span class="sc">:</span>j<span class="sc">+</span>n]) <span class="sc">-</span> <span class="fu">c</span>(MAT[i<span class="sc">:</span>i<span class="sc">+</span>n,i<span class="sc">:</span>i<span class="sc">+</span>n]))<span class="sc">/</span><span class="fu">c</span>(MAT[i<span class="sc">:</span>i<span class="sc">+</span>n,i<span class="sc">:</span>i<span class="sc">+</span>n]))<span class="sc">*</span><span class="dv">100</span>))</span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a>  Toy_MAPE_mat <span class="ot">&lt;&lt;-</span> <span class="fu">matrix</span>(Toy_MAPE_mat, <span class="at">nrow =</span> n, <span class="at">byrow =</span> <span class="cn">FALSE</span>)</span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a>}) </span>
<span id="cb116-14"><a href="#cb116-14" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_MAPE_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb116-15"><a href="#cb116-15" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_MAPE_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb116-16"><a href="#cb116-16" aria-hidden="true" tabindex="-1"></a>Toy_MAPE_mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          AllElse     Brown     Cook Dane
AllElse   0.00000 151.48515 63.58423  408
Brown    60.23622   0.00000 85.51971  102
Cook    174.60630 590.59406  0.00000 1295
Dane     80.31496  50.49505 92.83154    0</code></pre>
</div>
</div>
<p>Alternatively, we can ask the question: Are the inter-industry flows of Chicago similar to the inter-industry flows of Madison? Or in other words do they have congruent intraregional economic activity? To answer this we can compare the estimated regional level Direct Requirements (technical coefficients) through the application of Mean Absolute Percent Error. Let <span class="math inline">\(\text{MAPE} = \left(\sum_{i=1}^{n}\sum_{j=1}^{n}\frac{|a_{ij} - \tilde{a}_{ij}|}{a_{ij}}\right) \times 100\)</span>.</p>
<p>For example, using the regional Direct Requirements matrix derived from the simple location quotient procedure, we can see that among the possible matches, the inter-industry flows of Madison are most similar to Green Bay, with Chicago and Madison displaying the most incongruent intraregional economic activity. In this case more incongruity points toward more gains from trade.</p>
<p><em>Gravity</em></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>Toy_Lat <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">42.3</span>, <span class="fl">44.49</span>, <span class="fl">41.84</span>, <span class="fl">43.07</span>)</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>Toy_Lon <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">89.04</span>, <span class="sc">-</span><span class="fl">88.03</span>, <span class="sc">-</span><span class="fl">87.77</span>, <span class="sc">-</span><span class="fl">89.39</span>)</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>Toy_Dist_mat <span class="ot">&lt;-</span> <span class="fu">distm</span>(<span class="fu">cbind</span>(Toy_Lon, Toy_Lat))<span class="sc">/</span><span class="dv">1000000</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Dist_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Dist_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy_Q &lt;- (1/(Toy_Dist_mat)^2)</span></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>Toy_Q <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="sc">-</span>Toy_Dist_mat)</span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>Toy_Gravity_mat <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>())</span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Xemp_mat)){</span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a>  Toy_Gravity_mat[[i]] <span class="ot">&lt;-</span> (Toy_Xemp_mat[i,] <span class="sc">%*%</span> <span class="fu">t</span>(Toy_Xemp_mat[i,])) <span class="sc">/</span> <span class="fu">sum</span>(Toy_Xemp_mat[i,]) <span class="sc">*</span> Toy_Q</span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Gravity_mat[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Gravity_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Gravity Model Formulations - Interreginal Flows by Industry"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Gravity Model Formulations - Interreginal Flows by Industry"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>Toy_Gravity_mat </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$Extract
           AllElse     Brown      Cook       Dane
AllElse 377.073906 7.5843547 67.096967 34.4544477
Brown     7.584355 0.2549020  1.459629  0.8090985
Cook     67.096967 1.4596292 15.082956  6.2312113
Dane     34.454448 0.8090985  6.231211  3.7707391

$Fiber
          AllElse     Brown      Cook      Dane
AllElse 289.85507 19.059813 19.341430 58.266965
Brown    19.05981  2.094203  1.375542  4.473259
Cook     19.34143  1.375542  1.630435  3.951672
Dane     58.26697  4.473259  3.951672 14.028986

$Grains
           AllElse     Brown      Cook      Dane
AllElse 159.857904 49.466697 9.4817668 59.887583
Brown    49.466697 25.577265 3.1733325 21.636127
Cook      9.481767  3.173332 0.7104796  3.610295
Dane     59.887583 21.636127 3.6102952 26.872114

$Hogs
         AllElse    Brown      Cook      Dane
AllElse 77.66990 60.08576 25.913761 14.193894
Brown   60.08576 77.66990 21.681871 12.819891
Cook    25.91376 21.68187 10.922330  4.813157
Dane    14.19389 12.81989  4.813157  3.106796

$Info
           AllElse      Brown       Cook       Dane
AllElse 19.4552529 1.50506649  69.237804 0.71107545
Brown    1.5050665 0.19455253   5.793081 0.06422416
Cook    69.2378044 5.79308097 311.284047 2.57201127
Dane     0.7110755 0.06422416   2.572011 0.03112840</code></pre>
</div>
</div>
<p>Similarly, the Gravity approach represents interregional interindustry transaction estimates. In this example, the “All Else” category dominates the analysis, and rightly so given that it is an aggregate residual category. Furthermore the “impedance” (distance) measure is undefinable for an aggregate “All Else” category. For illustration an arbitrary proxy location is used.</p>
<p>Ignoring “AllElse”, we may employ the Gravity approach to answer the question: Does Madison have more interregional interindustry transaction with Chicago or Green Bay?</p>
<p>In this example, Chicago is a stronger trading partner for Extraction and Info, whereas Green Bay is a stronger trading partner for Fiber, Grains, and Hogs.</p>
<p>Taking one step further and comparing the aggregate magnitudes of interregional interindustry transactions reveals that Green Bay has nearly twice as much trading value than Chicago does with Madison. Note, however, that when we employ an exponential distance decay impediance function, such that <em>intra</em>regional interindustry transactions are definable, then Madison will actually have more “pull” with itself than Greenbay for Fiber and Grains. In this case, we would estimate Madison to have interregional interindustry transactions with Chicago for Extraction and Info commodities, and only Hogs with Green Bay. And as for Grains and Fiber, interindustry transactions are mostly dominated by <em>intra</em>regional exchange.</p>
</div>
<div id="tabset-1-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-6-tab">
<p><em>A nested and hierarchical approach</em></p>
<p>We have shown that it is feasible to construct regional-level technical coefficients matrix from a national-level Leontief matrix and regional industry employment. This then brings about some possible extensions. One is the possibility of performing a multistage regionalization, whereby first or second-level administrative divisions (e.g., states) are used to establish a coarse regionalization. Then either place specific technical coefficients can be derived using the administrative division technical coefficients or the administrative division regionalization can be used as the basis for constructing interregional compatibility.</p>
<p>To derive an administrative technical coefficients matrix, we aggregate the place specific regional industry employment to the administrative level. Let <span class="math inline">\(\mathbf{X^{r}}\)</span> be the industry-by-region measures economic activity. If all <span class="math inline">\(j\)</span> regions make up the desired administrative division, then the aggregate administrative measure of economic activity is given by <span class="math inline">\(\mathbf{x^{R}} = \mathbf{X^{r}i}\)</span>, i.e., the row sums of the industry-by-region economic activity matrix. The administrative division Direct Requirements (technical coefficients) matrix can then be derived using a Location Quotient approach.</p>
<p>The simple administrative division location quotient is given by:</p>
<p><span class="math display">\[LQ^{R}_{i} = \left( \frac{x^{R}_{i} / x^{R}} {x^{n}_{i} / x^{n}} \right) = \left( \frac{(\mathbf{X^{r}i})_{i}  / \mathbf{iX^{r}i}} {x^{n}_{i} / x^{n}} \right) \]</span> And the administrative Direct Requirements (technical coefficients) matrix is generated by: <span class="math display">\[
a^{R}_{ij} = \left\{
\begin{align*}
(LQ^{R}_{i})a^{n}_{ij} \space\space \text{if} \space\space LQ^{R}_{i} &lt; 1 \\
a^{n}_{ij} \space\space \text{if} \space\space LQ^{R}_{i} \geq 1
\end{align*}
\right\}
\]</span> From here we may iterate and derive regional technical coefficients from the administrative technical coefficients matrix using a location quotient approach.</p>
<p>The second stage simple regional division location quotient is given by:</p>
<p><span class="math display">\[\widetilde{LQ}^{r}_{i} = \left( \frac{x^{r}_{i} / x^{r}} {x^{R}_{i} / x^{R}} \right) = \left( \frac{x^{r}_{i} / x^{r}} {(\mathbf{X^{r}i})_{i}  / \mathbf{iX^{r}i}} \right)  \]</span></p>
<p>And the administrative Direct Requirements (technical coefficients) matrix is generated by: <span class="math display">\[
\widetilde{a}^{rr}_{ij} = \left\{
\begin{align*}
(\widetilde{LQ}^{r}_{i})a^{R}_{ij} \space\space \text{if} \space\space \widetilde{LQ}^{r}_{i} &lt; 1 \\
a^{R}_{ij} \space\space \text{if} \space\space \widetilde{LQ}^{r}_{i} \geq 1
\end{align*}
\right\}
\]</span></p>
<p>We can then examine what, if any, functional differences exist between a deriving regional coefficients directly from the national level or from a two stage, national to administrative division to regional approach. Note, under the simple LQ approach, whenever <span class="math inline">\(LQ \geq 1 \vdash a^{n}_{ij} = a^{rr}_{ij} = a^{R}_{ij} = \widetilde{a}^{rr}_{ij}\)</span>.</p>
<p>Combining steps, we can specify the Administrative Direct Requirements directly from the National Direct Requirements as: <span class="math display">\[
\widetilde{a}^{rr}_{ij} = \left\{
\begin{align*}
(LQ^{r}_{i})a^{n}_{ij} \space\space \text{if} \space\space \widetilde{LQ}^{r}_{i} &lt; 1 \text{ } \&amp; \text{ } LQ^{R}_{i} &lt; 1 \\
(\widetilde{LQ}^{r}_{i})a^{n}_{ij} \space\space \text{if} \space\space \widetilde{LQ}^{r}_{i} &lt; 1 \text{ } \&amp; \text{ } LQ^{R}_{i} \geq 1 \\
(LQ^{R}_{i})a^{n}_{ij} \space\space  \text{if} \space\space \widetilde{LQ}^{r}_{i} \geq 1 \text{ } \&amp; \text{ } LQ^{R}_{i} &lt; 1 \\
a^{n}_{ij} \space\space \text{if} \space\space \widetilde{LQ}^{r}_{i} \geq 1 \text{ } \&amp; \text{ } LQ^{R}_{i} \geq 1
\end{align*}
\right\}
\]</span></p>
<p>Note <span class="math display">\[\widetilde{LQ}^{r}_{i} \cdot LQ^{R}_{i} = \left( \frac{x^{r}_{i} / x^{r}} {x^{R}_{i} / x^{R}} \right) \cdot \left( \frac{x^{R}_{i} / x^{R}} {x^{n}_{i} / x^{n}} \right) = \left( \frac{x^{r}_{i} / x^{r}} {x^{n}_{i} / x^{n}} \right) = LQ^{r}_{i}\]</span></p>
<p>In this example, the national-level Direct Requirements matrix is, <span class="math inline">\(a^{n}_{ij}\)</span>, is given by:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"National Direct Requirement Coeffecients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "National Direct Requirement Coeffecients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>Toy_Direct_mat <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        Extract  Fiber Grains   Hogs   Info
Extract  0.1883 0.0006 0.0001 0.0015 0.0409
Fiber    0.0051 0.0986 0.1219 0.0107 0.0342
Grains   0.0115 0.0173 0.0366 0.0055 0.0116
Hogs     0.0054 0.0138 0.0060 0.0016 0.0050
Info     0.1813 0.1311 0.0373 0.2855 0.4185</code></pre>
</div>
</div>
<p>And the intraregional Direct Requirements matrix is, <span class="math inline">\(a^{rr}_{ij} \space \forall \space r\)</span> using the simple LQ approach is is given by:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regionial Direct Requirement Coeffecients from Simple Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Regionial Direct Requirement Coeffecients from Simple Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$AllElse
        Extract  Fiber Grains   Hogs   Info
Extract  0.1883 0.0006 0.0001 0.0015 0.0409
Fiber    0.0051 0.0986 0.1219 0.0107 0.0342
Grains   0.0115 0.0172 0.0365 0.0055 0.0116
Hogs     0.0039 0.0100 0.0043 0.0011 0.0036
Info     0.0660 0.0477 0.0136 0.1039 0.1524

$Brown
        Extract  Fiber Grains   Hogs   Info
Extract  0.0275 0.0001 0.0000 0.0002 0.0060
Fiber    0.0023 0.0452 0.0559 0.0049 0.0157
Grains   0.0115 0.0173 0.0366 0.0055 0.0116
Hogs     0.0054 0.0138 0.0060 0.0016 0.0050
Info     0.0263 0.0190 0.0054 0.0414 0.0606

$Cook
        Extract  Fiber Grains   Hogs   Info
Extract  0.1276 0.0004 0.0000 0.0010 0.0277
Fiber    0.0012 0.0241 0.0297 0.0026 0.0083
Grains   0.0018 0.0028 0.0058 0.0009 0.0018
Hogs     0.0035 0.0090 0.0039 0.0010 0.0033
Info     0.1813 0.1311 0.0373 0.2855 0.4185

$Dane
        Extract  Fiber Grains   Hogs   Info
Extract  0.1307 0.0004 0.0000 0.0011 0.0284
Fiber    0.0051 0.0986 0.1219 0.0107 0.0342
Grains   0.0115 0.0173 0.0366 0.0055 0.0116
Hogs     0.0038 0.0099 0.0043 0.0011 0.0036
Info     0.0130 0.0094 0.0027 0.0204 0.0300</code></pre>
</div>
</div>
<p>Suppose <span class="math inline">\(R = \{\text{Brown, Cook, Dane}\}\)</span>, such that administrative-level Direct Requirements matrix, <span class="math inline">\(a^{R}_{ij}\)</span>, using the simple LQ approach is is given by:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>Toy_Xemp_mat_R <span class="ot">&lt;-</span> Toy_Xemp_mat[,<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>] <span class="sc">%*%</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each =</span> <span class="fu">ncol</span>(Toy_Xemp_mat[,<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]))</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Xemp_mat_R) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ADM1"</span>)</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>Toy_LQ_R <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span><span class="fu">nrow</span>(Toy_Xemp_mat_R), <span class="at">ncol =</span> <span class="fu">ncol</span>(Toy_Xemp_mat_R))</span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Xemp_mat_R)){</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_Xemp_mat_R)){</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>  Toy_LQ_R[i,j] <span class="ot">&lt;-</span>((Toy_Xemp_mat_R[i,j])<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat_R[,j]))<span class="sc">/</span>(<span class="fu">sum</span>(Toy_Xemp_mat[i,])<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat))</span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_LQ_R) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_LQ_R) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ADM1"</span>)</span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true" tabindex="-1"></a>Toy_LQc_R <span class="ot">&lt;-</span>  Toy_LQ_R</span>
<span id="cb130-15"><a href="#cb130-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Xemp_mat_R)){</span>
<span id="cb130-16"><a href="#cb130-16" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_Xemp_mat_R)){</span>
<span id="cb130-17"><a href="#cb130-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_LQ_R[i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb130-18"><a href="#cb130-18" aria-hidden="true" tabindex="-1"></a>   Toy_LQc_R[i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb130-19"><a href="#cb130-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb130-20"><a href="#cb130-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb130-21"><a href="#cb130-21" aria-hidden="true" tabindex="-1"></a>   Toy_LQc_R[i,j] <span class="ot">&lt;-</span> Toy_LQ_R[i,j]</span>
<span id="cb130-22"><a href="#cb130-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb130-23"><a href="#cb130-23" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb130-24"><a href="#cb130-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb130-25"><a href="#cb130-25" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_LQc_R) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb130-26"><a href="#cb130-26" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_LQc_R)  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ADM1"</span>)</span>
<span id="cb130-27"><a href="#cb130-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-28"><a href="#cb130-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-29"><a href="#cb130-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-30"><a href="#cb130-30" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ_R <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb130-31"><a href="#cb130-31" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_LQc_R)){</span>
<span id="cb130-32"><a href="#cb130-32" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_LQ_R[[i]] <span class="ot">&lt;-</span> (<span class="fu">diag</span>(Toy_LQc_R[,i]) <span class="sc">%*%</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb130-33"><a href="#cb130-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Dir_LQ_R[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb130-34"><a href="#cb130-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb130-35"><a href="#cb130-35" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_LQ_R) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ADM1"</span>)</span>
<span id="cb130-36"><a href="#cb130-36" aria-hidden="true" tabindex="-1"></a><span class="co">#print("Administrative Division Direct Requirement Coefficients from Simple Location Quotients")</span></span>
<span id="cb130-37"><a href="#cb130-37" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ_R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$ADM1
        Extract  Fiber Grains   Hogs   Info
Extract  0.0994 0.0003 0.0000 0.0008 0.0216
Fiber    0.0030 0.0583 0.0721 0.0063 0.0202
Grains   0.0115 0.0173 0.0366 0.0055 0.0116
Hogs     0.0054 0.0138 0.0060 0.0016 0.0050
Info     0.1813 0.1311 0.0373 0.2855 0.4185</code></pre>
</div>
</div>
<p>And administrative intraregional Direct Requirements matrix, <span class="math inline">\(\widetilde{a}^{rr}_{ij}\)</span> using the simple LQ approach is is given by:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>Toy_Xemp_mat_Rt <span class="ot">&lt;-</span> Toy_Xemp_mat[,<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>Toy_LQ_Rt <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span><span class="fu">nrow</span>(Toy_Xemp_mat_Rt), <span class="at">ncol =</span> <span class="fu">ncol</span>(Toy_Xemp_mat_Rt))</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Xemp_mat_Rt)){</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_Xemp_mat_Rt)){</span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>  Toy_LQ_Rt[i,j] <span class="ot">&lt;-</span>((Toy_Xemp_mat_Rt[i,j])<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat_Rt[,j]))<span class="sc">/</span>(<span class="fu">sum</span>(Toy_Xemp_mat_R[i,])<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat_R))</span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_LQ_Rt) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb132-11"><a href="#cb132-11" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_LQ_Rt) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb132-12"><a href="#cb132-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-13"><a href="#cb132-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-14"><a href="#cb132-14" aria-hidden="true" tabindex="-1"></a>Toy_LQc_Rt <span class="ot">&lt;-</span>  Toy_LQ_Rt</span>
<span id="cb132-15"><a href="#cb132-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Xemp_mat_Rt)){</span>
<span id="cb132-16"><a href="#cb132-16" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_Xemp_mat_Rt)){</span>
<span id="cb132-17"><a href="#cb132-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_LQ_Rt[i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb132-18"><a href="#cb132-18" aria-hidden="true" tabindex="-1"></a>   Toy_LQc_Rt[i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb132-19"><a href="#cb132-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb132-20"><a href="#cb132-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb132-21"><a href="#cb132-21" aria-hidden="true" tabindex="-1"></a>   Toy_LQc_Rt[i,j] <span class="ot">&lt;-</span> Toy_LQ_Rt[i,j]</span>
<span id="cb132-22"><a href="#cb132-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb132-23"><a href="#cb132-23" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb132-24"><a href="#cb132-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb132-25"><a href="#cb132-25" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_LQc_Rt) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb132-26"><a href="#cb132-26" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_LQc_Rt)  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb132-27"><a href="#cb132-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-28"><a href="#cb132-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-29"><a href="#cb132-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-30"><a href="#cb132-30" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ_Rt <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb132-31"><a href="#cb132-31" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_LQc_Rt)){</span>
<span id="cb132-32"><a href="#cb132-32" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_LQ_Rt[[i]] <span class="ot">&lt;-</span> (<span class="fu">diag</span>(Toy_LQc_Rt[,i]) <span class="sc">%*%</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb132-33"><a href="#cb132-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Dir_LQ_Rt[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb132-34"><a href="#cb132-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb132-35"><a href="#cb132-35" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_LQ_Rt) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb132-36"><a href="#cb132-36" aria-hidden="true" tabindex="-1"></a><span class="co">#print("Regional Direct Requirement Coefficients from Administrative Division Coefficients from Simple Location Quotients")</span></span>
<span id="cb132-37"><a href="#cb132-37" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ_Rt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$Brown
        Extract  Fiber Grains   Hogs   Info
Extract  0.0521 0.0002 0.0000 0.0004 0.0113
Fiber    0.0039 0.0765 0.0945 0.0083 0.0265
Grains   0.0115 0.0173 0.0366 0.0055 0.0116
Hogs     0.0054 0.0138 0.0060 0.0016 0.0050
Info     0.0152 0.0110 0.0031 0.0239 0.0350

$Cook
        Extract  Fiber Grains   Hogs   Info
Extract  0.1883 0.0006 0.0001 0.0015 0.0409
Fiber    0.0021 0.0407 0.0503 0.0044 0.0141
Grains   0.0018 0.0027 0.0058 0.0009 0.0018
Hogs     0.0027 0.0069 0.0030 0.0008 0.0025
Info     0.1813 0.1311 0.0373 0.2855 0.4185

$Dane
        Extract  Fiber Grains   Hogs   Info
Extract  0.1883 0.0006 0.0001 0.0015 0.0409
Fiber    0.0051 0.0986 0.1219 0.0107 0.0342
Grains   0.0115 0.0173 0.0366 0.0055 0.0116
Hogs     0.0029 0.0075 0.0033 0.0008 0.0027
Info     0.0075 0.0054 0.0015 0.0118 0.0173</code></pre>
</div>
</div>
<p><em>Reprise (Again)</em></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Simple Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Simple Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>Toy_LQ <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse  Brown   Cook   Dane
Extract  1.4113 0.1460 0.6774 0.6941
Fiber    1.3560 0.4586 0.2441 1.4672
Grains   0.9972 1.5870 0.1595 2.0107
Hogs     0.7267 2.8915 0.6541 0.7148
Info     0.3641 0.1449 3.4951 0.0716</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Administrative Division Simple Location Quotients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Administrative Division Simple Location Quotients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>Toy_LQ_Rt <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         Brown   Cook   Dane
Extract 0.2765 1.2829 1.3145
Fiber   0.7755 0.4127 2.4809
Grains  1.5818 0.1590 2.0041
Hogs    2.2012 0.4979 0.5442
Info    0.0837 2.0205 0.0414</code></pre>
</div>
</div>
<p>Remember that under the original national paradigm Madison was an exporter (i.e., <span class="math inline">\(LQ^{r}_{i} &gt; 1\)</span>) for only Fiber and Grains and Chicago was the only region that was an importer (i.e., <span class="math inline">\(LQ^{r}_{i} &lt; 1\)</span>) of <strong>both</strong> Fiber and Grains. However, under the nested hierarchical paradigm, Madison is an exporter of Fiber and Grains and Extraction (i.e., <span class="math inline">\(\widetilde{LQ}^{r}_{i} \geq 1\)</span>). Within the administrative division cluster regime, there is now no longer a region that is an importer of all three of Madison’s exports. Chicago is still an importer of Fiber and Grains, but not Extraction. Whereas Green Bay is an importer of Extract and Fiber, but not Grains.</p>
</div>
<div id="tabset-1-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-7-tab">
<p><em>Project Narrative Models</em></p>
<p>In addition to the methods established in the literature deployed to answer the question: How similar are the inputs of Chicago to the outputs of Madison? we may also adapt the Project Narrative methods, too (within the data restrictions).</p>
<p>Let the “Absolute Total Use Coefficient” be given by <span class="math inline">\(\mathbf{\alpha} = (\widehat{\mathbf{Zi}})^{-1}\mathbf{Z}\mathbf{X}^{r}\)</span> and the “Relative Total Use Coefficient” be given by <span class="math inline">\({\mathbf{\rho}} = (\widehat{\mathbf{Zi}})^{-1}\mathbf{Z}\mathbf{X}^{r}(\widehat{\mathbf{iX}^{r}})^{-1}\)</span>.</p>
<p>We may also specify “Absolute Regional Typology Coefficients” and “Relative Regional Typology Coefficients” for each commodity <span class="math inline">\(i\)</span> as <span class="math inline">\(\mathbf{\phi}_{i} =\hat{\alpha}_{i}\mathbf{i}\mathbf{i}'[\hat{\alpha}_{i}\mathbf{i}\mathbf{i}'+\hat{\alpha}'_{i}\mathbf{i}\mathbf{i}']^{-1}\)</span> and <span class="math inline">\(\mathbf{\varphi}_{i} =\hat{\rho}_{i}\mathbf{i}\mathbf{i}'[\hat{\rho}_{i}\mathbf{i}\mathbf{i}'+\hat{\rho}'_{i}\mathbf{i}\mathbf{i}']^{-1}\)</span>.</p>
<p>In addition, we may also specify “Gravity of Absolute Total Use Coefficients” and “Gravity of Relative Total Use Coefficients” for each commodity <span class="math inline">\(i\)</span> as <span class="math inline">\(\theta_{i} = [\mathbf{{\alpha'}}_{i}\mathbf{\alpha}_{i}](\mathbf{\alpha}_{i}\mathbf{i})^{-1} \odot \mathbf{Q}\)</span> and <span class="math inline">\(\vartheta_{i} = [\mathbf{{\rho'}}_{i}\mathbf{\rho}_{i}](\mathbf{\rho}_{i}\mathbf{i})^{-1} \odot \mathbf{Q}\)</span>, where <span class="math inline">\(\mathbf{Q} = e^{-\mathbf{d}}\)</span> the exponential distance decay function.</p>
Alternatively, as
<p align="center">
<span class="math inline">\(\displaystyle \alpha^{r}_{i} = \frac{\sum^{n}_{j=1} z_{ij} x^{r}_{j}} {\sum^{n}_{j=1} z_{ij}}\)</span>, <span class="math inline">\(\displaystyle \rho^{r}_{i} = \frac{\alpha^{r}_{i}} {\sum^{n}_{j=1} x^{r}_{j}}\)</span>
</p>
<p align="center">
<span class="math inline">\(\displaystyle \phi^{rs}_{i} = \frac{\alpha^{r}_{i}} {\alpha^{r}_{i} + \alpha^{s}_{i} }\)</span>, <span class="math inline">\(\displaystyle \varphi^{rs}_{i} = \frac{\rho^{r}_{i}} {\rho^{r}_{i} + \rho^{s}_{i} }\)</span>
</p>
<p align="center">
<span class="math inline">\(\displaystyle \theta^{rs}_{i} = \frac{\alpha^{r}_{i} \alpha^{s}_{i} } {\sum^{g}_{r=1} \alpha^{r}_{i}} Q^{rs}\)</span>, <span class="math inline">\(\displaystyle \vartheta^{rs}_{i} = \frac{\rho^{r}_{i} \rho^{s}_{i} } {\sum^{g}_{r=1} \rho^{r}_{i}} Q^{rs}\)</span>
</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>Toy_Alpha_mat <span class="ot">&lt;-</span> (<span class="fu">solve</span>(<span class="fu">diag</span>(<span class="fu">as.vector</span>(Toy_Transactions_mat <span class="sc">%*%</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Transactions_mat))))) <span class="sc">%*%</span> Toy_Transactions_mat <span class="sc">%*%</span> Toy_Xemp_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Alpha_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Absolute Total Use Coefficients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Absolute Total Use Coefficients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>Toy_Alpha_mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         AllElse   Brown     Cook    Dane
Extract 195.5279 11.7096 326.9819 15.1414
Fiber   165.4815 37.2428 291.3718 32.1796
Grains  167.0881 38.2934 295.4202 28.9835
Hogs    164.9321 26.6736 314.3561 22.4827
Info    125.1320 31.0339 351.8303 10.5308</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>Toy_Rho_mat <span class="ot">&lt;-</span> (<span class="fu">solve</span>(<span class="fu">diag</span>(<span class="fu">as.vector</span>(Toy_Transactions_mat <span class="sc">%*%</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Transactions_mat))))) <span class="sc">%*%</span> Toy_Transactions_mat <span class="sc">%*%</span> Toy_Xemp_mat <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">diag</span>(<span class="fu">as.vector</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">nrow</span>(Toy_Xemp_mat)) <span class="sc">%*%</span> Toy_Xemp_mat ))) ) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Rho_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Rho_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Relative Total Use Coefficients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Relative Total Use Coefficients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>Toy_Rho_mat </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse  Brown   Cook   Dane
Extract  0.1304 0.0311 0.5232 0.0496
Fiber    0.1103 0.0988 0.4662 0.1055
Grains   0.1114 0.1016 0.4727 0.0950
Hogs     0.1100 0.0708 0.5030 0.0737
Info     0.0834 0.0823 0.5629 0.0345</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_A <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>  Toy_Phi_tilde_mat  <span class="ot">&lt;-</span> <span class="fu">c</span>(Toy_Alpha_mat[i,]) <span class="sc">%*%</span>  <span class="fu">t</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Xemp_mat)))</span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>  Toy_Phi_mat_A[[i]] <span class="ot">&lt;-</span> (Toy_Phi_tilde_mat <span class="sc">/</span> (Toy_Phi_tilde_mat <span class="sc">+</span> <span class="fu">t</span>(Toy_Phi_tilde_mat))) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Phi_mat_A[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(Toy_Phi_mat_A[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb150-8"><a href="#cb150-8" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Phi_mat_A) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb150-9"><a href="#cb150-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regional Typology Coefficients - Absolute"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Regional Typology Coefficients - Absolute"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_A  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$Extract
        AllElse  Brown   Cook   Dane
AllElse  0.5000 0.9435 0.3742 0.9281
Brown    0.0565 0.5000 0.0346 0.4361
Cook     0.6258 0.9654 0.5000 0.9557
Dane     0.0719 0.5639 0.0443 0.5000

$Fiber
        AllElse  Brown   Cook   Dane
AllElse  0.5000 0.8163 0.3622 0.8372
Brown    0.1837 0.5000 0.1133 0.5365
Cook     0.6378 0.8867 0.5000 0.9005
Dane     0.1628 0.4635 0.0995 0.5000

$Grains
        AllElse  Brown   Cook   Dane
AllElse  0.5000 0.8135 0.3613 0.8522
Brown    0.1865 0.5000 0.1147 0.5692
Cook     0.6387 0.8853 0.5000 0.9107
Dane     0.1478 0.4308 0.0893 0.5000

$Hogs
        AllElse  Brown   Cook   Dane
AllElse  0.5000 0.8608 0.3441 0.8800
Brown    0.1392 0.5000 0.0782 0.5426
Cook     0.6559 0.9218 0.5000 0.9333
Dane     0.1200 0.4574 0.0667 0.5000

$Info
        AllElse  Brown   Cook   Dane
AllElse  0.5000 0.8013 0.2624 0.9224
Brown    0.1987 0.5000 0.0811 0.7466
Cook     0.7376 0.9189 0.5000 0.9709
Dane     0.0776 0.2534 0.0291 0.5000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_R <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>  Toy_Phi_tilde_mat  <span class="ot">&lt;-</span> <span class="fu">c</span>(Toy_Rho_mat[i,]) <span class="sc">%*%</span>  <span class="fu">t</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Xemp_mat)))</span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>  Toy_Phi_mat_R[[i]] <span class="ot">&lt;-</span> (Toy_Phi_tilde_mat <span class="sc">/</span> (Toy_Phi_tilde_mat <span class="sc">+</span> <span class="fu">t</span>(Toy_Phi_tilde_mat))) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Phi_mat_R[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(Toy_Phi_mat_R[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Phi_mat_R) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb154-9"><a href="#cb154-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regional Typology Coefficients - Relative"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Regional Typology Coefficients - Relative"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$Extract
        AllElse  Brown   Cook   Dane
AllElse  0.5000 0.8074 0.1995 0.7244
Brown    0.1926 0.5000 0.0561 0.3854
Cook     0.8005 0.9439 0.5000 0.9134
Dane     0.2756 0.6146 0.0866 0.5000

$Fiber
        AllElse  Brown   Cook   Dane
AllElse  0.5000 0.5275 0.1913 0.5111
Brown    0.4725 0.5000 0.1749 0.4836
Cook     0.8087 0.8251 0.5000 0.8155
Dane     0.4889 0.5164 0.1845 0.5000

$Grains
        AllElse  Brown   Cook   Dane
AllElse  0.5000 0.5230 0.1907 0.5397
Brown    0.4770 0.5000 0.1769 0.5168
Cook     0.8093 0.8231 0.5000 0.8327
Dane     0.4603 0.4832 0.1673 0.5000

$Hogs
        AllElse  Brown   Cook   Dane
AllElse  0.5000 0.6084 0.1794 0.5988
Brown    0.3916 0.5000 0.1234 0.4900
Cook     0.8206 0.8766 0.5000 0.8722
Dane     0.4012 0.5100 0.1278 0.5000

$Info
        AllElse  Brown   Cook   Dane
AllElse  0.5000 0.5033 0.1290 0.7074
Brown    0.4967 0.5000 0.1276 0.7046
Cook     0.8710 0.8724 0.5000 0.9422
Dane     0.2926 0.2954 0.0578 0.5000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>Toy_Lat <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">42.3</span>, <span class="fl">44.49</span>, <span class="fl">41.84</span>, <span class="fl">43.07</span>)</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>Toy_Lon <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">89.04</span>, <span class="sc">-</span><span class="fl">88.03</span>, <span class="sc">-</span><span class="fl">87.77</span>, <span class="sc">-</span><span class="fl">89.39</span>)</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>Toy_Dist_mat <span class="ot">&lt;-</span> <span class="fu">distm</span>(<span class="fu">cbind</span>(Toy_Lon, Toy_Lat))<span class="sc">/</span><span class="dv">1000000</span></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Dist_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Dist_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-7"><a href="#cb158-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy_Q &lt;- (1/(Toy_Dist_mat)^2)</span></span>
<span id="cb158-8"><a href="#cb158-8" aria-hidden="true" tabindex="-1"></a>Toy_Q <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="sc">-</span>Toy_Dist_mat)</span>
<span id="cb158-9"><a href="#cb158-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-10"><a href="#cb158-10" aria-hidden="true" tabindex="-1"></a>Toy_Gravity_mat_Alpha <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>())</span>
<span id="cb158-11"><a href="#cb158-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Alpha_mat)){</span>
<span id="cb158-12"><a href="#cb158-12" aria-hidden="true" tabindex="-1"></a>  Toy_Gravity_mat_Alpha[[i]] <span class="ot">&lt;-</span> ((Toy_Alpha_mat[i,] <span class="sc">%*%</span> <span class="fu">t</span>(Toy_Alpha_mat[i,])) <span class="sc">/</span> <span class="fu">sum</span>(Toy_Alpha_mat[i,]) <span class="sc">*</span> Toy_Q ) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb158-13"><a href="#cb158-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Gravity_mat_Alpha[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb158-14"><a href="#cb158-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb158-15"><a href="#cb158-15" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Gravity_mat_Alpha) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb158-16"><a href="#cb158-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-17"><a href="#cb158-17" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Gravity of Absolute Total Use Coefficients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Gravity of Absolute Total Use Coefficients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>Toy_Gravity_mat_Alpha</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$Extract
         AllElse  Brown     Cook   Dane
AllElse  69.5921 3.2241 103.5431 4.9242
Brown     3.2241 0.2496   5.1882 0.2663
Cook    103.5431 5.1882 194.6210 7.4464
Dane      4.9242 0.2663   7.4464 0.4173

$Fiber
        AllElse   Brown     Cook    Dane
AllElse 52.0338  9.0594  81.5136  9.2456
Brown    9.0594  2.6356  15.3493  1.8794
Cook    81.5136 15.3493 161.3176 14.7208
Dane     9.2456  1.8794  14.7208  1.9677

$Grains
        AllElse   Brown     Cook    Dane
AllElse 52.6976  9.3430  82.8958  8.3525
Brown    9.3430  2.7679  15.8956  1.7289
Cook    82.8958 15.8956 164.7330 13.3539
Dane     8.3525  1.7289  13.3539  1.5856

$Hogs
        AllElse   Brown     Cook    Dane
AllElse 51.4767  6.4403  87.2919  6.4117
Brown    6.4403  1.3464  11.8118  0.9366
Cook    87.2919 11.8118 187.0012 11.0506
Dane     6.4117  0.9366  11.0506  0.9565

$Info
        AllElse   Brown     Cook   Dane
AllElse 30.1971  5.7936  75.5399 2.3221
Brown    5.7936  1.8574  15.6751 0.5201
Cook    75.5399 15.6751 238.7235 5.9039
Dane     2.3221  0.5201   5.9039 0.2139</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>Toy_Gravity_mat_Rho <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>())</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Rho_mat)){</span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a>  Toy_Gravity_mat_Rho[[i]] <span class="ot">&lt;-</span> ((Toy_Rho_mat[i,] <span class="sc">%*%</span> <span class="fu">t</span>(Toy_Rho_mat[i,])) <span class="sc">/</span> <span class="fu">sum</span>(Toy_Rho_mat[i,]) <span class="sc">*</span> Toy_Q ) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Gravity_mat_Rho[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Gravity_mat_Rho) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb162-7"><a href="#cb162-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-8"><a href="#cb162-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Gravity of Relative Total Use Coefficients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Gravity of Relative Total Use Coefficients"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>Toy_Gravity_mat_Rho</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$Extract
        AllElse  Brown   Cook   Dane
AllElse  0.0232 0.0043 0.0827 0.0080
Brown    0.0043 0.0013 0.0165 0.0017
Cook     0.0827 0.0165 0.3728 0.0292
Dane     0.0080 0.0017 0.0292 0.0034

$Fiber
        AllElse  Brown   Cook   Dane
AllElse  0.0156 0.0108 0.0586 0.0136
Brown    0.0108 0.0125 0.0439 0.0110
Cook     0.0586 0.0439 0.2784 0.0520
Dane     0.0136 0.0110 0.0520 0.0143

$Grains
        AllElse  Brown   Cook   Dane
AllElse  0.0159 0.0112 0.0600 0.0124
Brown    0.0112 0.0132 0.0458 0.0102
Cook     0.0600 0.0458 0.2862 0.0475
Dane     0.0124 0.0102 0.0475 0.0116

$Hogs
        AllElse  Brown   Cook   Dane
AllElse  0.0160 0.0080 0.0650 0.0098
Brown    0.0080 0.0066 0.0350 0.0057
Cook     0.0650 0.0350 0.3340 0.0404
Dane     0.0098 0.0057 0.0404 0.0072

$Info
        AllElse  Brown   Cook   Dane
AllElse  0.0091 0.0070 0.0547 0.0034
Brown    0.0070 0.0089 0.0452 0.0031
Cook     0.0547 0.0452 0.4152 0.0210
Dane     0.0034 0.0031 0.0210 0.0016</code></pre>
</div>
</div>
<p>The Absolute Use Coefficient portrays national-level intermediate transaction proportions scaled by regional-level economic activity in the form of industry employment. In this example the Info sector is by far the largest purchaser of intermediate goods for every industry including itself. And Cook County happens to have the largest Info workforce, making it dominate the Absolute Use Coefficient table.</p>
<p>This is only the case, however, when we use the national-level Transactions matrix to capture the interconnectedness of industries. If instead we employ the national-level technical coefficients matrix, which specifies the amount of industry <span class="math inline">\(i\)</span>’s commodity used to produce of one unit of industry <span class="math inline">\(j\)</span> ’s commodity, the Absolute Use Coefficient table is dominated by the AllElse category with the overall largest workforce. In this way we may take the national-level technical coefficients matrix, <span class="math inline">\(\mathbf{A^{n}}\)</span>, as a first approximation to regional technical coefficients, <span class="math inline">\(\mathbf{\tilde{A}^r}\)</span>, and thus the numerator of the project narrative Absolute and Relative Use Coefficients becomes <span class="math inline">\(\mathbf{\tilde{A}^{r}X^{r}}\)</span> or <span class="math inline">\(\mathbf{\tilde{Z}^{r}}\)</span> a first approximation of the regional Transactions matrix.</p>
<p>The Relative Use Coefficient portrays national-level intermediate transaction proportions scaled by regional-level industry employment proportions.</p>
<p>The Relative and Absolute “Regional Typology Coefficients”, <span class="math inline">\(\phi\)</span>, portray a region-by-region Use Coefficient proportion for each commodity type. In other words, the row maximum assigns the best potential relationship for each commodity of that region. We can use the <span class="math inline">\(\phi\)</span> to answer the question: For which commodities is Madison a sink or a source? And which regions are complementary to those commodity balances? Looking across each row, whenever the coefficient is greater than 0.5 that region is a source <em>relative</em> to the column region and vice versa. If the coefficient is less than 0.5, the row region is a <em>relative</em> sink to the column region, for that commodity. In this example, the Relative <span class="math inline">\(\phi\)</span> shows only Green Bay as a potential relative source for Madison and only for the Extract, Fiber, and Hogs commodities.</p>
<p>The Gravity of the Absolute and Relative “Total Use Coefficients”, uses an alternate procedure to estimate the volume and sensitivity of the coefficient proportions. In this example, Madison (and Green Bay for that matter) is dominated by the “pull” of Chicago.</p>
</div>
<div id="tabset-1-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-8-tab">
<p><strong>Location specific metrics of industry input needs</strong></p>
<p>We specify a vector of <em>location input needs</em> as the product of the national input coefficient matrix and the location specific total output vector, <span class="math inline">\(\mathbf{Ax^{r}}\)</span>.</p>
<p>Similarly, let the <em>share</em> or <em>relative input needs</em> vector be given as <span class="math inline">\(\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1}\)</span>.</p>
<p>In addition, we define the <em>actual</em> or <em>import input needs</em> vector as, <span class="math inline">\(\max \{\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0\}\)</span>.</p>
<p>(Similarly, let the <em>actual</em> exports vector <span class="math inline">\(\mathbf{\tilde{x}^{r}}\)</span> be defined as <span class="math inline">\(\vert \min \{\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0\} \vert\)</span>)</p>
<p>And let the <em>relative import input needs</em> vector be given by, <span class="math inline">\(\max \{\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}, 0\}\)</span>.</p>
<p>Note: one may concatenate the input needs vectors across each location to construct an industry-by-location matrix of input needs for each specification above. Specifically denoted by:</p>
<p><span class="math inline">\(\mathbf{AX}\)</span>, <span class="math inline">\(\mathbf{AX}\left(\mathbf{\widehat{iAX}}\right)^{-1}\)</span>, <span class="math inline">\(\max \{\mathbf{AX} - \mathbf{X}, 0\}\)</span>, and <span class="math inline">\(\max \{ \mathbf{AX}\left(\mathbf{\widehat{iAX}}\right)^{-1} - \mathbf{X}\left(\mathbf{\widehat{iX}}\right)^{-1}, 0 \}\)</span></p>
<p><strong>Cross location industry compatibility</strong></p>
<p>To elucidate the industrial compatibility across locations, we construct a <em>similarity index</em>. In general, it is defined on the metric space <span class="math inline">\((\mathbf{X}, D)\)</span> where <span class="math inline">\(\mathbf{X}\)</span> is a set of vectors <span class="math inline">\(\{\mathbf{x}_{i} \in \mathbb{R} : i \in \{1, \dots, n \}\}\)</span> and <span class="math inline">\(D:\mathbf{X} \times \mathbf{X} \rightarrow \mathbb{R}\)</span> is a distance function.</p>
<p>Specifying <span class="math inline">\(D\)</span> as a <em>Euclidean</em> or <em>2-norm distance</em>, we define the industrial compatibility distance or <em>simple similarity index</em> between two locations <span class="math inline">\(r\)</span> and <span class="math inline">\(s\)</span> as:</p>
<p><span class="math display">\[D^{rs} = \Vert \mathbf{Ax^{r}} - \mathbf{x^{s}} \Vert_{2} = \sqrt{(\mathbf{Ax^{r}} - \mathbf{x^{s}})^{'}(\mathbf{Ax^{r}} - \mathbf{x^{s}})}\]</span></p>
<p>In addition, let the <em>relative similarity index</em> between two locations <span class="math inline">\(r\)</span> and <span class="math inline">\(s\)</span> be given by:</p>
<p><span class="math display">\[\Vert \mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1} \Vert_{2}\]</span> The <em>import similarity index</em> between two locations <span class="math inline">\(r\)</span> and <span class="math inline">\(s\)</span> be given by:</p>
<p><span class="math display">\[\Vert \max\{\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0\} - \mathbf{x^{s}} \Vert_{2}\]</span></p>
<p>Let the <em>relative import similarity index</em> between two locations <span class="math inline">\(r\)</span> and <span class="math inline">\(s\)</span> be given by:</p>
<p><span class="math display">\[\Vert \max\{\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}, 0\}  - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1} \Vert_{2}\]</span> (I would argue that when a similarity index employs an import specification the “exporting” location should be specified instead as <span class="math inline">\(\mathbf{\tilde{x}^{s}} = \vert \min \{\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0\} \vert\)</span> )</p>
<p>One may further weight a <em>similarity index</em> by a geographical impedance function, <span class="math inline">\(\mathbf{Q}\)</span>. In general terms, let this metric be defined by <span class="math inline">\(\mathfrak{D}\left(\mathbf{Ax^{r}}, \mathbf{x^{s}}, \mathbf{Q}\right)\)</span>. In practice, the geographical impedance between locations <span class="math inline">\(r\)</span> and <span class="math inline">\(s\)</span> is given by, <span class="math inline">\(Q^{rs} = e^{-d^{rs}}\)</span> or <span class="math inline">\(Q^{rs} = 1/(d^{rs})^2\)</span> where <span class="math inline">\(d^{rs}\)</span> is the great-circle distance between the two locations. Specifically,</p>
<p><span class="math display">\[d^{rs}  = R \cdot \arccos(\sin(\phi_{r})\sin(\phi_{s}) + \cos(\phi_{r})\cos(\phi_{s})\cos(\vert \lambda_{r} - \lambda_{s} \vert)) \]</span> Where <span class="math inline">\(\lambda_{r}, \phi_{r}\)</span> and <span class="math inline">\(\lambda_{s}, \phi_{r}\)</span> are the longitude and latitude of locations <span class="math inline">\(r\)</span> and <span class="math inline">\(s\)</span>, and <span class="math inline">\(R\)</span> is the radius of the reference sphere, which in this case is the <em>mean earth radius</em> from the WGS84 ellipsoid.</p>
<p>As such the <em>spatial simple similarity index</em> is given by</p>
<p><span class="math display">\[\mathfrak{D}^{rs} = D^{rs}/Q^{rs} = \sqrt{(\mathbf{Ax^{r}} - \mathbf{x^{s}})^{'}(\mathbf{Ax^{r}} - \mathbf{x^{s}})}/Q^{rs}\]</span></p>
<p>Let the <em>spatial relative similarity index</em> between two locations <span class="math inline">\(r\)</span> and <span class="math inline">\(s\)</span> be given by:</p>
<p><span class="math display">\[\sqrt{(\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1})^{'}(\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1})}  / Q^{rs}\]</span> Let the <em>spatial import similarity index</em> between two locations <span class="math inline">\(r\)</span> and <span class="math inline">\(s\)</span> be given by:</p>
<p><span class="math display">\[\sqrt{([\mathbf{Ax^{r}} - \mathbf{x^{r}}] - \mathbf{x^{s}})^{'}([\mathbf{Ax^{r}} - \mathbf{x^{r}}] - \mathbf{x^{s}})}/Q^{rs}\]</span></p>
<p>Let the <em>spatial relative import similarity index</em> between two locations <span class="math inline">\(r\)</span> and <span class="math inline">\(s\)</span> be given by:</p>
<p><span class="math display">\[\sqrt{([\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}]  - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1})^{'}([\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}] - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1})} / Q^{rs}\]</span> For any given location-by-location Similarity Index matrix specification, the minimum “distance” by row is said to be the most compatible trading partner.</p>
<p>Alternative specifications of the spatial distance are possible. One possibility is to discretize the impedance matrix as a binary proximity operator which is one when two locations share a boundary (or vertex) and zero otherwise.</p>
<p><strong>Empirical Example</strong></p>
<p>Suppose we still only have national level Input-Output tables (consisting of Make/Use tables, industry-by-industry, industry-by-commodity, and commodity-by-commodity total requirements tables, and commodity-by-industry direct requirements tables) and location specific industry activity (in the form of employment, payroll, and number of establishments). How might we implement the above methods?</p>
<p>As before, we can derive a national-level, industry-by-industry direct requirements matrix, <span class="math inline">\(\mathbf{A^{n}}\)</span>, from the national-level, industry-by-industry total requirements matrix, <span class="math inline">\(\mathbf{L^{n}}\)</span>, using <span class="math inline">\(\mathbf{A^{n}} = \mathbf{I} - (\mathbf{L^{n}})^{-1}\)</span>. Furthermore, we can construct the location specific total output vector, <span class="math inline">\(\mathbf{x^{r}}\)</span> from a payroll and labor share quotient. As a first pass assume unit labor share, such that location specific industry payroll is equivalent to location specific total output.</p>
<p>Suppose these tables are given by:</p>
<p>“National Total Requirements Table”: <span class="math inline">\(\mathbf{L}\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>Industry_Count <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>Toy_Total_mat <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fl">1.2523</span>,  <span class="fl">0.0143</span>, <span class="fl">0.0055</span>, <span class="fl">0.0276</span>, <span class="fl">0.0892</span>,</span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.0251</span>,  <span class="fl">1.1230</span>, <span class="fl">0.1450</span>, <span class="fl">0.0331</span>, <span class="fl">0.0709</span>,</span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.0203</span>,  <span class="fl">0.0236</span>, <span class="fl">1.0420</span>, <span class="fl">0.0128</span>, <span class="fl">0.0237</span>,</span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.0092</span>,  <span class="fl">0.0171</span>, <span class="fl">0.0088</span>, <span class="fl">1.0048</span>, <span class="fl">0.0105</span>,</span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.4020</span>,  <span class="fl">0.2675</span>, <span class="fl">0.1055</span>, <span class="fl">0.5102</span>, <span class="fl">1.7703</span>), <span class="at">nrow =</span> Industry_Count, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Total_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb166-9"><a href="#cb166-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Total_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb166-10"><a href="#cb166-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-11"><a href="#cb166-11" aria-hidden="true" tabindex="-1"></a>Toy_Total_mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        Extract  Fiber Grains   Hogs   Info
Extract  1.2523 0.0143 0.0055 0.0276 0.0892
Fiber    0.0251 1.1230 0.1450 0.0331 0.0709
Grains   0.0203 0.0236 1.0420 0.0128 0.0237
Hogs     0.0092 0.0171 0.0088 1.0048 0.0105
Info     0.4020 0.2675 0.1055 0.5102 1.7703</code></pre>
</div>
</div>
<p>“National Direct Requirements Table”: <span class="math inline">\(\mathbf{A} = \mathbf{I} - (\mathbf{L})^{-1}\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>Toy_Direct_mat <span class="ot">&lt;-</span> <span class="fu">diag</span>(<span class="fu">ncol</span>(Toy_Total_mat)) <span class="sc">-</span> <span class="fu">solve</span>(Toy_Total_mat)</span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Direct_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Direct_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a>Toy_Direct_mat <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        Extract  Fiber Grains   Hogs   Info
Extract  0.1883 0.0006 0.0001 0.0015 0.0409
Fiber    0.0051 0.0986 0.1219 0.0107 0.0342
Grains   0.0115 0.0173 0.0366 0.0055 0.0116
Hogs     0.0054 0.0138 0.0060 0.0016 0.0050
Info     0.1813 0.1311 0.0373 0.2855 0.4185</code></pre>
</div>
</div>
<p>“Industry-by-Location Payroll Table”: <span class="math display">\[\mathbf{X} =
  \begin{bmatrix}
   \mathbf{x^{r}} &amp; \mathbf{x^{s}} &amp; \cdots &amp; \mathbf{x^{l}}
  \end{bmatrix}\]</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>Region_Count <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>Toy_X_mat <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">4979</span>, <span class="dv">487</span>, <span class="dv">5498</span>, <span class="dv">1517</span>, </span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">4512</span>, <span class="dv">1395</span>,  <span class="dv">4287</span>, <span class="dv">0</span>,</span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">19912</span>, <span class="dv">20003</span>,  <span class="dv">11322</span>, <span class="dv">1305</span>,</span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">23685</span>, <span class="dv">201144</span>,  <span class="dv">2670</span>, <span class="dv">58896</span>,</span>
<span id="cb170-7"><a href="#cb170-7" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">81009</span>, <span class="dv">224686</span>,  <span class="dv">98075</span>, <span class="dv">27797</span>), <span class="at">nrow =</span> Industry_Count, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb170-8"><a href="#cb170-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-9"><a href="#cb170-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_X_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb170-10"><a href="#cb170-10" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_X_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb170-11"><a href="#cb170-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-12"><a href="#cb170-12" aria-hidden="true" tabindex="-1"></a>Toy_X_mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse  Brown  Cook  Dane
Extract    4979    487  5498  1517
Fiber      4512   1395  4287     0
Grains    19912  20003 11322  1305
Hogs      23685 201144  2670 58896
Info      81009 224686 98075 27797</code></pre>
</div>
</div>
<p>“Industry-by-Location Input Needs Table”: <span class="math inline">\(\mathbf{AX}\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat <span class="ot">&lt;-</span> (Toy_Direct_mat  <span class="sc">%*%</span>  Toy_X_mat) </span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         AllElse     Brown     Cook     Dane
Extract  4287.91   9582.25  5050.40  1511.55
Fiber    5915.62  12395.47  5208.05  1743.93
Grains   1933.92   4473.72  1703.65   711.51
Hogs      651.23   1580.96   652.67   246.74
Info    42903.52 152478.17 43791.85 28770.93</code></pre>
</div>
</div>
<p>“Relative Industry-by-Location Input Needs Table”: <span class="math inline">\(\mathbf{AX}\left(\mathbf{\widehat{iAX}}\right)^{-1}\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_rel <span class="ot">&lt;-</span> (Toy_Input_mat) <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">diag</span>(<span class="fu">c</span>((<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Direct_mat)) <span class="sc">%*%</span> Toy_Input_mat))))</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Input_mat_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_rel  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse  Brown   Cook   Dane
Extract  0.0770 0.0531 0.0895 0.0458
Fiber    0.1062 0.0687 0.0923 0.0529
Grains   0.0347 0.0248 0.0302 0.0216
Hogs     0.0117 0.0088 0.0116 0.0075
Info     0.7704 0.8447 0.7764 0.8723</code></pre>
</div>
</div>
<p>“Import Industry-by-Location Input Needs Table”: <span class="math inline">\(\max \{\mathbf{AX} - \mathbf{X}, 0\}\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_imp <span class="ot">&lt;-</span> <span class="fu">pmax</span>(Toy_Input_mat <span class="sc">-</span> Toy_X_mat, <span class="dv">0</span>)</span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_imp  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse    Brown   Cook    Dane
Extract    0.00  9095.25   0.00    0.00
Fiber   1403.62 11000.47 921.05 1743.93
Grains     0.00     0.00   0.00    0.00
Hogs       0.00     0.00   0.00    0.00
Info       0.00     0.00   0.00  973.93</code></pre>
</div>
</div>
<p>“Net Exports Table”: <span class="math inline">\(\max \{\mathbf{AX} - \mathbf{X}, 0\}\)</span> <span class="math inline">\(\mathbf{\tilde{X}} = \vert \min \{\mathbf{AX} - \mathbf{X}, 0\} \vert\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_exp <span class="ot">&lt;-</span> <span class="fu">abs</span>(<span class="fu">pmin</span>(Toy_Input_mat <span class="sc">-</span> Toy_X_mat, <span class="dv">0</span>))</span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_exp  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         AllElse     Brown     Cook     Dane
Extract   691.09      0.00   447.60     5.45
Fiber       0.00      0.00     0.00     0.00
Grains  17978.08  15529.28  9618.35   593.49
Hogs    23033.77 199563.04  2017.33 58649.26
Info    38105.48  72207.83 54283.15     0.00</code></pre>
</div>
</div>
<p>“Relative Import Industry-by-Location Input Needs Table”: <span class="math inline">\(\max \{\mathbf{AX}\left(\mathbf{\widehat{iAX}}\right)^{-1} - \mathbf{X}\left(\mathbf{\widehat{iX}}\right)^{-1}, 0\}\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_imp_rel <span class="ot">&lt;-</span> <span class="fu">pmax</span>(Toy_Input_mat_rel <span class="sc">-</span> Toy_X_mat <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">diag</span>(<span class="fu">c</span>((<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">nrow</span>(Toy_X_mat)) <span class="sc">%*%</span> Toy_X_mat)))), <span class="dv">0</span>)</span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Input_mat_imp_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_imp_rel  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse  Brown   Cook   Dane
Extract  0.0399 0.0520 0.0444 0.0289
Fiber    0.0726 0.0656 0.0571 0.0529
Grains   0.0000 0.0000 0.0000 0.0070
Hogs     0.0000 0.0000 0.0000 0.0000
Info     0.1663 0.3429 0.0000 0.5617</code></pre>
</div>
</div>
<p>Assuming a Euclidean distance function, the similarity index is given by</p>
<p>“Simple Similarity Index”: <span class="math inline">\(\Vert \mathbf{Ax^{r}} - \mathbf{x^{s}} \Vert_{2} ~ \forall ~ r,s \in l\)</span></p>
<p>In this example denoted</p>
<p><span class="math display">\[ \begin{bmatrix}
    \Vert\mathbf{Ax^{a}} - \mathbf{x^{a}}\Vert_{2} &amp; \Vert\mathbf{Ax^{a}} - \mathbf{x^{b}}\Vert_{2} &amp; \Vert\mathbf{Ax^{a}} - \mathbf{x^{c}}\Vert_{2} &amp; \Vert\mathbf{Ax^{a}} - \mathbf{x^{d}}\Vert_{2}\\
    \Vert\mathbf{Ax^{b}} - \mathbf{x^{a}}\Vert_{2} &amp; \Vert\mathbf{Ax^{b}} - \mathbf{x^{b}}\Vert_{2} &amp; \Vert\mathbf{Ax^{b}} - \mathbf{x^{c}}\Vert_{2} &amp; \Vert\mathbf{Ax^{b}} - \mathbf{x^{d}}\Vert_{2}\\
    \Vert\mathbf{Ax^{c}} - \mathbf{x^{a}}\Vert_{2} &amp; \Vert\mathbf{Ax^{c}} - \mathbf{x^{b}}\Vert_{2} &amp; \Vert\mathbf{Ax^{c}} - \mathbf{x^{c}}\Vert_{2} &amp; \Vert\mathbf{Ax^{c}} - \mathbf{x^{d}}\Vert_{2}\\
    \Vert\mathbf{Ax^{d}} - \mathbf{x^{a}}\Vert_{2} &amp; \Vert\mathbf{Ax^{d}} - \mathbf{x^{b}}\Vert_{2} &amp; \Vert\mathbf{Ax^{d}} - \mathbf{x^{c}}\Vert_{2} &amp; \Vert\mathbf{Ax^{d}} - \mathbf{x^{d}}\Vert_{2}\\
  \end{bmatrix}\]</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>Toy_sim <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>Toy_sim  <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Region_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a>  Toy_sim[i,j]  <span class="ot">&lt;-</span> <span class="fu">norm</span>((Toy_Input_mat[,i] <span class="sc">-</span> (Toy_X_mat[,j])), <span class="at">type =</span> <span class="st">"2"</span>)</span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb182-7"><a href="#cb182-7" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb182-8"><a href="#cb182-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_sim) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb182-9"><a href="#cb182-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_sim) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb182-10"><a href="#cb182-10" aria-hidden="true" tabindex="-1"></a>Toy_sim <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">cbind</span>(., <span class="at">RowMin =</span> <span class="fu">c</span>(<span class="fu">colnames</span>(Toy_sim)[<span class="fu">apply</span>(Toy_sim, <span class="dv">1</span>, which.min)]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse    Brown       Cook       Dane        RowMin   
AllElse "48044.16" "271299.83" "56037.67" "60528.74"  "AllElse"
Brown   "76929.26" "213270.42" "55589.74" "138054.87" "Cook"   
Cook    "47409.26" "270720.7"  "55175.1"  "60727.99"  "AllElse"
Dane    "60551.73" "281275.23" "70312.64" "58686.26"  "Dane"   </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">colnames</span>(Toy_sim)[<span class="fu">apply</span>(Toy_sim, <span class="dv">1</span>, which.min)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
AllElse    Cook    Dane 
      2       1       1 </code></pre>
</div>
</div>
<p>“Relative Similarity Index”: <span class="math inline">\(\Vert \mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1} \Vert_{2} ~ \forall ~ r,s \in l\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>Toy_sim_rel <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>Toy_sim_rel  <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Region_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a>  Toy_sim_rel[i,j]  <span class="ot">&lt;-</span> <span class="fu">norm</span>((Toy_Input_mat_rel[,i] <span class="sc">-</span> (Toy_X_mat[,j] <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">c</span>((<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Direct_mat)) <span class="sc">%*%</span> Toy_X_mat[,j] ))) )), <span class="at">type =</span> <span class="st">"2"</span>)</span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb186-7"><a href="#cb186-7" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb186-8"><a href="#cb186-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_sim_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb186-9"><a href="#cb186-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_sim_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb186-10"><a href="#cb186-10" aria-hidden="true" tabindex="-1"></a>Toy_sim_rel  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>) <span class="sc">%&gt;%</span> <span class="fu">cbind</span>(., <span class="at">RowMin =</span> <span class="fu">c</span>(<span class="fu">colnames</span>(Toy_sim_rel)[<span class="fu">apply</span>(Toy_sim_rel, <span class="dv">1</span>, which.min)]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse  Brown    Cook     Dane     RowMin
AllElse "0.2732" "0.5292" "0.1036" "0.8027" "Cook"
Brown   "0.3207" "0.5648" "0.0871" "0.8443" "Cook"
Cook    "0.2777" "0.5319" "0.1005" "0.8055" "Cook"
Dane    "0.3421" "0.5808" "0.1008" "0.8616" "Cook"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">colnames</span>(Toy_sim_rel)[<span class="fu">apply</span>(Toy_sim_rel, <span class="dv">1</span>, which.min)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Cook 
   4 </code></pre>
</div>
</div>
<p>“Import Similarity Index”: <span class="math inline">\(\Vert \max\{\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0\} - \mathbf{x^{s}} \Vert_{2} ~ \forall ~ r,s \in l\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>Toy_sim_imp <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>Toy_sim_imp  <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Region_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a>  Toy_sim_imp[i,j]  <span class="ot">&lt;-</span> <span class="fu">norm</span>((Toy_Input_mat_imp[,i] <span class="sc">-</span> (Toy_X_mat[,j])), <span class="at">type =</span> <span class="st">"2"</span>)</span>
<span id="cb190-6"><a href="#cb190-6" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb190-7"><a href="#cb190-7" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb190-8"><a href="#cb190-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_sim_imp) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb190-9"><a href="#cb190-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_sim_imp) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb190-10"><a href="#cb190-10" aria-hidden="true" tabindex="-1"></a>Toy_sim_imp  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">cbind</span>(., <span class="at">RowMin =</span> <span class="fu">c</span>(<span class="fu">colnames</span>(Toy_sim_imp)[<span class="fu">apply</span>(Toy_sim_imp, <span class="dv">1</span>, which.min)]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse    Brown       Cook       Dane       RowMin
AllElse "86915.92" "302230.15" "98957.39" "65171.98" "Dane"
Brown   "87057.27" "302504.87" "99055.71" "66494.78" "Dane"
Cook    "86934.52" "302230.52" "98972.62" "65163.37" "Dane"
Dane    "85997.28" "301507.01" "97982.8"  "64770.84" "Dane"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">colnames</span>(Toy_sim_imp)[<span class="fu">apply</span>(Toy_sim_imp, <span class="dv">1</span>, which.min)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Dane 
   4 </code></pre>
</div>
</div>
<p>“*Import Similarity Index - Net Exports”: <span class="math inline">\(\Vert \max\{\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0\} - \mathbf{\tilde{x}^{s}} \Vert_{2} ~ \forall ~ r,s \in l\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>Toy_sim_exp <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a>Toy_sim_exp  <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Region_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb194-5"><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a>  Toy_sim_exp[i,j]  <span class="ot">&lt;-</span> <span class="fu">norm</span>((Toy_Input_mat_imp[,i] <span class="sc">-</span> (Toy_Input_mat_exp[,j])), <span class="at">type =</span> <span class="st">"2"</span>)</span>
<span id="cb194-6"><a href="#cb194-6" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb194-7"><a href="#cb194-7" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb194-8"><a href="#cb194-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_sim_exp) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb194-9"><a href="#cb194-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_sim_exp) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb194-10"><a href="#cb194-10" aria-hidden="true" tabindex="-1"></a>Toy_sim_exp  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)  <span class="sc">%&gt;%</span> <span class="fu">cbind</span>(., <span class="at">RowMin =</span> <span class="fu">c</span>(<span class="fu">colnames</span>(Toy_sim_exp)[<span class="fu">apply</span>(Toy_sim_exp, <span class="dv">1</span>, which.min)]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse    Brown       Cook       Dane       RowMin   
AllElse "48044.16" "212796.87" "55185.26" "58669.05" "AllElse"
Brown   "49974.33" "213270.42" "56912.52" "60363.25" "AllElse"
Cook    "48032.49" "212794.23" "55175.1"  "58659.49" "AllElse"
Dane    "47286.75" "212470.88" "54237.41" "58686.26" "AllElse"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">colnames</span>(Toy_sim_exp)[<span class="fu">apply</span>(Toy_sim_exp, <span class="dv">1</span>, which.min)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
AllElse 
      4 </code></pre>
</div>
</div>
<p>“Relative Import Similarity Index”: <span class="math inline">\(\Vert \max\{\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}, 0\} - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1} \Vert_{2} ~ \forall ~ r,s \in l\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>Toy_sim_imp_rel <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>Toy_sim_imp_rel  <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Region_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>  Toy_sim_imp_rel[i,j]  <span class="ot">&lt;-</span> <span class="fu">norm</span>((Toy_Input_mat_imp_rel[,i] <span class="sc">-</span> (Toy_X_mat[,j] <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">c</span>((<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Direct_mat)) <span class="sc">%*%</span> Toy_X_mat[,j] ))) )), <span class="at">type =</span> <span class="st">"2"</span>)</span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_sim_imp_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb198-9"><a href="#cb198-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_sim_imp_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb198-10"><a href="#cb198-10" aria-hidden="true" tabindex="-1"></a>Toy_sim_imp_rel  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>) <span class="sc">%&gt;%</span> <span class="fu">cbind</span>(., <span class="at">RowMin =</span> <span class="fu">c</span>(<span class="fu">colnames</span>(Toy_sim_imp_rel)[<span class="fu">apply</span>(Toy_sim_imp_rel, <span class="dv">1</span>, which.min)]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse  Brown    Cook     Dane     RowMin   
AllElse "0.4965" "0.5681" "0.6468" "0.678"  "AllElse"
Brown   "0.3503" "0.4854" "0.4728" "0.6631" "AllElse"
Cook    "0.6471" "0.6786" "0.8108" "0.7304" "AllElse"
Dane    "0.2312" "0.4584" "0.2599" "0.7064" "AllElse"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">colnames</span>(Toy_sim_imp_rel)[<span class="fu">apply</span>(Toy_sim_imp_rel, <span class="dv">1</span>, which.min)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
AllElse 
      4 </code></pre>
</div>
</div>
<p>“*Relative Import Similarity Index - Net Exports”: <span class="math inline">\(\Vert \max\{\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}, 0\} - \mathbf{\tilde{x}^{s}}(\mathbf{i\tilde{x}^{s}})^{-1} \Vert_{2} ~ \forall ~ r,s \in l\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>Toy_sim_exp_rel <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>Toy_sim_exp_rel  <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Region_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a>  Toy_sim_exp_rel[i,j]  <span class="ot">&lt;-</span> <span class="fu">norm</span>((Toy_Input_mat_imp_rel[,i] <span class="sc">-</span> (Toy_Input_mat_exp[,j] <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">c</span>((<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Direct_mat)) <span class="sc">%*%</span> Toy_Input_mat_exp[,j] ))) )), <span class="at">type =</span> <span class="st">"2"</span>)</span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb202-8"><a href="#cb202-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_sim_exp_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb202-9"><a href="#cb202-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_sim_exp_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb202-10"><a href="#cb202-10" aria-hidden="true" tabindex="-1"></a>Toy_sim_exp_rel  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>) <span class="sc">%&gt;%</span> <span class="fu">cbind</span>(., <span class="at">RowMin =</span> <span class="fu">c</span>(<span class="fu">colnames</span>(Toy_sim_exp_rel)[<span class="fu">apply</span>(Toy_sim_exp_rel, <span class="dv">1</span>, which.min)]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse  Brown    Cook     Dane     RowMin   
AllElse "0.487"  "0.7068" "0.673"  "1.0072" "AllElse"
Brown   "0.3979" "0.7077" "0.504"  "1.051"  "AllElse"
Cook    "0.6054" "0.7442" "0.834"  "0.9926" "AllElse"
Dane    "0.3758" "0.7646" "0.2981" "1.1398" "Cook"   </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">colnames</span>(Toy_sim_exp_rel)[<span class="fu">apply</span>(Toy_sim_exp_rel, <span class="dv">1</span>, which.min)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
AllElse    Cook 
      3       1 </code></pre>
</div>
</div>
<p>Adding the spatial elements:</p>
<p>“Geographical Impedance”: <span class="math inline">\(Q^{rs} = e^{-d^{rs}} ~ \forall ~ r,s \in l\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>Toy_Lat <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">42.3</span>, <span class="fl">44.49</span>, <span class="fl">41.84</span>, <span class="fl">43.07</span>)</span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>Toy_Lon <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">89.04</span>, <span class="sc">-</span><span class="fl">88.03</span>, <span class="sc">-</span><span class="fl">87.77</span>, <span class="sc">-</span><span class="fl">89.39</span>)</span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a>Toy_Dist_mat <span class="ot">&lt;-</span> <span class="fu">distm</span>(<span class="fu">cbind</span>(Toy_Lon, Toy_Lat))<span class="sc">/</span><span class="dv">1000000</span></span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Dist_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb206-5"><a href="#cb206-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Dist_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb206-6"><a href="#cb206-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-7"><a href="#cb206-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy_Q &lt;- (1/(Toy_Dist_mat)^2)</span></span>
<span id="cb206-8"><a href="#cb206-8" aria-hidden="true" tabindex="-1"></a>Toy_Q <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="sc">-</span>Toy_Dist_mat)</span>
<span id="cb206-9"><a href="#cb206-9" aria-hidden="true" tabindex="-1"></a>Toy_Q  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse  Brown   Cook   Dane
AllElse  1.0000 0.7736 0.8897 0.9137
Brown    0.7736 1.0000 0.7444 0.8253
Cook     0.8897 0.7444 1.0000 0.8263
Dane     0.9137 0.8253 0.8263 1.0000</code></pre>
</div>
</div>
<p>“Spatial Simple Similarity Index”: <span class="math inline">\(\Vert \mathbf{Ax^{r}} - \mathbf{x^{s}} \Vert_{2} / Q^{rs} ~ \forall ~ r,s \in l\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>(Toy_sim  <span class="sc">/</span> Toy_Q) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         AllElse    Brown     Cook      Dane
AllElse 48044.16 350695.9 62984.50  66243.43
Brown   99442.66 213270.4 74676.14 167282.36
Cook    53286.45 363671.1 55175.10  73497.56
Dane    66268.59 340823.8 85097.62  58686.26</code></pre>
</div>
</div>
<p>“Spatial Relative Similarity Index”: <span class="math inline">\(\Vert \mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1} \Vert_{2} / Q^{rs} ~ \forall ~ r,s \in l\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a>(Toy_sim_rel  <span class="sc">/</span> Toy_Q) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse  Brown   Cook   Dane
AllElse  0.2732 0.6841 0.1165 0.8785
Brown    0.4146 0.5648 0.1170 1.0231
Cook     0.3121 0.7145 0.1005 0.9749
Dane     0.3745 0.7038 0.1219 0.8616</code></pre>
</div>
</div>
<p>“Spatial Import Similarity Index”: <span class="math inline">\(\Vert \max\{\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0\} - \mathbf{x^{s}} \Vert_{2} / Q^{rs} ~ \forall ~ r,s \in l\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>(Toy_sim_imp  <span class="sc">/</span> Toy_Q) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          AllElse    Brown      Cook     Dane
AllElse  86915.92 390678.0 111224.84 71325.05
Brown   112534.65 302504.9 133065.90 80572.34
Cook     97711.53 405999.6  98972.62 78865.58
Dane     94116.52 365338.8 118586.11 64770.84</code></pre>
</div>
</div>
<p>“Spatial Relative Import Similarity Index”: <span class="math inline">\(\Vert \max\{\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}, 0\} - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1} \Vert_{2} / Q^{rs} ~ \forall ~ r,s \in l\)</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a>(Toy_sim_imp_rel  <span class="sc">/</span> Toy_Q) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        AllElse  Brown   Cook   Dane
AllElse  0.4965 0.7344 0.7270 0.7420
Brown    0.4529 0.4854 0.6351 0.8035
Cook     0.7274 0.9116 0.8108 0.8840
Dane     0.2530 0.5554 0.3146 0.7064</code></pre>
</div>
</div>
<p>For any given location-by-location Similarity Index matrix specification, the minimum “distance” by row is said to be the most compatible trading partner.</p>
<p><strong>Proximity Example</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a>Toy_prox <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rbind</span>(</span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb216-3"><a href="#cb216-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb216-4"><a href="#cb216-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb216-5"><a href="#cb216-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb216-6"><a href="#cb216-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>),</span>
<span id="cb216-7"><a href="#cb216-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb216-8"><a href="#cb216-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>),</span>
<span id="cb216-9"><a href="#cb216-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb216-10"><a href="#cb216-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>)), <span class="at">nrow =</span> <span class="dv">9</span>)</span>
<span id="cb216-11"><a href="#cb216-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-12"><a href="#cb216-12" aria-hidden="true" tabindex="-1"></a>Toy_RUCC <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">9</span>,<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">9</span>)</span>
<span id="cb216-13"><a href="#cb216-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-14"><a href="#cb216-14" aria-hidden="true" tabindex="-1"></a>Toy_RUCC_prox <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">t</span>(Toy_RUCC <span class="sc">*</span> Toy_prox ) <span class="sc">*</span> Toy_RUCC)</span>
<span id="cb216-15"><a href="#cb216-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-16"><a href="#cb216-16" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(Toy_RUCC_prox) <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-9-tab">
<p>“The Assumption of Spatially Invariant Production Functions: The Problem of Heterogeneity All classic nonsurvey methods assume that national total use coefficients - the production functions in full - hold at every conceivable regional dimension. Various suggestions have been made as to why this is unlikely to be observed in practice. Smith and Morrison (1974 p.22) identify anything from differences in productive efficiency to climatic variation as contributing to the phenomenon. However, it is argued here that, apart from variation due to stochastic observation error, differences in total use can be attributed to the violation of one fundamental assumption of the Leontief model, and that is that each defined sector is homogeneous. Homogeneity implies that the set of coefficients which describes each defined commodity’s production is wholly unique. Hence there can be no variation in the means of production for any defined commodity, and if there is, for whatever reason, the commodity would require separate definition in order for the homogeneity assumption to hold. The reason for the assumption is quite straightforward. If each production function describes a diverse set of commodities, the pattem of linkage is hidden within average relationships (see Table 5.1 below), and hence the precision with which one can calculate, for example, multipliers is eroded. It is argued here that differences in regional and national total use derive from the fact that the production functions of the national model are heterogeneously defined. The argument is as follows. At the broadest levels of commodity definition i.e.&nbsp;agriculture, manufacture, regional production functions are merged together, and as such cannot be identified in the national model. As the definitions of the national model are increased, the production functions of regionally specialised commodities emerge i.e.&nbsp;dair&gt;’ farming, sea fishing, fish farming. At some much higher level of disaggregation - where homogeneity is approached - the definitions o f the national model are so fine that it is possible to identify the individual factories and firms operating within the nation. At this point, the national model becomes one of infinite-regions because it is possible to extract the input-output table for any conceivable spatial subset of the nation. Not only the problem of estimating regional production functions evaporated, the trade estimation problem has ceased to exist.” - (Brand, 1998)</p>
<p>FIN</p>
</div>
</div>
</div>


<!-- -->


</main> <!-- /main -->
<script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb217" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Toy Story"</span></span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Austin Sandler"</span></span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "3/22/2022"</span></span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb217-7"><a href="#cb217-7" aria-hidden="true" tabindex="-1"></a><span class="co">    self-contained: false</span></span>
<span id="cb217-8"><a href="#cb217-8" aria-hidden="true" tabindex="-1"></a><span class="co">    page-layout: full</span></span>
<span id="cb217-9"><a href="#cb217-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb217-10"><a href="#cb217-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb217-11"><a href="#cb217-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code_download: yes</span></span>
<span id="cb217-12"><a href="#cb217-12" aria-hidden="true" tabindex="-1"></a><span class="co">    latex_engine: pdflatex</span></span>
<span id="cb217-13"><a href="#cb217-13" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb217-14"><a href="#cb217-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-15"><a href="#cb217-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-16"><a href="#cb217-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-17"><a href="#cb217-17" aria-hidden="true" tabindex="-1"></a><span class="in">```{r preamble, include = FALSE}</span></span>
<span id="cb217-18"><a href="#cb217-18" aria-hidden="true" tabindex="-1"></a><span class="co"># When you click the **Render** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document.</span></span>
<span id="cb217-19"><a href="#cb217-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-20"><a href="#cb217-20" aria-hidden="true" tabindex="-1"></a><span class="co">#For nonscientific notation</span></span>
<span id="cb217-21"><a href="#cb217-21" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">999</span>)</span>
<span id="cb217-22"><a href="#cb217-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-23"><a href="#cb217-23" aria-hidden="true" tabindex="-1"></a>root_dir <span class="ot">&lt;-</span> rprojroot<span class="sc">::</span><span class="fu">find_rstudio_root_file</span>()</span>
<span id="cb217-24"><a href="#cb217-24" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-25"><a href="#cb217-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-26"><a href="#cb217-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-27"><a href="#cb217-27" aria-hidden="true" tabindex="-1"></a><span class="in">```{r packages and libraries, include = FALSE}</span></span>
<span id="cb217-28"><a href="#cb217-28" aria-hidden="true" tabindex="-1"></a><span class="co"># List packages needed for this exercise</span></span>
<span id="cb217-29"><a href="#cb217-29" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"dlm"</span>,</span>
<span id="cb217-30"><a href="#cb217-30" aria-hidden="true" tabindex="-1"></a>              <span class="st">"geosphere"</span>,</span>
<span id="cb217-31"><a href="#cb217-31" aria-hidden="true" tabindex="-1"></a>              <span class="st">"gtools"</span>,</span>
<span id="cb217-32"><a href="#cb217-32" aria-hidden="true" tabindex="-1"></a>              <span class="st">"knitr"</span>,</span>
<span id="cb217-33"><a href="#cb217-33" aria-hidden="true" tabindex="-1"></a>              <span class="st">"readxl"</span>,</span>
<span id="cb217-34"><a href="#cb217-34" aria-hidden="true" tabindex="-1"></a>              <span class="st">"tidyr"</span>,</span>
<span id="cb217-35"><a href="#cb217-35" aria-hidden="true" tabindex="-1"></a>              <span class="st">"tools"</span>)</span>
<span id="cb217-36"><a href="#cb217-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-37"><a href="#cb217-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb217-38"><a href="#cb217-38" aria-hidden="true" tabindex="-1"></a><span class="fu">invisible</span>(<span class="fu">lapply</span>(packages, library, <span class="at">character.only =</span> <span class="cn">TRUE</span>))</span>
<span id="cb217-39"><a href="#cb217-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-40"><a href="#cb217-40" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-41"><a href="#cb217-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-42"><a href="#cb217-42" aria-hidden="true" tabindex="-1"></a><span class="in">```{r version control, include = FALSE}</span></span>
<span id="cb217-43"><a href="#cb217-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Save snapshot of session versions (must be run outside of render)</span></span>
<span id="cb217-44"><a href="#cb217-44" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="fu">capture.output</span>(<span class="fu">sessionInfo</span>()), <span class="fu">paste0</span>(<span class="st">"sessionInfo_"</span>, <span class="fu">basename</span>(<span class="fu">file_path_sans_ext</span>(<span class="fu">script_file</span>())), <span class="st">".txt"</span>))</span>
<span id="cb217-45"><a href="#cb217-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-46"><a href="#cb217-46" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-47"><a href="#cb217-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-48"><a href="#cb217-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-49"><a href="#cb217-49" aria-hidden="true" tabindex="-1"></a>This R Markdown document is a testing ground for Toy model specifications with numerical examples. </span>
<span id="cb217-50"><a href="#cb217-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-51"><a href="#cb217-51" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset}</span>
<span id="cb217-52"><a href="#cb217-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-53"><a href="#cb217-53" aria-hidden="true" tabindex="-1"></a><span class="fu">### Project Narrative</span></span>
<span id="cb217-54"><a href="#cb217-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-55"><a href="#cb217-55" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Richard Trial, error=FALSE}</span></span>
<span id="cb217-56"><a href="#cb217-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Exercise to replicate table and analysis from project narrative</span></span>
<span id="cb217-57"><a href="#cb217-57" aria-hidden="true" tabindex="-1"></a>Use_SUT_Framework_2007_2012_DET <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="fu">file.path</span>(root_dir, <span class="st">"data/AllTablesSUP/Use_SUT_Framework_2007_2012_DET.xlsx"</span>), <span class="at">sheet =</span> <span class="st">"2012"</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>, <span class="at">skip =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">suppressMessages</span>()</span>
<span id="cb217-58"><a href="#cb217-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-59"><a href="#cb217-59" aria-hidden="true" tabindex="-1"></a>ProjNarrIO <span class="ot">&lt;-</span> <span class="fu">c</span>(Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">4</span>]],</span>
<span id="cb217-60"><a href="#cb217-60" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">196</span>]],</span>
<span id="cb217-61"><a href="#cb217-61" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">211</span>]],</span>
<span id="cb217-62"><a href="#cb217-62" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">286</span>]],</span>
<span id="cb217-63"><a href="#cb217-63" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">291</span>]],</span>
<span id="cb217-64"><a href="#cb217-64" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">4</span>]],</span>
<span id="cb217-65"><a href="#cb217-65" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">196</span>]],</span>
<span id="cb217-66"><a href="#cb217-66" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">211</span>]],</span>
<span id="cb217-67"><a href="#cb217-67" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">286</span>]],</span>
<span id="cb217-68"><a href="#cb217-68" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">291</span>]],</span>
<span id="cb217-69"><a href="#cb217-69" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">4</span>]],</span>
<span id="cb217-70"><a href="#cb217-70" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">196</span>]],</span>
<span id="cb217-71"><a href="#cb217-71" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">211</span>]],</span>
<span id="cb217-72"><a href="#cb217-72" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">286</span>]],</span>
<span id="cb217-73"><a href="#cb217-73" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">291</span>]],</span>
<span id="cb217-74"><a href="#cb217-74" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">4</span>]],</span>
<span id="cb217-75"><a href="#cb217-75" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">196</span>]],</span>
<span id="cb217-76"><a href="#cb217-76" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">211</span>]],</span>
<span id="cb217-77"><a href="#cb217-77" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">286</span>]],</span>
<span id="cb217-78"><a href="#cb217-78" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">291</span>]],</span>
<span id="cb217-79"><a href="#cb217-79" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">4</span>]],</span>
<span id="cb217-80"><a href="#cb217-80" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">196</span>]],</span>
<span id="cb217-81"><a href="#cb217-81" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">211</span>]],</span>
<span id="cb217-82"><a href="#cb217-82" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">286</span>]],</span>
<span id="cb217-83"><a href="#cb217-83" aria-hidden="true" tabindex="-1"></a>                Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">291</span>]]) </span>
<span id="cb217-84"><a href="#cb217-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-85"><a href="#cb217-85" aria-hidden="true" tabindex="-1"></a>ProjNarrIO[<span class="fu">is.na</span>(ProjNarrIO)] <span class="ot">&lt;-</span> <span class="dv">0</span> </span>
<span id="cb217-86"><a href="#cb217-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-87"><a href="#cb217-87" aria-hidden="true" tabindex="-1"></a>codenames <span class="ot">&lt;-</span> <span class="fu">c</span>(Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">1</span>]],</span>
<span id="cb217-88"><a href="#cb217-88" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">1</span>]],</span>
<span id="cb217-89"><a href="#cb217-89" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">1</span>]],</span>
<span id="cb217-90"><a href="#cb217-90" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">1</span>]],</span>
<span id="cb217-91"><a href="#cb217-91" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">1</span>]])</span>
<span id="cb217-92"><a href="#cb217-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-93"><a href="#cb217-93" aria-hidden="true" tabindex="-1"></a>descriptionnames <span class="ot">&lt;-</span> <span class="fu">c</span>(Use_SUT_Framework_2007_2012_DET[[<span class="dv">6</span>,<span class="dv">2</span>]],</span>
<span id="cb217-94"><a href="#cb217-94" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">197</span>,<span class="dv">2</span>]],</span>
<span id="cb217-95"><a href="#cb217-95" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">212</span>,<span class="dv">2</span>]],</span>
<span id="cb217-96"><a href="#cb217-96" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">287</span>,<span class="dv">2</span>]],</span>
<span id="cb217-97"><a href="#cb217-97" aria-hidden="true" tabindex="-1"></a>               Use_SUT_Framework_2007_2012_DET[[<span class="dv">292</span>,<span class="dv">2</span>]])</span>
<span id="cb217-98"><a href="#cb217-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-99"><a href="#cb217-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-100"><a href="#cb217-100" aria-hidden="true" tabindex="-1"></a>ProjNarrIO <span class="sc">%&lt;&gt;%</span>  <span class="fu">as.numeric</span>() <span class="sc">%&gt;%</span> <span class="fu">matrix</span>(<span class="at">nrow =</span> <span class="dv">5</span>, <span class="at">ncol =</span> <span class="dv">5</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>,  <span class="at">dimnames =</span> <span class="fu">list</span>(descriptionnames, codenames))</span>
<span id="cb217-101"><a href="#cb217-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-102"><a href="#cb217-102" aria-hidden="true" tabindex="-1"></a>ProjNarrRegSales <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">A  =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">500</span>,   <span class="dv">0</span>,  <span class="dv">1000</span>,   <span class="dv">500</span>),  <span class="at">B =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>,    <span class="dv">200</span>,    <span class="dv">500</span>,    <span class="dv">200</span>) ) <span class="sc">%&gt;%</span> <span class="fu">t</span>() <span class="sc">%&gt;%</span> <span class="fu">as.matrix</span>()</span>
<span id="cb217-103"><a href="#cb217-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-104"><a href="#cb217-104" aria-hidden="true" tabindex="-1"></a>i_mat <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(ProjNarrIO)) <span class="sc">%&gt;%</span> <span class="fu">as.matrix</span>()</span>
<span id="cb217-105"><a href="#cb217-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-106"><a href="#cb217-106" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="fu">sweep</span>(ProjNarrIO[<span class="dv">1</span>, ] <span class="sc">%*%</span> <span class="fu">t</span>(ProjNarrRegSales), <span class="dv">1</span>, ProjNarrIO[<span class="dv">1</span>, ] <span class="sc">%*%</span> i_mat, <span class="st">"/"</span>)</span>
<span id="cb217-107"><a href="#cb217-107" aria-hidden="true" tabindex="-1"></a>rho <span class="ot">&lt;-</span> <span class="fu">sweep</span>(alpha, <span class="dv">2</span>, ProjNarrRegSales <span class="sc">%*%</span> i_mat, <span class="st">"/"</span>)</span>
<span id="cb217-108"><a href="#cb217-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-109"><a href="#cb217-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-110"><a href="#cb217-110" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(ProjNarrRegSales) <span class="ot">&lt;-</span> codenames</span>
<span id="cb217-111"><a href="#cb217-111" aria-hidden="true" tabindex="-1"></a>sample_RUC<span class="ot">&lt;-</span><span class="fu">cbind</span>(ProjNarrRegSales, <span class="fu">t</span>(alpha), <span class="fu">t</span>(rho))</span>
<span id="cb217-112"><a href="#cb217-112" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(sample_RUC)[<span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="st">"alpha"</span></span>
<span id="cb217-113"><a href="#cb217-113" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(sample_RUC)[<span class="dv">7</span>] <span class="ot">&lt;-</span> <span class="st">"rho"</span></span>
<span id="cb217-114"><a href="#cb217-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-115"><a href="#cb217-115" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-116"><a href="#cb217-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-117"><a href="#cb217-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-118"><a href="#cb217-118" aria-hidden="true" tabindex="-1"></a>**Generate Economic Catchment Area (ECA) codes** </span>
<span id="cb217-119"><a href="#cb217-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-120"><a href="#cb217-120" aria-hidden="true" tabindex="-1"></a>Since 1880, the Census Bureau has applied formal rules to categorize geographic areas as urban for the purposes of statistical reporting. The most recent version of this taxonomic schema classifies areas as urban areas (UA, densely settled with a population greater than 50,000) and urban clusters (UC, densely settled with populations greater than 2,500 and less than 50,000). <span class="kw">&lt;u&gt;</span> For as long as the Census Bureau has been defining urbanicity, rural has **ALWAYS** been the residual category<span class="kw">&lt;/u&gt;</span>: from the 2010 Census Urban-Rural Classification Criterion, “‘rural’ encompasses all population, housing, and territory not included within an urban area.”</span>
<span id="cb217-121"><a href="#cb217-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-122"><a href="#cb217-122" aria-hidden="true" tabindex="-1"></a>The construction of urban places follows a complex set of rules accounting for the attributes of urban land use and residential development patterns, but the intuition is fairly straight-forward. First, identify contiguous Census blocks (sometimes, tracts) above a minimum population density thereby defining a potential urban core. Then, continue to agglomerate adjacent-*ish* (again, there are complex rules allowing for hops, jumps, exclaves, enclaves, indentations, etc.) blocks/tracts meeting other density and population thresholds until the boundaries of the place are established. The population of this agglomeration then determines whether it is a UA, UC, or rural. The RUCA codes are a further refinement constructed by ERS to account for 1) the size of urban agglomerations and 2) resident commuting patterns, while applying the urban-rural typology employed by OMB. Thus, every UA is termed a Metropolitan Area Core. UCs are delimited by population into Micropolitan Area Core (10,000 to 49,999) and Small Town Core (2,500 to 9,999). Remaining blocks/tracts are then classified according to whether a high (more than 30%) or low (10% to 30%) percentage of residents commute to an urban core, as well as the type of core of the primary flow. Secondary codes are also assigned based upon the destination type of the secondary commuter flow.</span>
<span id="cb217-123"><a href="#cb217-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-124"><a href="#cb217-124" aria-hidden="true" tabindex="-1"></a>We propose to use core units as the basis for building Rural-Urban Economic Catchment Areas codes from InfoGroup and the Census of Agriculture in very much the same vein as ERS constructs the RUCA codes, but with a notable design distinction: we will classify tracts from low density to high density, rather than defining rural as a catch-all, non-urban residual. Specifically:</span>
<span id="cb217-125"><a href="#cb217-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-126"><a href="#cb217-126" aria-hidden="true" tabindex="-1"></a>1) We will define a *primary economic catchment area* (ECA) centered on each small UC core (RUCA 7) that includes associated commuting Census tracts (RUCA 8 and 9) and nearby rural tracts that include large employers in InfoGroup. The latter condition accommodates economic activities that may employ relatively large numbers of residents but are purposefully located far from residential areas, e.g., paper milling and government military installations. We will explore the sensitivity of our coding to various definitions of nearby, e.g. 5, 10, and 20 mile radii.</span>
<span id="cb217-127"><a href="#cb217-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-128"><a href="#cb217-128" aria-hidden="true" tabindex="-1"></a>2) We will use the Census of Agriculture to identify the *primary* crop and livestock production activities and the County Business Patterns to identify the presence of forestry and mining activity in rural Zip codes surrounding the primary ECA (the smallest published unit for both programs is the Zip code). We anticipate that for the overwhelming majority of the country, using the county as the basic unit will suffice for identifying agricultural, forestry, and extraction, but western counties are sufficiently large to benefit from a more disaggregated reporting unit.</span>
<span id="cb217-129"><a href="#cb217-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-130"><a href="#cb217-130" aria-hidden="true" tabindex="-1"></a>3) We will then use the most recent Use Tables published by BEA as part of its Input-Output Accounts program (2018 for 71 two- and three-digit NAICS industries and 2012 for 415 fourdigit NAICS industries) to calculate absolute and relative *rural use coefficients* for each *primary* ECA with respect to the agricultural, forestry, and extraction (AFE) activity in its vicinity.</span>
<span id="cb217-131"><a href="#cb217-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-132"><a href="#cb217-132" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">align</span><span class="ot">=</span><span class="st">"center"</span><span class="kw">&gt;</span></span>
<span id="cb217-133"><a href="#cb217-133" aria-hidden="true" tabindex="-1"></a>$\alpha^{r}_{i}  = \sum^{k} s^{k}_{i} \sum^{m} s^{m}_{i} \rho^{k}_{m}$ and $\rho^{r}_{i} = \sum^{k} s^{k}_{i} \left( \frac{\sum^{m} s^{m}_{i} \rho^{k}_{m}} {\sum^{m} \rho^{k}_{m} } \right)$ </span>
<span id="cb217-134"><a href="#cb217-134" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/p&gt;</span></span>
<span id="cb217-135"><a href="#cb217-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-136"><a href="#cb217-136" aria-hidden="true" tabindex="-1"></a>  where $s^{m}_{i}$ is the share of employment/sales for industry $m$ in business catchment area $i$ calculated from InfoGroup; $\rho^{k}_{m}$ is the use parameter for AFE activity $k$ in industry $m$ from the BEA Use Tables; $s^{k}_{i}$ is the share of agricultural or forestry activity $k$ of total AFE activities; and $M$ and $K$ are the set of non-AFE and AFE industries, respectively. </span>
<span id="cb217-137"><a href="#cb217-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-138"><a href="#cb217-138" aria-hidden="true" tabindex="-1"></a>  To illustrate, a simplified five-sector economy based on the BEA 2012 Use Table might be:</span>
<span id="cb217-139"><a href="#cb217-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-140"><a href="#cb217-140" aria-hidden="true" tabindex="-1"></a><span class="in">`r kable(ProjNarrIO, caption = "Use Factor")`</span></span>
<span id="cb217-141"><a href="#cb217-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-142"><a href="#cb217-142" aria-hidden="true" tabindex="-1"></a>4) We will then assign remaining rural tracts to *primary* ECAs using a gravity model based on the use coefficients defined above. Gravity models have been applied as far back as the 1850s (Carey, 1858) to describe social phenomena and continue to be used across disciplines (Erlander, 1980; Haynes and Fotheringham, 1984; Sen and Smith, 1995; Wilson 2000), including contemporary analyses of international trade (USITC, 2020). To illustrate, suppose that there were two *primary* ECAs with the following industry sales (in $1000s) and calculated rural use coefficients:</span>
<span id="cb217-143"><a href="#cb217-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-144"><a href="#cb217-144" aria-hidden="true" tabindex="-1"></a><span class="in">`r kable(sample_RUC, caption = "Industry Sales", digits = c(0, 0, 0, 0, 0, 1, 3))`</span></span>
<span id="cb217-145"><a href="#cb217-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-146"><a href="#cb217-146" aria-hidden="true" tabindex="-1"></a>  To simplify, suppose Area A were at 0 on the unit interval and Area B at 1 with all intervening  space representing rural tracts. A gravity approach based on the use coefficient would assign the intervening rural tracts on (0,<span class="in">`r round(alpha[1]/(alpha[1]+alpha[2]), 3)`</span>) to Area A and tracts (<span class="in">`r round(alpha[1]/(alpha[1]+alpha[2]), 3)`</span>,1) to Area B. In contrast, a gravity approach using the adjusted use coefficient would assign the intervening rural tracts on (0,<span class="in">`r round(rho[1]/(rho[1]+rho[2]), 3)`</span>) to Area A and tracts (<span class="in">`r round(rho[1]/(rho[1]+rho[2]), 3)`</span>,1) to Area B. More generally, for either use coefficient, we will treat the United States as a plane over the unit simplex and apply a gravity approach to assign rural tracts to any *primary* ECA. </span>
<span id="cb217-147"><a href="#cb217-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-148"><a href="#cb217-148" aria-hidden="true" tabindex="-1"></a>  A notable feature of this approach is that *primary* ECAs may exhibit sufficiently low gravity that they are effectively economic islands. For example, a small-town anchored by car manufacturing plant surrounded by cropland. Of course, that small-town may be associated with larger, discontiguous economic areas through the manufacturing supply chain, which will reveal itself at higher economic geographies described subsequently, but &lt;u&gt;**creating measures to make meaningful economic distinctions between population centers currently lumped as “small towns” is a valuable project output that will benefit policy-makers**<span class="kw">&lt;/u&gt;</span>.</span>
<span id="cb217-149"><a href="#cb217-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-150"><a href="#cb217-150" aria-hidden="true" tabindex="-1"></a>5) We will then move to assigning the remaining tracts, beginning with Micropolitan low commuting (RUCA 6) tracts. For each tract, we will calculate the following *total use coefficients*:</span>
<span id="cb217-151"><a href="#cb217-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-152"><a href="#cb217-152" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">align</span><span class="ot">=</span><span class="st">"center"</span><span class="kw">&gt;</span></span>
<span id="cb217-153"><a href="#cb217-153" aria-hidden="true" tabindex="-1"></a>$\rho_{ij} = \sum^{M} s^{m}_{i} \left( \frac{\sum^{m} s^{n}_{j} \rho^{n}_{i}} {\rho^{n}_{i} } \right)$,</span>
<span id="cb217-154"><a href="#cb217-154" aria-hidden="true" tabindex="-1"></a>$\rho_{ji} = \sum^{M} s^{m}_{j} \left( \frac{\sum^{m} s^{n}_{i} \rho^{n}_{j}} {\rho^{n}_{j} } \right)$,</span>
<span id="cb217-155"><a href="#cb217-155" aria-hidden="true" tabindex="-1"></a>$\rho_{ik} = \sum^{M} s^{m}_{i} \left( \frac{\sum^{m} s^{n}_{k} \rho^{n}_{i}} {\rho^{n}_{i} } \right)$,</span>
<span id="cb217-156"><a href="#cb217-156" aria-hidden="true" tabindex="-1"></a>$\rho_{ki} = \sum^{M} s^{m}_{k} \left( \frac{\sum^{m} s^{n}_{i} \rho^{n}_{k}} {\rho^{n}_{k} } \right)$</span>
<span id="cb217-157"><a href="#cb217-157" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/p&gt;</span></span>
<span id="cb217-158"><a href="#cb217-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-159"><a href="#cb217-159" aria-hidden="true" tabindex="-1"></a>  where $i$ denotes the tract, $j$ denotes the adjacent primary ECA, and $k$ denotes the Micropolitan core (RUCA 4) <span class="co">[</span><span class="ot">NB: There may be multiple adjacent *primary* ECA, so that for the general case of Z adjacent *primary* ECA, 2Z+2 total use coefficients are calculated</span><span class="co">]</span>. These coefficients summarize the economic flow to and from the tract. Thus, we will assign the tract to either the Micropolitan Core or the adjacent *primary* ECA according to the magnitude of the largest total use coefficients, or leave the tract as an economic island if flows are insufficiently strong, i.e., gravity is sufficiently weak.</span>
<span id="cb217-160"><a href="#cb217-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-161"><a href="#cb217-161" aria-hidden="true" tabindex="-1"></a>6) After assigning all Micropolitan and Metropolitan commuting tracts (RUCA 2, 3, and 5) following a similar approach to the one above, we will define *secondary* ECAs. To do so, we will again treat the United States as a plane with nodes defined by Micropolitan cores and *primary* ECAs attracted to those nodes by *total use coefficients*. *Primary* ECAs are assigned to *secondary* ECAs centered on Micropolitan cores when gravity is sufficiently strong. Next, contiguous groups of yet-unassigned *primary* ECAs with sufficiently strong gravity will be aggregated into *secondary* ECAs independent of a Micropolitan core; those without are classified as isolated.</span>
<span id="cb217-162"><a href="#cb217-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-163"><a href="#cb217-163" aria-hidden="true" tabindex="-1"></a>7) Step 6 is repeated with Metropolitan cores to define *tertiary* ECAs.  </span>
<span id="cb217-164"><a href="#cb217-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-165"><a href="#cb217-165" aria-hidden="true" tabindex="-1"></a>The approach described above is based on the three categories of urbanized places from the RUCA system, but it generalizes broadly to an N-level hierarchy of nodes where the nth ECA is defined by the parameter pair ($\rho_{n}$, $\theta_{n}$), the upper limit on the population of the core and the gravity threshold that defines economic islands, respectively. Refinements based on the former would permit the definition of small and large metropolitan cores, or even Megapolitan cores. The latter parameter can be varied according to moments of the use coefficient distribution (the lowest quintile or decile) or absolute values with a priori relevance, e.g., a parameter from a specified decay function in a formal model. We will implement the gravity model in Python, as it is open-source and with spatial modeling packages, e.g., <span class="co">[</span><span class="ot">SpInt</span><span class="co">](https://github.com/pysal/spint)</span> <span class="co">[</span><span class="ot">(Oshan 2016)</span><span class="co">](https://doi.org/10.18335/region.v3i2.175)</span> and <span class="co">[</span><span class="ot">GME</span><span class="co">](https://github.com/USITC-Gravity-Group/GME)</span> <span class="co">[</span><span class="ot">(USITC 2019)</span><span class="co">](http://dx.doi.org/10.2139/ssrn.3832208)</span>, that are already being used to model international trade, migration flows, and transportation networks.</span>
<span id="cb217-166"><a href="#cb217-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-167"><a href="#cb217-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-168"><a href="#cb217-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-169"><a href="#cb217-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-170"><a href="#cb217-170" aria-hidden="true" tabindex="-1"></a><span class="fu">### Toy IO </span></span>
<span id="cb217-171"><a href="#cb217-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-172"><a href="#cb217-172" aria-hidden="true" tabindex="-1"></a>The static Input-Output analysis, à la Wassily Leontief, poses the question: What level of output should each industry produce, such that it will satisfy the total demand of that industries output across all industries in an economy?</span>
<span id="cb217-173"><a href="#cb217-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-174"><a href="#cb217-174" aria-hidden="true" tabindex="-1"></a>Simplifying assumptions:</span>
<span id="cb217-175"><a href="#cb217-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-176"><a href="#cb217-176" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Each industry produces only one homogeneous commodity.</span>
<span id="cb217-177"><a href="#cb217-177" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Each industry uses a fixed input ratio.</span>
<span id="cb217-178"><a href="#cb217-178" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Each industry exhibits constant returns to scale.</span>
<span id="cb217-179"><a href="#cb217-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-180"><a href="#cb217-180" aria-hidden="true" tabindex="-1"></a>Suppose the **N**ational level economy is composed of 2 industries (e.g., **E**xtraction and **F**arming). Let the interindustry sales be given by,</span>
<span id="cb217-181"><a href="#cb217-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-182"><a href="#cb217-182" aria-hidden="true" tabindex="-1"></a>\begin{equation}</span>
<span id="cb217-183"><a href="#cb217-183" aria-hidden="true" tabindex="-1"></a>\underset{(i \times i)}{\mathbf{Z}} = </span>
<span id="cb217-184"><a href="#cb217-184" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-185"><a href="#cb217-185" aria-hidden="true" tabindex="-1"></a>    z_{11} &amp; z_{12} <span class="sc">\\</span> </span>
<span id="cb217-186"><a href="#cb217-186" aria-hidden="true" tabindex="-1"></a>    z_{21} &amp; z_{22} <span class="sc">\\</span> </span>
<span id="cb217-187"><a href="#cb217-187" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-188"><a href="#cb217-188" aria-hidden="true" tabindex="-1"></a>  = </span>
<span id="cb217-189"><a href="#cb217-189" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-190"><a href="#cb217-190" aria-hidden="true" tabindex="-1"></a>    150 &amp; 500 <span class="sc">\\</span> </span>
<span id="cb217-191"><a href="#cb217-191" aria-hidden="true" tabindex="-1"></a>    200 &amp; 100 <span class="sc">\\</span> </span>
<span id="cb217-192"><a href="#cb217-192" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-193"><a href="#cb217-193" aria-hidden="true" tabindex="-1"></a>\end{equation}</span>
<span id="cb217-194"><a href="#cb217-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-195"><a href="#cb217-195" aria-hidden="true" tabindex="-1"></a>Given the vector of total output $\mathbf{x}' = \begin{bmatrix} 1000 &amp; 2000  \end{bmatrix}$, the Direct Requirements matrix (input requirements), constructed as $\mathbf{A} = \mathbf{Z\hat{x}^{-1}}$, is given by, </span>
<span id="cb217-196"><a href="#cb217-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-197"><a href="#cb217-197" aria-hidden="true" tabindex="-1"></a>\begin{equation}</span>
<span id="cb217-198"><a href="#cb217-198" aria-hidden="true" tabindex="-1"></a>\underset{(i \times i)}{\mathbf{A}} = </span>
<span id="cb217-199"><a href="#cb217-199" aria-hidden="true" tabindex="-1"></a>    \begin{bmatrix} </span>
<span id="cb217-200"><a href="#cb217-200" aria-hidden="true" tabindex="-1"></a>    \frac{z_{11}}{x_{1}} &amp; \frac{z_{12}}{x_{2}} <span class="sc">\\</span> </span>
<span id="cb217-201"><a href="#cb217-201" aria-hidden="true" tabindex="-1"></a>    \frac{z_{21}}{x_{1}} &amp; \frac{z_{22}}{x_{2}} <span class="sc">\\</span> </span>
<span id="cb217-202"><a href="#cb217-202" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-203"><a href="#cb217-203" aria-hidden="true" tabindex="-1"></a>  = </span>
<span id="cb217-204"><a href="#cb217-204" aria-hidden="true" tabindex="-1"></a>    \begin{bmatrix} </span>
<span id="cb217-205"><a href="#cb217-205" aria-hidden="true" tabindex="-1"></a>    a_{11} &amp; a_{12} <span class="sc">\\</span> </span>
<span id="cb217-206"><a href="#cb217-206" aria-hidden="true" tabindex="-1"></a>    a_{21} &amp; a_{22} <span class="sc">\\</span> </span>
<span id="cb217-207"><a href="#cb217-207" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-208"><a href="#cb217-208" aria-hidden="true" tabindex="-1"></a>  = </span>
<span id="cb217-209"><a href="#cb217-209" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-210"><a href="#cb217-210" aria-hidden="true" tabindex="-1"></a>    0.15 &amp; 0.25 <span class="sc">\\</span> </span>
<span id="cb217-211"><a href="#cb217-211" aria-hidden="true" tabindex="-1"></a>    0.20 &amp; 0.05 <span class="sc">\\</span> </span>
<span id="cb217-212"><a href="#cb217-212" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-213"><a href="#cb217-213" aria-hidden="true" tabindex="-1"></a>\end{equation}</span>
<span id="cb217-214"><a href="#cb217-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-215"><a href="#cb217-215" aria-hidden="true" tabindex="-1"></a>The Total Requirements matrix (Leontief inverse), constructed as $\mathbf{L} = \left(\mathbf{I} - \mathbf{A}\right)^{-1}$, is given by, </span>
<span id="cb217-216"><a href="#cb217-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-217"><a href="#cb217-217" aria-hidden="true" tabindex="-1"></a>\begin{equation}</span>
<span id="cb217-218"><a href="#cb217-218" aria-hidden="true" tabindex="-1"></a>\underset{(i \times i)}{\mathbf{L}} = </span>
<span id="cb217-219"><a href="#cb217-219" aria-hidden="true" tabindex="-1"></a>    \begin{bmatrix} </span>
<span id="cb217-220"><a href="#cb217-220" aria-hidden="true" tabindex="-1"></a>    l_{11} &amp; l_{12} <span class="sc">\\</span> </span>
<span id="cb217-221"><a href="#cb217-221" aria-hidden="true" tabindex="-1"></a>    l_{21} &amp; l_{22} <span class="sc">\\</span> </span>
<span id="cb217-222"><a href="#cb217-222" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-223"><a href="#cb217-223" aria-hidden="true" tabindex="-1"></a>  = </span>
<span id="cb217-224"><a href="#cb217-224" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-225"><a href="#cb217-225" aria-hidden="true" tabindex="-1"></a>    1.2541254 &amp; 0.330033 <span class="sc">\\</span> </span>
<span id="cb217-226"><a href="#cb217-226" aria-hidden="true" tabindex="-1"></a>    0.2640264 &amp; 1.122112 <span class="sc">\\</span> </span>
<span id="cb217-227"><a href="#cb217-227" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-228"><a href="#cb217-228" aria-hidden="true" tabindex="-1"></a>\end{equation}</span>
<span id="cb217-229"><a href="#cb217-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-230"><a href="#cb217-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-231"><a href="#cb217-231" aria-hidden="true" tabindex="-1"></a>Given total output $\mathbf{x}$ and interindustry sales $\mathbf{Z}$, the exogenous final demand is simply the difference in total output and the row sums of interindustry transactions given by, $\mathbf{f} = \mathbf{x} - \mathbf{Zi}$ where $\mathbf{f}' = \begin{bmatrix} 350 &amp; 1700 \end{bmatrix}$</span>
<span id="cb217-232"><a href="#cb217-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-233"><a href="#cb217-233" aria-hidden="true" tabindex="-1"></a>Suppose, *final demand* for extraction were to increase to \$600 next year and decrease to \$1500 for farming, such that the change in final demand is given by, $\Delta\mathbf{f}' = \begin{bmatrix} 250 &amp; 200 \end{bmatrix}$. Using the Leontief inverse (total requirements) matrix, the expected change in total output of the economy is given by $\Delta\mathbf{x} = \mathbf{L}\Delta\mathbf{f}$ such that $\Delta\mathbf{x}' = \begin{bmatrix} 247.5248 &amp; -158.4158 \end{bmatrix}$</span>
<span id="cb217-234"><a href="#cb217-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-235"><a href="#cb217-235" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Toy open IO}</span></span>
<span id="cb217-236"><a href="#cb217-236" aria-hidden="true" tabindex="-1"></a><span class="co">#A simple I/O analysis "by hand" presuming given national accounts are in the form of raw interindustry flows where one must generate a direct requirements matrices (Technical Coefficients) and the total requirements matrix (Leontief inverse).</span></span>
<span id="cb217-237"><a href="#cb217-237" aria-hidden="true" tabindex="-1"></a><span class="co"># Note the national IO table at present is a domestic flow specification as such the interindustry transactions table is no longer representative of a technological matrix. It rather represents the intra-national interindustry transactions, which are determined not only by technological factors, but also by trade factors. As a consequence in the domestic-flow table the balance between supply and demand is made considering only domestic production.</span></span>
<span id="cb217-238"><a href="#cb217-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-239"><a href="#cb217-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-240"><a href="#cb217-240" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy Transaction matrix</span></span>
<span id="cb217-241"><a href="#cb217-241" aria-hidden="true" tabindex="-1"></a>Toy_Z_mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">150</span>, <span class="dv">500</span>, <span class="dv">200</span>, <span class="dv">100</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb217-242"><a href="#cb217-242" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Z_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Farm"</span>)</span>
<span id="cb217-243"><a href="#cb217-243" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Z_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Farm"</span>)</span>
<span id="cb217-244"><a href="#cb217-244" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Transaction matrix"</span>)</span>
<span id="cb217-245"><a href="#cb217-245" aria-hidden="true" tabindex="-1"></a>Toy_Z_mat</span>
<span id="cb217-246"><a href="#cb217-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-247"><a href="#cb217-247" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy Total Output vector</span></span>
<span id="cb217-248"><a href="#cb217-248" aria-hidden="true" tabindex="-1"></a>Toy_Total_Output <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>)</span>
<span id="cb217-249"><a href="#cb217-249" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Total Output vector"</span>)</span>
<span id="cb217-250"><a href="#cb217-250" aria-hidden="true" tabindex="-1"></a>Toy_Total_Output</span>
<span id="cb217-251"><a href="#cb217-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-252"><a href="#cb217-252" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy Final Demand vector</span></span>
<span id="cb217-253"><a href="#cb217-253" aria-hidden="true" tabindex="-1"></a>Toy_Final_Demand <span class="ot">&lt;-</span> Toy_Total_Output <span class="sc">-</span> (Toy_Z_mat <span class="sc">%*%</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Z_mat)))</span>
<span id="cb217-254"><a href="#cb217-254" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Final Demand vector"</span>)</span>
<span id="cb217-255"><a href="#cb217-255" aria-hidden="true" tabindex="-1"></a>Toy_Final_Demand</span>
<span id="cb217-256"><a href="#cb217-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-257"><a href="#cb217-257" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy Direct Requirements matrix</span></span>
<span id="cb217-258"><a href="#cb217-258" aria-hidden="true" tabindex="-1"></a>Toy_A_mat <span class="ot">&lt;-</span> Toy_Z_mat <span class="sc">%*%</span> <span class="fu">diag</span>(<span class="dv">1</span><span class="sc">/</span>Toy_Total_Output)</span>
<span id="cb217-259"><a href="#cb217-259" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_A_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Farm"</span>)</span>
<span id="cb217-260"><a href="#cb217-260" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_A_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Farm"</span>)</span>
<span id="cb217-261"><a href="#cb217-261" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Direct Requirements matrix"</span>)</span>
<span id="cb217-262"><a href="#cb217-262" aria-hidden="true" tabindex="-1"></a>Toy_A_mat</span>
<span id="cb217-263"><a href="#cb217-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-264"><a href="#cb217-264" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy Total Requirements matrix</span></span>
<span id="cb217-265"><a href="#cb217-265" aria-hidden="true" tabindex="-1"></a>Toy_L_mat <span class="ot">&lt;-</span> <span class="fu">solve</span>(<span class="fu">diag</span>(<span class="fu">nrow</span>(Toy_A_mat)) <span class="sc">-</span> Toy_A_mat)</span>
<span id="cb217-266"><a href="#cb217-266" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Total Requirements matrix"</span>)</span>
<span id="cb217-267"><a href="#cb217-267" aria-hidden="true" tabindex="-1"></a>Toy_L_mat</span>
<span id="cb217-268"><a href="#cb217-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-269"><a href="#cb217-269" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy change in Final Demand vector</span></span>
<span id="cb217-270"><a href="#cb217-270" aria-hidden="true" tabindex="-1"></a>Toy_Delta_Demand <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">250</span>, <span class="sc">-</span><span class="dv">200</span>)</span>
<span id="cb217-271"><a href="#cb217-271" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Final Demand vector change"</span>)</span>
<span id="cb217-272"><a href="#cb217-272" aria-hidden="true" tabindex="-1"></a>Toy_Delta_Demand</span>
<span id="cb217-273"><a href="#cb217-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-274"><a href="#cb217-274" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy change in Total Output vector</span></span>
<span id="cb217-275"><a href="#cb217-275" aria-hidden="true" tabindex="-1"></a>Toy_Delta_Output <span class="ot">&lt;-</span> Toy_L_mat <span class="sc">%*%</span> Toy_Delta_Demand</span>
<span id="cb217-276"><a href="#cb217-276" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Total Output vector change"</span>)</span>
<span id="cb217-277"><a href="#cb217-277" aria-hidden="true" tabindex="-1"></a>Toy_Delta_Output</span>
<span id="cb217-278"><a href="#cb217-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-279"><a href="#cb217-279" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-280"><a href="#cb217-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-281"><a href="#cb217-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-282"><a href="#cb217-282" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Toy necessary and sufficient tests}</span></span>
<span id="cb217-283"><a href="#cb217-283" aria-hidden="true" tabindex="-1"></a><span class="co"># Note, to allow for the presence of final demand and primary inputs, in an open model, the sum of each column in $A$ must be less than 1. </span></span>
<span id="cb217-284"><a href="#cb217-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-285"><a href="#cb217-285" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple sufficient, but not necessary condition of sustainability. All must be TRUE.</span></span>
<span id="cb217-286"><a href="#cb217-286" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">colSums</span>(Toy_A_mat) <span class="sc">&lt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> {<span class="fu">paste0</span>(<span class="st">"Technology matrix structure passes sufficient test of sustainability: "</span>, . )}</span>
<span id="cb217-287"><a href="#cb217-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-288"><a href="#cb217-288" aria-hidden="true" tabindex="-1"></a><span class="co">#Hawkins – Simon condition check. All must be TRUE.</span></span>
<span id="cb217-289"><a href="#cb217-289" aria-hidden="true" tabindex="-1"></a><span class="fu">local</span>({</span>
<span id="cb217-290"><a href="#cb217-290" aria-hidden="true" tabindex="-1"></a>PM <span class="ot">=</span> <span class="cn">NULL</span></span>
<span id="cb217-291"><a href="#cb217-291" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(n <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_A_mat)){</span>
<span id="cb217-292"><a href="#cb217-292" aria-hidden="true" tabindex="-1"></a>  PM[<span class="dv">1</span><span class="sc">:</span>n] <span class="ot">=</span> (<span class="fu">det</span>((<span class="fu">diag</span>(<span class="fu">nrow</span>(Toy_A_mat)) <span class="sc">-</span> Toy_A_mat)[<span class="dv">1</span><span class="sc">:</span>n,<span class="dv">1</span><span class="sc">:</span>n]) <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb217-293"><a href="#cb217-293" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-294"><a href="#cb217-294" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">all</span>(PM) <span class="sc">&amp;</span> (<span class="fu">diag</span>(<span class="fu">diag</span>(<span class="fu">nrow</span>(Toy_A_mat)) <span class="sc">-</span> Toy_A_mat) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">&amp;</span> (<span class="fu">det</span>(<span class="fu">diag</span>(<span class="fu">nrow</span>(Toy_A_mat)) <span class="sc">-</span> Toy_A_mat) <span class="sc">&gt;</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> {<span class="fu">paste0</span>(<span class="st">"Leontief matrix structure passes necessary and sufficient test of practibility and viability: "</span>, . )}</span>
<span id="cb217-295"><a href="#cb217-295" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb217-296"><a href="#cb217-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-297"><a href="#cb217-297" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-298"><a href="#cb217-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-299"><a href="#cb217-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-300"><a href="#cb217-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-301"><a href="#cb217-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-302"><a href="#cb217-302" aria-hidden="true" tabindex="-1"></a><span class="fu">### Toy TUC </span></span>
<span id="cb217-303"><a href="#cb217-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-304"><a href="#cb217-304" aria-hidden="true" tabindex="-1"></a>**Retrospective** </span>
<span id="cb217-305"><a href="#cb217-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-306"><a href="#cb217-306" aria-hidden="true" tabindex="-1"></a>One objective of the project narative is to quantify and match the economic connectedness of Micropolitian and Urban clusters to large Metropolitan economies. This is done by analyzing how well the commodity output mix of Micropolitian and Urban clusters to the commodity uses of industries in large Metropolitan cores.</span>
<span id="cb217-307"><a href="#cb217-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-308"><a href="#cb217-308" aria-hidden="true" tabindex="-1"></a>In practice, for two *primary ECAs* $A$ and $B$, we construct the absolute rural use coefficients as:</span>
<span id="cb217-309"><a href="#cb217-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-310"><a href="#cb217-310" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">align</span><span class="ot">=</span><span class="st">"center"</span><span class="kw">&gt;</span></span>
<span id="cb217-311"><a href="#cb217-311" aria-hidden="true" tabindex="-1"></a>$\displaystyle \alpha^{r}_{A} = \frac{\sum^{n}_{j=1} u_{cj} s_{Aj}} {\sum^{n}_{j=1} u_{cj}}$,</span>
<span id="cb217-312"><a href="#cb217-312" aria-hidden="true" tabindex="-1"></a>$\displaystyle \alpha^{r}_{B} = \frac{\sum^{n}_{j=1} u_{cj} s_{Bj}} {\sum^{n}_{j=1} u_{cj}}$</span>
<span id="cb217-313"><a href="#cb217-313" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/p&gt;</span></span>
<span id="cb217-314"><a href="#cb217-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-315"><a href="#cb217-315" aria-hidden="true" tabindex="-1"></a>where $u_{cj}$ the the value of purchases of a single commodity $c$ by industry $j$ from the BEA's the *Use* matrix, and $s_{Aj}$ and $s_{Bj}$ are the annual sales of industry $j$ in *primary* ECA regions $A$ and $B$, for $j = 1, \dots, n$ industries. Similarly, we construct the relative rural use coefficients as:</span>
<span id="cb217-316"><a href="#cb217-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-317"><a href="#cb217-317" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">align</span><span class="ot">=</span><span class="st">"center"</span><span class="kw">&gt;</span></span>
<span id="cb217-318"><a href="#cb217-318" aria-hidden="true" tabindex="-1"></a>$\displaystyle \rho^{r}_{A} = \frac{\alpha^{r}_{A}} {\sum^{n}_{j=1} s_{Aj}}$,</span>
<span id="cb217-319"><a href="#cb217-319" aria-hidden="true" tabindex="-1"></a>$\displaystyle \rho^{r}_{B} = \frac{\alpha^{r}_{B}} {\sum^{n}_{j=1} s_{Bj}}$</span>
<span id="cb217-320"><a href="#cb217-320" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/p&gt;</span></span>
<span id="cb217-321"><a href="#cb217-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-322"><a href="#cb217-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-323"><a href="#cb217-323" aria-hidden="true" tabindex="-1"></a>In the absolute specification, the numerator is a uniform modification of the elements in a row of the national *Use* matrix. The national value of purchases of commodity $c$ by each industry $j$ weighted by the regional value of "sales" by each industry $j$ (CBP will offer values of county-level industry employment, Q1 payroll, and annual payroll). This is divided by the total intermediate value of commodity $c$ at the national level.</span>
<span id="cb217-324"><a href="#cb217-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-325"><a href="#cb217-325" aria-hidden="true" tabindex="-1"></a>The relative specification then takes the absolute coefficient divided by the sum of the regional "sales" by each industry $j$. </span>
<span id="cb217-326"><a href="#cb217-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-327"><a href="#cb217-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-328"><a href="#cb217-328" aria-hidden="true" tabindex="-1"></a>**Toy Model**</span>
<span id="cb217-329"><a href="#cb217-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-330"><a href="#cb217-330" aria-hidden="true" tabindex="-1"></a>Suppose there is 1 **N**ational level economy composed of 2 industries (e.g., Hydrocarbon **E**xtraction and **F**arming), 3 commodities (e.g., **G**asoline, **H**ogs,  and **I**ce cream), and 4 regions (e.g., **D**ane county (Madison , WI), **C**ook county (Chicago, IL), **B**rown County (Green Bay, WI), and the **A**ll the rest as a collective residual).  </span>
<span id="cb217-331"><a href="#cb217-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-332"><a href="#cb217-332" aria-hidden="true" tabindex="-1"></a>Available data consists of a $3 \times 2$ **N**ational level commodity by industry *Use table* ($\underset{(3 \times 2)}{\mathbf{U}} = [u_{ij}]$) that depicts the value of purchases of commodity  $i$  by industry  $j$.  (In conjunction with a column vector of total industry outputs ($\underset{(2 \times 1)}{\mathbf{x}} = [x_{j}]$),  this gives  rise to the standard *Use coefficients* $\mathbf{B} = [b_{ij}] = u_{ij}/x_{j}$ in which column $j$ represents the value of inputs of each commodity per dollar’s worth  $\mathbf{B}$ are therefore commodities-by-industries.) Similarly, other available data consists of a  $2 \times 3$ **N**ational level commodity by industry *Make table* ($\underset{(2 \times 3)}{\mathbf{V}} = <span class="co">[</span><span class="ot">v_{ij}</span><span class="co">]</span>$) that depicts  the value of output of commodity $j$ that is produced  by industry $i$. (Note, the row  sums of $\mathbf{V}$ are total industry output $\mathbf{x}$ and column sums of $\mathbf{V}$ are total <span class="co">[</span><span class="ot">commodity</span><span class="co">]</span> output $\mathbf{q}'$.)</span>
<span id="cb217-333"><a href="#cb217-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-334"><a href="#cb217-334" aria-hidden="true" tabindex="-1"></a>Available data of at the region level consists of sector specific industry activity ($\underset{(2 \times 4)}{\mathbf{x}^r} = <span class="co">[</span><span class="ot">x^{r}_{j}</span><span class="co">]</span>$) in the form of either employment, payroll, or simply number of establishments. </span>
<span id="cb217-335"><a href="#cb217-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-336"><a href="#cb217-336" aria-hidden="true" tabindex="-1"></a>As such let,  </span>
<span id="cb217-337"><a href="#cb217-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-338"><a href="#cb217-338" aria-hidden="true" tabindex="-1"></a>\begin{equation}</span>
<span id="cb217-339"><a href="#cb217-339" aria-hidden="true" tabindex="-1"></a>\underset{(c \times i)}{\mathbf{U}^{n}} = </span>
<span id="cb217-340"><a href="#cb217-340" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-341"><a href="#cb217-341" aria-hidden="true" tabindex="-1"></a>    u^{n}_{11} &amp; u^{n}_{12} <span class="sc">\\</span> </span>
<span id="cb217-342"><a href="#cb217-342" aria-hidden="true" tabindex="-1"></a>    u^{n}_{21} &amp; u^{n}_{22} <span class="sc">\\</span> </span>
<span id="cb217-343"><a href="#cb217-343" aria-hidden="true" tabindex="-1"></a>    u^{n}_{31} &amp; u^{n}_{32} <span class="sc">\\</span> </span>
<span id="cb217-344"><a href="#cb217-344" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-345"><a href="#cb217-345" aria-hidden="true" tabindex="-1"></a>  = </span>
<span id="cb217-346"><a href="#cb217-346" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-347"><a href="#cb217-347" aria-hidden="true" tabindex="-1"></a>    u^{n}_{GE} &amp; u^{n}_{GF} <span class="sc">\\</span> </span>
<span id="cb217-348"><a href="#cb217-348" aria-hidden="true" tabindex="-1"></a>    u^{n}_{HE} &amp; u^{n}_{HF} <span class="sc">\\</span> </span>
<span id="cb217-349"><a href="#cb217-349" aria-hidden="true" tabindex="-1"></a>    u^{n}_{IE} &amp; u^{n}_{IF} <span class="sc">\\</span> </span>
<span id="cb217-350"><a href="#cb217-350" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}, \;  \text{ and} \; \;</span>
<span id="cb217-351"><a href="#cb217-351" aria-hidden="true" tabindex="-1"></a>\underset{(i \times g)}{\mathbf{X}^{r}_{empl/pay}} = </span>
<span id="cb217-352"><a href="#cb217-352" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-353"><a href="#cb217-353" aria-hidden="true" tabindex="-1"></a>    x^{1}_{1} &amp; x^{2}_{1} &amp; x^{3}_{1} &amp; x^{4}_{1} <span class="sc">\\</span> </span>
<span id="cb217-354"><a href="#cb217-354" aria-hidden="true" tabindex="-1"></a>    x^{1}_{2} &amp; x^{2}_{2} &amp; x^{3}_{2} &amp; x^{4}_{2} <span class="sc">\\</span> </span>
<span id="cb217-355"><a href="#cb217-355" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-356"><a href="#cb217-356" aria-hidden="true" tabindex="-1"></a>  = </span>
<span id="cb217-357"><a href="#cb217-357" aria-hidden="true" tabindex="-1"></a>    \begin{bmatrix} </span>
<span id="cb217-358"><a href="#cb217-358" aria-hidden="true" tabindex="-1"></a>    x^{A}_{E} &amp; x^{B}_{E} &amp; x^{C}_{E} &amp; x^{D}_{E} <span class="sc">\\</span> </span>
<span id="cb217-359"><a href="#cb217-359" aria-hidden="true" tabindex="-1"></a>    x^{A}_{F} &amp; x^{B}_{F} &amp; x^{C}_{F} &amp; x^{D}_{F} <span class="sc">\\</span>  </span>
<span id="cb217-360"><a href="#cb217-360" aria-hidden="true" tabindex="-1"></a>    \end{bmatrix}</span>
<span id="cb217-361"><a href="#cb217-361" aria-hidden="true" tabindex="-1"></a>\end{equation}</span>
<span id="cb217-362"><a href="#cb217-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-363"><a href="#cb217-363" aria-hidden="true" tabindex="-1"></a>As such the project narrative use coefficients (as demonstrated in the excel trial) are:</span>
<span id="cb217-364"><a href="#cb217-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-365"><a href="#cb217-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-366"><a href="#cb217-366" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-367"><a href="#cb217-367" aria-hidden="true" tabindex="-1"></a>\underset{(c \times g)}{\mathbf{\alpha}} = (\hat{\mathbf{Ui}}^{n})^{-1}\mathbf{U}^{n}\mathbf{X}^{r} = </span>
<span id="cb217-368"><a href="#cb217-368" aria-hidden="true" tabindex="-1"></a>\begin{bmatrix} </span>
<span id="cb217-369"><a href="#cb217-369" aria-hidden="true" tabindex="-1"></a>    \frac{u^{n}_{GE}x^{A}_{E}+u^{n}_{GF}x^{A}_{F}}{u^{n}_{GE}+u^{n}_{GF}} &amp; \frac{u^{n}_{GE}x^{B}_{E}+u^{n}_{GF}x^{B}_{F}}{u^{n}_{GE}+u^{n}_{GF}} &amp; \frac{u^{n}_{GE}x^{C}_{E}+u^{n}_{GF}x^{C}_{F}}{u^{n}_{GE}+u^{n}_{GF}} &amp; \frac{u^{n}_{GE}x^{D}_{E}+u^{n}_{GF}x^{D}_{F}}{u^{n}_{GE}+u^{n}_{GF}} <span class="sc">\\</span> </span>
<span id="cb217-370"><a href="#cb217-370" aria-hidden="true" tabindex="-1"></a>    \frac{u^{n}_{HE}x^{A}_{E}+u^{n}_{HF}x^{A}_{F}}{u^{n}_{HE}+u^{n}_{HF}} &amp; \frac{u^{n}_{HE}x^{B}_{E}+u^{n}_{HF}x^{B}_{F}}{u^{n}_{HE}+u^{n}_{HF}} &amp; \frac{u^{n}_{HE}x^{C}_{E}+u^{n}_{HF}x^{C}_{F}}{u^{n}_{HE}+u^{n}_{HF}} &amp; \frac{u^{n}_{HE}x^{D}_{E}+u^{n}_{HF}x^{D}_{F}}{u^{n}_{HE}+u^{n}_{HF}} <span class="sc">\\</span> </span>
<span id="cb217-371"><a href="#cb217-371" aria-hidden="true" tabindex="-1"></a>    \frac{u^{n}_{IE}x^{A}_{E}+u^{n}_{IF}x^{A}_{F}}{u^{n}_{IE}+u^{n}_{IF}} &amp; \frac{u^{n}_{IE}x^{B}_{E}+u^{n}_{IF}x^{B}_{F}}{u^{n}_{IE}+u^{n}_{IF}} &amp; \frac{u^{n}_{IE}x^{C}_{E}+u^{n}_{IF}x^{C}_{F}}{u^{n}_{IE}+u^{n}_{IF}} &amp; \frac{u^{n}_{IE}x^{D}_{E}+u^{n}_{IF}x^{D}_{F}}{u^{n}_{IE}+u^{n}_{IF}} <span class="sc">\\</span></span>
<span id="cb217-372"><a href="#cb217-372" aria-hidden="true" tabindex="-1"></a>\end{bmatrix}</span>
<span id="cb217-373"><a href="#cb217-373" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-374"><a href="#cb217-374" aria-hidden="true" tabindex="-1"></a>and </span>
<span id="cb217-375"><a href="#cb217-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-376"><a href="#cb217-376" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-377"><a href="#cb217-377" aria-hidden="true" tabindex="-1"></a>\underset{(c \times g)}{\mathbf{\rho}} = (\hat{\mathbf{Ui}}^{n})^{-1}\mathbf{U}^{n}\mathbf{X}^{r}(\hat{\mathbf{iX}}^{r})^{-1} = </span>
<span id="cb217-378"><a href="#cb217-378" aria-hidden="true" tabindex="-1"></a>\begin{bmatrix} </span>
<span id="cb217-379"><a href="#cb217-379" aria-hidden="true" tabindex="-1"></a>    \frac{u^{n}_{GE}x^{A}_{E}+u^{n}_{GF}x^{A}_{F}}{(u^{n}_{GE}+u^{n}_{GF})(x^{A}_{E} + x^{A}_{F})} &amp; \frac{u^{n}_{GE}x^{B}_{E}+u^{n}_{GF}x^{B}_{F}}{(u^{n}_{GE}+u^{n}_{GF})(x^{B}_{E} + x^{B}_{F})} &amp;  \frac{u^{n}_{GE}x^{C}_{E}+u^{n}_{GF}x^{C}_{F}}{(u^{n}_{GE}+u^{n}_{GF})(x^{C}_{E} + x^{C}_{F})} &amp; \frac{u^{n}_{GE}x^{D}_{E}+u^{n}_{GF}x^{D}_{F}}{(u^{n}_{GE}+u^{n}_{GF})(x^{D}_{E} + x^{D}_{F})} <span class="sc">\\</span> </span>
<span id="cb217-380"><a href="#cb217-380" aria-hidden="true" tabindex="-1"></a>    \frac{u^{n}_{HE}x^{A}_{E}+u^{n}_{HF}x^{A}_{F}}{(u^{n}_{HE}+u^{n}_{HF})(x^{A}_{E} + x^{A}_{F})} &amp; \frac{u^{n}_{HE}x^{B}_{E}+u^{n}_{HF}x^{B}_{F}}{(u^{n}_{HE}+u^{n}_{HF})(x^{B}_{E} + x^{B}_{F})} &amp; \frac{u^{n}_{HE}x^{C}_{E}+u^{n}_{HF}x^{C}_{F}}{(u^{n}_{HE}+u^{n}_{HF})(x^{C}_{E} + x^{C}_{F})} &amp; \frac{u^{n}_{HE}x^{D}_{E}+u^{n}_{HF}x^{D}_{F}}{(u^{n}_{HE}+u^{n}_{HF})(x^{D}_{E} + x^{D}_{F})} <span class="sc">\\</span> </span>
<span id="cb217-381"><a href="#cb217-381" aria-hidden="true" tabindex="-1"></a>    \frac{u^{n}_{IE}x^{A}_{E}+u^{n}_{IF}x^{A}_{F}}{(u^{n}_{IE}+u^{n}_{IF})(x^{A}_{E} + x^{A}_{F})} &amp; \frac{u^{n}_{IE}x^{B}_{E}+u^{n}_{IF}x^{B}_{F}}{(u^{n}_{IE}+u^{n}_{IF})(x^{B}_{E} + x^{B}_{F})} &amp; \frac{u^{n}_{IE}x^{C}_{E}+u^{n}_{IF}x^{C}_{F}}{(u^{n}_{IE}+u^{n}_{IF})(x^{C}_{E} + x^{C}_{F})} &amp; \frac{u^{n}_{IE}x^{D}_{E}+u^{n}_{IF}x^{D}_{F}}{(x^{C}_{E} + x^{C}_{F})(x^{D}_{E} + x^{D}_{F})} <span class="sc">\\</span></span>
<span id="cb217-382"><a href="#cb217-382" aria-hidden="true" tabindex="-1"></a>\end{bmatrix}</span>
<span id="cb217-383"><a href="#cb217-383" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-384"><a href="#cb217-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-385"><a href="#cb217-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-386"><a href="#cb217-386" aria-hidden="true" tabindex="-1"></a>**What are the interpretations of these coefficients  explicitly?**</span>
<span id="cb217-387"><a href="#cb217-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-388"><a href="#cb217-388" aria-hidden="true" tabindex="-1"></a>From here we can ask the question: Is Madison more economically connected to Chicago or Green Bay or is it an economic island? More specifically, is the commodity(?) output (mix?) of Madison more congruent with the commodity(?) output (mix?) of Chicago or Green Bay?  (Note: there is no claim/evidence of trade and commodity flows across space using this specification, instead we are measuring possible (one direction) sector compatibility.)</span>
<span id="cb217-389"><a href="#cb217-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-390"><a href="#cb217-390" aria-hidden="true" tabindex="-1"></a>Given the commodity by geography, relative use coefficient matrix $\mathbf{\rho}$, we can now construct a geography by geography (from-to) score for each commodity given by:</span>
<span id="cb217-391"><a href="#cb217-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-392"><a href="#cb217-392" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-393"><a href="#cb217-393" aria-hidden="true" tabindex="-1"></a>\mathbf{\phi}_{Gasoline} = \hat{\rho}_{G}\mathbf{i}\mathbf{i}'[\hat{\rho}_{G}\mathbf{i}\mathbf{i}'+\hat{\rho}'_{G}\mathbf{i}\mathbf{i}']^{-1} = </span>
<span id="cb217-394"><a href="#cb217-394" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-395"><a href="#cb217-395" aria-hidden="true" tabindex="-1"></a>    \frac{\rho_{G}^{A}}{\rho_{G}^{A} + \rho_{G}^{A}} &amp; \frac{\rho_{G}^{A}}{\rho_{G}^{A} + \rho_{G}^{B}} &amp; \frac{\rho_{G}^{A}}{\rho_{G}^{A} + \rho_{G}^{C}} &amp; \frac{\rho_{G}^{A}}{\rho_{G}^{A} + \rho_{G}^{D}} <span class="sc">\\</span></span>
<span id="cb217-396"><a href="#cb217-396" aria-hidden="true" tabindex="-1"></a>    \frac{\rho_{G}^{B}}{\rho_{G}^{B} + \rho_{G}^{A}} &amp; \frac{\rho_{G}^{B}}{\rho_{G}^{B} + \rho_{G}^{B}} &amp; \frac{\rho_{G}^{B}}{\rho_{G}^{B} + \rho_{G}^{C}} &amp; \frac{\rho_{G}^{B}}{\rho_{G}^{B} + \rho_{G}^{D}} <span class="sc">\\</span></span>
<span id="cb217-397"><a href="#cb217-397" aria-hidden="true" tabindex="-1"></a>    \frac{\rho_{G}^{C}}{\rho_{G}^{C} + \rho_{G}^{A}} &amp; \frac{\rho_{G}^{C}}{\rho_{G}^{C} + \rho_{G}^{B}} &amp; \frac{\rho_{G}^{C}}{\rho_{G}^{C} + \rho_{G}^{C}} &amp; \frac{\rho_{G}^{C}}{\rho_{G}^{C} + \rho_{G}^{D}} <span class="sc">\\</span></span>
<span id="cb217-398"><a href="#cb217-398" aria-hidden="true" tabindex="-1"></a>    \frac{\rho_{G}^{D}}{\rho_{G}^{D} + \rho_{G}^{A}} &amp; \frac{\rho_{G}^{D}}{\rho_{G}^{D} + \rho_{G}^{B}} &amp; \frac{\rho_{G}^{D}}{\rho_{G}^{D} + \rho_{G}^{C}} &amp; \frac{\rho_{G}^{D}}{\rho_{G}^{D} + \rho_{G}^{D}} <span class="sc">\\</span></span>
<span id="cb217-399"><a href="#cb217-399" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-400"><a href="#cb217-400" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-401"><a href="#cb217-401" aria-hidden="true" tabindex="-1"></a>The maximum value by row of $\mathbf{\phi}_{G}$ determines which typology each region is assigned on a per commodity basis.</span>
<span id="cb217-402"><a href="#cb217-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-403"><a href="#cb217-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-404"><a href="#cb217-404" aria-hidden="true" tabindex="-1"></a>Similarly the other commodities are given by:</span>
<span id="cb217-405"><a href="#cb217-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-406"><a href="#cb217-406" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-407"><a href="#cb217-407" aria-hidden="true" tabindex="-1"></a>\mathbf{\phi}_{Hogs} = \hat{\rho}_{H}\mathbf{i}\mathbf{i}'[\hat{\rho}_{H}\mathbf{i}\mathbf{i}'+\hat{\rho}'_{H}\mathbf{i}\mathbf{i}']^{-1} = </span>
<span id="cb217-408"><a href="#cb217-408" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-409"><a href="#cb217-409" aria-hidden="true" tabindex="-1"></a>    \frac{\rho_{H}^{A}}{\rho_{H}^{A} + \rho_{H}^{A}} &amp; \frac{\rho_{H}^{A}}{\rho_{H}^{A} + \rho_{H}^{B}} &amp; \frac{\rho_{H}^{A}}{\rho_{H}^{A} + \rho_{H}^{C}} &amp; \frac{\rho_{H}^{A}}{\rho_{H}^{A} + \rho_{H}^{D}} <span class="sc">\\</span></span>
<span id="cb217-410"><a href="#cb217-410" aria-hidden="true" tabindex="-1"></a>    \frac{\rho_{H}^{B}}{\rho_{H}^{B} + \rho_{H}^{A}} &amp; \frac{\rho_{H}^{B}}{\rho_{H}^{B} + \rho_{H}^{B}} &amp; \frac{\rho_{H}^{B}}{\rho_{H}^{B} + \rho_{H}^{C}} &amp; \frac{\rho_{H}^{B}}{\rho_{H}^{B} + \rho_{H}^{D}} <span class="sc">\\</span></span>
<span id="cb217-411"><a href="#cb217-411" aria-hidden="true" tabindex="-1"></a>    \frac{\rho_{H}^{C}}{\rho_{H}^{C} + \rho_{H}^{A}} &amp; \frac{\rho_{H}^{C}}{\rho_{H}^{C} + \rho_{H}^{B}} &amp; \frac{\rho_{H}^{C}}{\rho_{H}^{C} + \rho_{H}^{C}} &amp; \frac{\rho_{H}^{C}}{\rho_{H}^{C} + \rho_{H}^{D}} <span class="sc">\\</span></span>
<span id="cb217-412"><a href="#cb217-412" aria-hidden="true" tabindex="-1"></a>    \frac{\rho_{H}^{D}}{\rho_{H}^{D} + \rho_{H}^{A}} &amp; \frac{\rho_{H}^{D}}{\rho_{H}^{D} + \rho_{H}^{B}} &amp; \frac{\rho_{H}^{D}}{\rho_{H}^{D} + \rho_{H}^{C}} &amp; \frac{\rho_{H}^{D}}{\rho_{H}^{D} + \rho_{H}^{D}} <span class="sc">\\</span></span>
<span id="cb217-413"><a href="#cb217-413" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-414"><a href="#cb217-414" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-415"><a href="#cb217-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-416"><a href="#cb217-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-417"><a href="#cb217-417" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-418"><a href="#cb217-418" aria-hidden="true" tabindex="-1"></a>\mathbf{\phi}_{Ice cream} = \hat{\rho}_{I}\mathbf{i}\mathbf{i}'[\hat{\rho}_{I}\mathbf{i}\mathbf{i}'+\hat{\rho}'_{I}\mathbf{i}\mathbf{i}']^{-1} = </span>
<span id="cb217-419"><a href="#cb217-419" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-420"><a href="#cb217-420" aria-hidden="true" tabindex="-1"></a>    \frac{\rho_{I}^{A}}{\rho_{I}^{A} + \rho_{I}^{A}} &amp; \frac{\rho_{I}^{A}}{\rho_{I}^{A} + \rho_{I}^{B}} &amp; \frac{\rho_{I}^{A}}{\rho_{I}^{A} + \rho_{I}^{C}} &amp; \frac{\rho_{I}^{A}}{\rho_{I}^{A} + \rho_{I}^{D}} <span class="sc">\\</span></span>
<span id="cb217-421"><a href="#cb217-421" aria-hidden="true" tabindex="-1"></a>    \frac{\rho_{I}^{B}}{\rho_{I}^{B} + \rho_{I}^{A}} &amp; \frac{\rho_{I}^{B}}{\rho_{I}^{B} + \rho_{I}^{B}} &amp; \frac{\rho_{I}^{B}}{\rho_{I}^{B} + \rho_{I}^{C}} &amp; \frac{\rho_{I}^{B}}{\rho_{I}^{B} + \rho_{I}^{D}} <span class="sc">\\</span></span>
<span id="cb217-422"><a href="#cb217-422" aria-hidden="true" tabindex="-1"></a>    \frac{\rho_{I}^{C}}{\rho_{I}^{C} + \rho_{I}^{A}} &amp; \frac{\rho_{I}^{C}}{\rho_{I}^{C} + \rho_{I}^{B}} &amp; \frac{\rho_{I}^{C}}{\rho_{I}^{C} + \rho_{I}^{C}} &amp; \frac{\rho_{I}^{C}}{\rho_{I}^{C} + \rho_{I}^{D}} <span class="sc">\\</span></span>
<span id="cb217-423"><a href="#cb217-423" aria-hidden="true" tabindex="-1"></a>    \frac{\rho_{I}^{D}}{\rho_{I}^{D} + \rho_{I}^{A}} &amp; \frac{\rho_{I}^{D}}{\rho_{I}^{D} + \rho_{I}^{B}} &amp; \frac{\rho_{I}^{D}}{\rho_{I}^{D} + \rho_{I}^{C}} &amp; \frac{\rho_{I}^{D}}{\rho_{I}^{D} + \rho_{I}^{D}} <span class="sc">\\</span></span>
<span id="cb217-424"><a href="#cb217-424" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-425"><a href="#cb217-425" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-426"><a href="#cb217-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-427"><a href="#cb217-427" aria-hidden="true" tabindex="-1"></a>Such that </span>
<span id="cb217-428"><a href="#cb217-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-429"><a href="#cb217-429" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-430"><a href="#cb217-430" aria-hidden="true" tabindex="-1"></a>\mathbf{\phi} = </span>
<span id="cb217-431"><a href="#cb217-431" aria-hidden="true" tabindex="-1"></a>\begin{bmatrix}</span>
<span id="cb217-432"><a href="#cb217-432" aria-hidden="true" tabindex="-1"></a>\mathbf{\phi}_{G} &amp; 0 &amp; 0 <span class="sc">\\</span></span>
<span id="cb217-433"><a href="#cb217-433" aria-hidden="true" tabindex="-1"></a>0 &amp; \mathbf{\phi}_{H} &amp; 0 <span class="sc">\\</span></span>
<span id="cb217-434"><a href="#cb217-434" aria-hidden="true" tabindex="-1"></a>0 &amp; 0 &amp; \mathbf{\phi}_{I} <span class="sc">\\</span></span>
<span id="cb217-435"><a href="#cb217-435" aria-hidden="true" tabindex="-1"></a>\end{bmatrix}</span>
<span id="cb217-436"><a href="#cb217-436" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-437"><a href="#cb217-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-438"><a href="#cb217-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-439"><a href="#cb217-439" aria-hidden="true" tabindex="-1"></a>The maximum value by row of $\mathbf{\phi}$ determines which typology each region is assigned on an overall commodity basis.</span>
<span id="cb217-440"><a href="#cb217-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-441"><a href="#cb217-441" aria-hidden="true" tabindex="-1"></a>(Alternative assignment procedures may incorporate a weighted mix of commodities or alternatively measure the "gravity" of regions by commodities to determine a regions commodity center of gravity.)</span>
<span id="cb217-442"><a href="#cb217-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-443"><a href="#cb217-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-444"><a href="#cb217-444" aria-hidden="true" tabindex="-1"></a>Suppose,  </span>
<span id="cb217-445"><a href="#cb217-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-446"><a href="#cb217-446" aria-hidden="true" tabindex="-1"></a>\begin{equation}</span>
<span id="cb217-447"><a href="#cb217-447" aria-hidden="true" tabindex="-1"></a>\underset{(c \times i)}{\mathbf{U}^{n}} = </span>
<span id="cb217-448"><a href="#cb217-448" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-449"><a href="#cb217-449" aria-hidden="true" tabindex="-1"></a>    18 &amp; 12 <span class="sc">\\</span> </span>
<span id="cb217-450"><a href="#cb217-450" aria-hidden="true" tabindex="-1"></a>    20 &amp; 16 <span class="sc">\\</span> </span>
<span id="cb217-451"><a href="#cb217-451" aria-hidden="true" tabindex="-1"></a>    2 &amp; 6 <span class="sc">\\</span> </span>
<span id="cb217-452"><a href="#cb217-452" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}, \;  \text{ and} \; \;</span>
<span id="cb217-453"><a href="#cb217-453" aria-hidden="true" tabindex="-1"></a>\underset{(i \times g)}{\mathbf{X}^{r}_{employment}} = </span>
<span id="cb217-454"><a href="#cb217-454" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-455"><a href="#cb217-455" aria-hidden="true" tabindex="-1"></a>    500 &amp; 10 &amp; 30 &amp; 4 <span class="sc">\\</span> </span>
<span id="cb217-456"><a href="#cb217-456" aria-hidden="true" tabindex="-1"></a>    6000 &amp; 200 &amp; 400 &amp; 50 <span class="sc">\\</span> </span>
<span id="cb217-457"><a href="#cb217-457" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}</span>
<span id="cb217-458"><a href="#cb217-458" aria-hidden="true" tabindex="-1"></a>\end{equation}</span>
<span id="cb217-459"><a href="#cb217-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-460"><a href="#cb217-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-461"><a href="#cb217-461" aria-hidden="true" tabindex="-1"></a><span class="in">```{r  toyexample}</span></span>
<span id="cb217-462"><a href="#cb217-462" aria-hidden="true" tabindex="-1"></a>Toy_U_mat <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">12</span>, <span class="dv">20</span>, <span class="dv">16</span>, <span class="dv">2</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb217-463"><a href="#cb217-463" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_U_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Gas"</span>, <span class="st">"Hogs"</span>, <span class="st">"Ice"</span>)</span>
<span id="cb217-464"><a href="#cb217-464" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_U_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Farm"</span>)</span>
<span id="cb217-465"><a href="#cb217-465" aria-hidden="true" tabindex="-1"></a>Toy_X_mat <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">10</span>,  <span class="dv">30</span>, <span class="dv">4</span>, <span class="dv">6000</span>, <span class="dv">200</span>, <span class="dv">400</span>, <span class="dv">50</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb217-466"><a href="#cb217-466" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_X_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Farm"</span>)</span>
<span id="cb217-467"><a href="#cb217-467" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_X_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-468"><a href="#cb217-468" aria-hidden="true" tabindex="-1"></a>Toy_u_vec <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(Toy_U_mat <span class="sc">%*%</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_U_mat)))</span>
<span id="cb217-469"><a href="#cb217-469" aria-hidden="true" tabindex="-1"></a>Toy_x_vec <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">t</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">nrow</span>(Toy_X_mat))) <span class="sc">%*%</span> Toy_X_mat)</span>
<span id="cb217-470"><a href="#cb217-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-471"><a href="#cb217-471" aria-hidden="true" tabindex="-1"></a>Toy_Alpha_mat <span class="ot">&lt;-</span> <span class="fu">solve</span>(<span class="fu">matrix</span>(<span class="fu">diag</span>(Toy_u_vec, <span class="at">nrow =</span> <span class="dv">3</span>),  <span class="at">ncol=</span><span class="dv">3</span>)) <span class="sc">%*%</span> Toy_U_mat <span class="sc">%*%</span> Toy_X_mat</span>
<span id="cb217-472"><a href="#cb217-472" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Alpha_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Gas"</span>, <span class="st">"Hogs"</span>, <span class="st">"Ice"</span>)</span>
<span id="cb217-473"><a href="#cb217-473" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Alpha matrix"</span>)</span>
<span id="cb217-474"><a href="#cb217-474" aria-hidden="true" tabindex="-1"></a>Toy_Alpha_mat</span>
<span id="cb217-475"><a href="#cb217-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-476"><a href="#cb217-476" aria-hidden="true" tabindex="-1"></a>Toy_Rho_mat <span class="ot">&lt;-</span> Toy_Alpha_mat <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">matrix</span>(<span class="fu">diag</span>(Toy_x_vec, <span class="at">nrow =</span> <span class="dv">4</span>),  <span class="at">ncol=</span><span class="dv">4</span>)) </span>
<span id="cb217-477"><a href="#cb217-477" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Rho_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-478"><a href="#cb217-478" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Rho matrix"</span>)</span>
<span id="cb217-479"><a href="#cb217-479" aria-hidden="true" tabindex="-1"></a>Toy_Rho_mat</span>
<span id="cb217-480"><a href="#cb217-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-481"><a href="#cb217-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-482"><a href="#cb217-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-483"><a href="#cb217-483" aria-hidden="true" tabindex="-1"></a>Toy_Phi_tilde_mat_G <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">diag</span>(Toy_Rho_mat[<span class="dv">1</span>,], <span class="at">nrow =</span> <span class="dv">4</span>),  <span class="at">ncol=</span><span class="dv">4</span>) <span class="sc">%*%</span>  <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_X_mat))  <span class="sc">%*%</span> <span class="fu">t</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_X_mat)))</span>
<span id="cb217-484"><a href="#cb217-484" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_G <span class="ot">&lt;-</span>  Toy_Phi_tilde_mat_G <span class="sc">/</span> (Toy_Phi_tilde_mat_G <span class="sc">+</span> <span class="fu">t</span>(Toy_Phi_tilde_mat_G))</span>
<span id="cb217-485"><a href="#cb217-485" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Phi_mat_G) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-486"><a href="#cb217-486" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Phi_mat_G) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-487"><a href="#cb217-487" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Phi matrix - Gas"</span>)</span>
<span id="cb217-488"><a href="#cb217-488" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_G</span>
<span id="cb217-489"><a href="#cb217-489" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb217-490"><a href="#cb217-490" aria-hidden="true" tabindex="-1"></a>Toy_Phi_tilde_mat_H <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">diag</span>(Toy_Rho_mat[<span class="dv">2</span>,], <span class="at">nrow =</span> <span class="dv">4</span>),  <span class="at">ncol=</span><span class="dv">4</span>) <span class="sc">%*%</span>  <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_X_mat))  <span class="sc">%*%</span> <span class="fu">t</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_X_mat)))</span>
<span id="cb217-491"><a href="#cb217-491" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_H <span class="ot">&lt;-</span>  Toy_Phi_tilde_mat_H <span class="sc">/</span> (Toy_Phi_tilde_mat_H <span class="sc">+</span> <span class="fu">t</span>(Toy_Phi_tilde_mat_H))</span>
<span id="cb217-492"><a href="#cb217-492" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Phi_mat_H) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-493"><a href="#cb217-493" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Phi_mat_H) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-494"><a href="#cb217-494" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Phi matrix - Hogs"</span>)</span>
<span id="cb217-495"><a href="#cb217-495" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_H</span>
<span id="cb217-496"><a href="#cb217-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-497"><a href="#cb217-497" aria-hidden="true" tabindex="-1"></a>Toy_Phi_tilde_mat_I <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">diag</span>(Toy_Rho_mat[<span class="dv">3</span>,], <span class="at">nrow =</span> <span class="dv">4</span>),  <span class="at">ncol=</span><span class="dv">4</span>) <span class="sc">%*%</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_X_mat))  <span class="sc">%*%</span> <span class="fu">t</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_X_mat)))</span>
<span id="cb217-498"><a href="#cb217-498" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_I <span class="ot">&lt;-</span>  Toy_Phi_tilde_mat_I <span class="sc">/</span> (Toy_Phi_tilde_mat_I <span class="sc">+</span> <span class="fu">t</span>(Toy_Phi_tilde_mat_I))</span>
<span id="cb217-499"><a href="#cb217-499" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Phi_mat_I) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-500"><a href="#cb217-500" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Phi_mat_I) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-501"><a href="#cb217-501" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Phi matrix - Ice"</span>)</span>
<span id="cb217-502"><a href="#cb217-502" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_I</span>
<span id="cb217-503"><a href="#cb217-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-504"><a href="#cb217-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-505"><a href="#cb217-505" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat <span class="ot">&lt;-</span> <span class="fu">bdiag</span>(Toy_Phi_mat_G, Toy_Phi_mat_H, Toy_Phi_mat_I)</span>
<span id="cb217-506"><a href="#cb217-506" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb217-507"><a href="#cb217-507" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-508"><a href="#cb217-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-509"><a href="#cb217-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-510"><a href="#cb217-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-511"><a href="#cb217-511" aria-hidden="true" tabindex="-1"></a><span class="fu">### Redux</span></span>
<span id="cb217-512"><a href="#cb217-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-513"><a href="#cb217-513" aria-hidden="true" tabindex="-1"></a>"Quantify the economic connectedness of places through production supply chains."</span>
<span id="cb217-514"><a href="#cb217-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-515"><a href="#cb217-515" aria-hidden="true" tabindex="-1"></a>Simply put at the core of our analysis lies the question: How similar are the inputs of Chicago to the outputs of Madison?</span>
<span id="cb217-516"><a href="#cb217-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-517"><a href="#cb217-517" aria-hidden="true" tabindex="-1"></a>Given only national level Input-Output tables (consisting of Make/Use tables, industry-by-industry, industry-by-commodity, and commodity-by-commodity total requirements tables, and commodity-by-industry direct requirements tables) and regional level industry activity (in the form of employment, payroll, and number of establishments), we are left with a handful of possible methods to derive an answer.</span>
<span id="cb217-518"><a href="#cb217-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-519"><a href="#cb217-519" aria-hidden="true" tabindex="-1"></a>*Possible Methodologies*</span>
<span id="cb217-520"><a href="#cb217-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-521"><a href="#cb217-521" aria-hidden="true" tabindex="-1"></a>Seemingly, our first task is to "regionalize" the national level I/O accounts down to the desired regional scale.  </span>
<span id="cb217-522"><a href="#cb217-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-523"><a href="#cb217-523" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The most comprehensive approach is to execute an *interregional input–output (IRIO)* model. However, this approach really only serves as a platonic abstraction given the vast and detailed necessary exogenous inputs. </span>
<span id="cb217-524"><a href="#cb217-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-525"><a href="#cb217-525" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>One possible approach is to implement parts or all of a *multiregional input–output model*. The regional tables of an MRIO employ a regional *technical* coefficients matrix, $\mathbf{A^{r}}$. Under this paradigm, information regarding the region of origin is ignored. These transactions are denoted $z^{\cdot r}_{ij}$, with the coefficients estimated as $a^{r}_{ij} = \frac{z^{\cdot r}_{ij}}{x^{r}_{j}}$ where $\mathbf{A^{r}} = \left[ a^{r}_{ij} \right]$. In practice, estimates are can be made using a *product-mix approach*. This technique essentially uses detailed level national technical coefficients and detailed level regional outputs to produce regional coefficients at a less detailed summary level (from weighted averages of the national detailed coefficients). This approach may be feasible given the available data, however, the necessary agglomeration of industry classes is not ideal. Furthermore, extending this approach  into the realm of interregional tables,  requires data on dollar flow of goods between regions, $z^{rs}_{i}$, irrespective of the sector of destination in the receiving region. Again, however, this extension is beyond the scope of the available data. </span>
<span id="cb217-526"><a href="#cb217-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-527"><a href="#cb217-527" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Another possible approach is to employ the *RAS technique*, however, instead of the typical deployment for updating coefficients across time, we may update input coefficients across space. This approach requires $3n$ sets of information for the location of interest. These are, *total gross outputs*, $x^{r}_{j}$, *total interindustry sales*, by sector $u_{i} = \sum^{n}_{j=1} z^{r}_{ij}$, and *total interindustry purchases*, by sector $v_{i} = \sum^{n}_{i=1} z^{r}_{ij}$. But even this slimmed down approach is still beyond the scope of the data.</span>
<span id="cb217-528"><a href="#cb217-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-529"><a href="#cb217-529" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Yet another  possible alternative approach might be to estimate *regional supply percentages*, $p^{r}_{i}$. This approach requires knowledge of total regional output of each sector, $x^{r}_{i}$, and the exports of the product of each sector from the region, $e^{r}_{i}$, and the imports of all goods into the region, $m^{r}_{i}$. With knowledge of *regional supply percentages* one can scale the national level *direct/input requirements matrix* to estimate a regional *input requirements matrix*, $\mathbf{A^{rr}} = \mathbf{\hat{p}^{r}A}$. Clearly, this too is beyond the scope of the available data. </span>
<span id="cb217-530"><a href="#cb217-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-531"><a href="#cb217-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-532"><a href="#cb217-532" aria-hidden="true" tabindex="-1"></a>However in this manner, when trying to estimate $a^{rr}_{ij}$ from national data, one can generalize the problem as a two step process of: (1) estimate a regional technical coefficient, $a^{r}_{ij}$, from the corresponding national coefficient, $a^{n}_{ij}$, and then (2) estimate the regional input coefficient, $a^{rr}_{ij}$, as some proportion of the regional technical coefficient; that is, $a^{rr}_{ij} = p^{r}_{ij}a^{r}_{ij}$ (where  $0 \leq p^{r}_{ij} \leq 1$). </span>
<span id="cb217-533"><a href="#cb217-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-534"><a href="#cb217-534" aria-hidden="true" tabindex="-1"></a>The procedure for estimating $a^{rr}_{ij}$ from $a^{n}_{ij}$ is therefore: </span>
<span id="cb217-535"><a href="#cb217-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-536"><a href="#cb217-536" aria-hidden="true" tabindex="-1"></a>(1) find $\alpha^{r}_{ij} \geq 0$ such that $a^{r}_{ij} = (\alpha^{r}_{ij}) (a^{n}_{ij})$, and</span>
<span id="cb217-537"><a href="#cb217-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-538"><a href="#cb217-538" aria-hidden="true" tabindex="-1"></a>(2) find $\beta^{r}_{ij}$ ($0 \leq \beta^{r}_{ij} \leq 1$) such that $a^{rr}_{ij} = (\beta^{r}_{ij}) (a^{r}_{ij})$</span>
<span id="cb217-539"><a href="#cb217-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-540"><a href="#cb217-540" aria-hidden="true" tabindex="-1"></a>If we assume regional production recipes are identical then $\alpha^{r}_{ij} = 1$ and $a^{r}_{ij} = a^{n}_{ij}$ for all $i$ and $j$. Or if we assume each regional purchaser buys the same proportion of inputs from within the region, then $\beta^{r}_{ij} = p^{r}_{i}$ for all $i$. </span>
<span id="cb217-541"><a href="#cb217-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-542"><a href="#cb217-542" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Given this structure, and assuming $a^{r}_{ij} = a^{n}_{ij}$, we may propose various functional estimates of $\beta^{r}_{ij}$ to derive $a^{rr}_{ij}$ from $a^{n}_{ij}$, i.e., *Location Quotients*. The $LQ$s only require knowledge of gross output of sector $i$ in region $r$ and total output of all sectors in the region, $x^{r}_{i}$ and $x^{r}$, along with these values at the national level: $LQ^{r}_{i} = \left( \frac{x^{r}_{i} / x^{r}} {x^{n}_{i} / x^{n}} \right)$. Furthermore, many regional analysts will use employment rather than output as an alternative to the relevant measures of regional and national activity. This is a feasible option given the available data.</span>
<span id="cb217-543"><a href="#cb217-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-544"><a href="#cb217-544" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Another possible approach is to employ *Regional Purchase Coefficients*. The $RPC$ is defined as the proportion of regional demand for that sector’s output that is fulfilled from regional production. Much in the same way that location quotients operate, we may designate $\beta^{r}_{ij} = p^{r}_{i} = RPC^{r}_{i}$, where $RPC^{r}_{i} = z^{rr}_{i} / (z^{rr}_{i} + z^{sr}_{i}) = 1/[1 + 1/(z^{rr}_{i}/z^{sr}_{i})]$. The *relative shipment* term $z^{rr}_{i}/z^{sr}_{i}$, may itself be estimated from published sources such as *Census of Transportation*, unfortunately these are beyond the current scope and available data. </span>
<span id="cb217-545"><a href="#cb217-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-546"><a href="#cb217-546" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The final standard approach is to implement a *Gravity Model* formulation to estimate commodity flows between regions. The *Gravity Model* estimates the flow of goods between regions as a function of (1) some measure of the total output of $i$ in $r$, $x^{r}_{i}$, (2) some measure of the total purchases of $i$ in $s$, $x^{s}_{i}$, and (3) the distance (as a measure of “impedance”) between the two regions, $d^{rs}$. The relatively simplified gravity model specification is given by: $z^{rs}_{i} = \frac{x^{r \cdot}_{i}x^{\cdot s}_{i}} {x^{\cdot \cdot}_{i}} Q^{rs}_{i}$ where $x^{r \cdot}_{i}$ is the “supply pool” of good $i$ in region $r$, $x^{\cdot s}_{i}$ is the “demand pool” of good $i$ in region $s$, $x^{\cdot \cdot}_{i}$ is the total production of commodity $i$ in the system and $Q^{rs}_{i}$ is a parameter to be estimated. In practice the interregional flows per industry $i$ are given by $[\mathbf{{x'}}_{i}\mathbf{x}_{i}](\mathbf{x}_{i}\mathbf{i})^{-1} \odot \mathbf{Q}$, where $\mathbf{Q} = (\mathbf{d \odot d})^{-1}$ and $\mathbf{d}$ is the great-circle distance matrix derived from longitude and latitude vector pairs from region centroid. This approach may be feasible given the available data, too, (again with harsh simplifying assumptions). </span>
<span id="cb217-547"><a href="#cb217-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-548"><a href="#cb217-548" aria-hidden="true" tabindex="-1"></a>*Assumptions and Caveats*</span>
<span id="cb217-549"><a href="#cb217-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-550"><a href="#cb217-550" aria-hidden="true" tabindex="-1"></a>Note that strictly speaking, the $x^{r}_{j}$ terms throughout are specified as gross outputs of each sector in the region. In practice, however, these outputs are approximated through the use of employment, payroll, or number of establishments data, and they are not technically equivalent substitutes. Furthermore, the "supply pool" and "demand pool" total outputs called for in in the simple Gravity specification are even greater abstractions. First we assume $\alpha^{r}_{ij} = 1$ such that $a^{r}_{ij} = a^{n}_{ij}$, then assuming regional industry activity is equivalent to regional gross output $x^{r}_{j}$ and regional final demand is approximated by a single region model (i.e., $\mathbf{f^{r}} = \mathbf{(I} - \mathbf{A^{rr})x^{r}}$), which restricts by definition regional supply for good $i$ to be equivalent to regional demand for good $i$ (i.e., $x^{r \cdot}_{i} = x^{\cdot r}_{i}$). Note in fact, no national accounting data are needed for this gravity approach, one only needs regional industry activity and the impedance function, $Q^{rs}_{i}$, which is given by $e^{-d^{rs}}$ (or $1/(d^{rs})^2$) where $d^{rs}$ is the great-circle distance between each region.</span>
<span id="cb217-551"><a href="#cb217-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-552"><a href="#cb217-552" aria-hidden="true" tabindex="-1"></a><span class="fu">### Exposé</span></span>
<span id="cb217-553"><a href="#cb217-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-554"><a href="#cb217-554" aria-hidden="true" tabindex="-1"></a>Note that given an industry-by-industry BEA total requirements matrix, $\mathbf{L}$, we can derive an industry based technology, industry-by-industry direct requirements matrix, $\mathbf{A}$ from the accounting identity $\mathbf{L} = (\mathbf{I} - \mathbf{A})^{-1}$. And total industry output, $\mathbf{x}$, is also exogenously obtainable from the BEA Make/Use tables, allowing the further derivation of the transactions matrix, $\mathbf{Z}$, from the accounting identity $\mathbf{A} = \mathbf{Z\hat{x}^{-1}}$.</span>
<span id="cb217-555"><a href="#cb217-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-556"><a href="#cb217-556" aria-hidden="true" tabindex="-1"></a>*Data*</span>
<span id="cb217-557"><a href="#cb217-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-558"><a href="#cb217-558" aria-hidden="true" tabindex="-1"></a><span class="in">```{r  toyBaseData}</span></span>
<span id="cb217-559"><a href="#cb217-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-560"><a href="#cb217-560" aria-hidden="true" tabindex="-1"></a>Industry_Count <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb217-561"><a href="#cb217-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-562"><a href="#cb217-562" aria-hidden="true" tabindex="-1"></a>Toy_Total_mat <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fl">1.2523</span>,  <span class="fl">0.0143</span>, <span class="fl">0.0055</span>, <span class="fl">0.0276</span>, <span class="fl">0.0892</span>,</span>
<span id="cb217-563"><a href="#cb217-563" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.0251</span>,  <span class="fl">1.1230</span>, <span class="fl">0.1450</span>, <span class="fl">0.0331</span>, <span class="fl">0.0709</span>,</span>
<span id="cb217-564"><a href="#cb217-564" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.0203</span>,  <span class="fl">0.0236</span>, <span class="fl">1.0420</span>, <span class="fl">0.0128</span>, <span class="fl">0.0237</span>,</span>
<span id="cb217-565"><a href="#cb217-565" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.0092</span>,  <span class="fl">0.0171</span>, <span class="fl">0.0088</span>, <span class="fl">1.0048</span>, <span class="fl">0.0105</span>,</span>
<span id="cb217-566"><a href="#cb217-566" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.4020</span>,  <span class="fl">0.2675</span>, <span class="fl">0.1055</span>, <span class="fl">0.5102</span>, <span class="fl">1.7703</span>), <span class="at">nrow =</span> Industry_Count, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb217-567"><a href="#cb217-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-568"><a href="#cb217-568" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Total_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-569"><a href="#cb217-569" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Total_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-570"><a href="#cb217-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-571"><a href="#cb217-571" aria-hidden="true" tabindex="-1"></a><span class="co">#kable(Toy_Total_mat, caption = "Total Requirements Table ( Leontief inverse )") </span></span>
<span id="cb217-572"><a href="#cb217-572" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Total Requirements Table (Leontief inverse)"</span>)</span>
<span id="cb217-573"><a href="#cb217-573" aria-hidden="true" tabindex="-1"></a>Toy_Total_mat</span>
<span id="cb217-574"><a href="#cb217-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-575"><a href="#cb217-575" aria-hidden="true" tabindex="-1"></a>Toy_Direct_mat <span class="ot">&lt;-</span> <span class="fu">diag</span>(<span class="fu">ncol</span>(Toy_Total_mat)) <span class="sc">-</span> <span class="fu">solve</span>(Toy_Total_mat)</span>
<span id="cb217-576"><a href="#cb217-576" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Direct_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-577"><a href="#cb217-577" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Direct_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-578"><a href="#cb217-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-579"><a href="#cb217-579" aria-hidden="true" tabindex="-1"></a><span class="co">#kable(round(Toy_Direct_mat, 4), caption = "Direct Requirements Table (input coefficients / structural matrix / national technical coefficients)") </span></span>
<span id="cb217-580"><a href="#cb217-580" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Direct Requirements Table (input coefficients / structural matrix / national technical coefficients)"</span>)</span>
<span id="cb217-581"><a href="#cb217-581" aria-hidden="true" tabindex="-1"></a>Toy_Direct_mat <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-582"><a href="#cb217-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-583"><a href="#cb217-583" aria-hidden="true" tabindex="-1"></a>Toy_Total_Industry_Output <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">263919</span>, <span class="dv">171317</span>, <span class="dv">244999</span>, <span class="dv">708461</span>, <span class="dv">3883386</span>)</span>
<span id="cb217-584"><a href="#cb217-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-585"><a href="#cb217-585" aria-hidden="true" tabindex="-1"></a>Toy_Transactions_mat <span class="ot">&lt;-</span> <span class="fu">round</span>(Toy_Direct_mat <span class="sc">%*%</span>  <span class="fu">diag</span>(Toy_Total_Industry_Output), <span class="dv">2</span>)</span>
<span id="cb217-586"><a href="#cb217-586" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Transactions_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-587"><a href="#cb217-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-588"><a href="#cb217-588" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Interindustry Transactions Table"</span>)</span>
<span id="cb217-589"><a href="#cb217-589" aria-hidden="true" tabindex="-1"></a>Toy_Transactions_mat <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-590"><a href="#cb217-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-591"><a href="#cb217-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-592"><a href="#cb217-592" aria-hidden="true" tabindex="-1"></a>Region_Count <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb217-593"><a href="#cb217-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-594"><a href="#cb217-594" aria-hidden="true" tabindex="-1"></a>Toy_Xemp_mat <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">13</span>, <span class="dv">100</span>, <span class="dv">50</span>, </span>
<span id="cb217-595"><a href="#cb217-595" aria-hidden="true" tabindex="-1"></a>                          <span class="dv">400</span>, <span class="dv">34</span>,  <span class="dv">30</span>, <span class="dv">88</span>,</span>
<span id="cb217-596"><a href="#cb217-596" aria-hidden="true" tabindex="-1"></a>                          <span class="dv">300</span>, <span class="dv">120</span>,  <span class="dv">20</span>, <span class="dv">123</span>,</span>
<span id="cb217-597"><a href="#cb217-597" aria-hidden="true" tabindex="-1"></a>                          <span class="dv">200</span>, <span class="dv">200</span>,  <span class="dv">75</span>, <span class="dv">40</span>,</span>
<span id="cb217-598"><a href="#cb217-598" aria-hidden="true" tabindex="-1"></a>                          <span class="dv">100</span>, <span class="dv">10</span>,  <span class="dv">400</span>, <span class="dv">4</span>), <span class="at">nrow =</span> Industry_Count, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb217-599"><a href="#cb217-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-600"><a href="#cb217-600" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Xemp_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-601"><a href="#cb217-601" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Xemp_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-602"><a href="#cb217-602" aria-hidden="true" tabindex="-1"></a><span class="co">#kable(Toy_Xemp_mat, caption = "Regional Industry-Employment Table") </span></span>
<span id="cb217-603"><a href="#cb217-603" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regional Industry-Employment Table"</span> )</span>
<span id="cb217-604"><a href="#cb217-604" aria-hidden="true" tabindex="-1"></a>Toy_Xemp_mat</span>
<span id="cb217-605"><a href="#cb217-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-606"><a href="#cb217-606" aria-hidden="true" tabindex="-1"></a>Toy_Direct_mat_r <span class="ot">&lt;-</span> <span class="fu">kronecker</span>(<span class="fu">diag</span>(<span class="dv">1</span>, Region_Count), Toy_Direct_mat)</span>
<span id="cb217-607"><a href="#cb217-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-608"><a href="#cb217-608" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-609"><a href="#cb217-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-610"><a href="#cb217-610" aria-hidden="true" tabindex="-1"></a>*Location Quotients*</span>
<span id="cb217-611"><a href="#cb217-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-612"><a href="#cb217-612" aria-hidden="true" tabindex="-1"></a><span class="in">```{r  toyLQ}</span></span>
<span id="cb217-613"><a href="#cb217-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-614"><a href="#cb217-614" aria-hidden="true" tabindex="-1"></a><span class="do">############ Simple Location Quotient</span></span>
<span id="cb217-615"><a href="#cb217-615" aria-hidden="true" tabindex="-1"></a>Toy_LQ <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span>Industry_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb217-616"><a href="#cb217-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-617"><a href="#cb217-617" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb217-618"><a href="#cb217-618" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-619"><a href="#cb217-619" aria-hidden="true" tabindex="-1"></a>  Toy_LQ[i,j] <span class="ot">&lt;-</span>((Toy_Xemp_mat[i,j])<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat[,j]))<span class="sc">/</span>(<span class="fu">sum</span>(Toy_Xemp_mat[i,])<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat))</span>
<span id="cb217-620"><a href="#cb217-620" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-621"><a href="#cb217-621" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-622"><a href="#cb217-622" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_LQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-623"><a href="#cb217-623" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_LQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-624"><a href="#cb217-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-625"><a href="#cb217-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-626"><a href="#cb217-626" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Simple Location Quotients"</span>)</span>
<span id="cb217-627"><a href="#cb217-627" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(Toy_LQ, <span class="dv">4</span>)</span>
<span id="cb217-628"><a href="#cb217-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-629"><a href="#cb217-629" aria-hidden="true" tabindex="-1"></a>Toy_LQc <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Industry_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb217-630"><a href="#cb217-630" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb217-631"><a href="#cb217-631" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-632"><a href="#cb217-632" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_LQ[i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb217-633"><a href="#cb217-633" aria-hidden="true" tabindex="-1"></a>   Toy_LQc[i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb217-634"><a href="#cb217-634" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-635"><a href="#cb217-635" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb217-636"><a href="#cb217-636" aria-hidden="true" tabindex="-1"></a>   Toy_LQc[i,j] <span class="ot">&lt;-</span> Toy_LQ[i,j]</span>
<span id="cb217-637"><a href="#cb217-637" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-638"><a href="#cb217-638" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-639"><a href="#cb217-639" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-640"><a href="#cb217-640" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_LQc) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-641"><a href="#cb217-641" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_LQc) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-642"><a href="#cb217-642" aria-hidden="true" tabindex="-1"></a><span class="co">#round(Toy_LQc,  4)</span></span>
<span id="cb217-643"><a href="#cb217-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-644"><a href="#cb217-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-645"><a href="#cb217-645" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-646"><a href="#cb217-646" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_LQc)){</span>
<span id="cb217-647"><a href="#cb217-647" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_LQ[[i]] <span class="ot">&lt;-</span> (<span class="fu">diag</span>(Toy_LQc[,i]) <span class="sc">%*%</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-648"><a href="#cb217-648" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Dir_LQ[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-649"><a href="#cb217-649" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-650"><a href="#cb217-650" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_LQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-651"><a href="#cb217-651" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regionial Direct Requirement Coeffecients from Simple Location Quotients"</span>)</span>
<span id="cb217-652"><a href="#cb217-652" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ</span>
<span id="cb217-653"><a href="#cb217-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-654"><a href="#cb217-654" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-655"><a href="#cb217-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-656"><a href="#cb217-656" aria-hidden="true" tabindex="-1"></a><span class="in">```{r  toyCLQ}</span></span>
<span id="cb217-657"><a href="#cb217-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-658"><a href="#cb217-658" aria-hidden="true" tabindex="-1"></a><span class="do">############ Cross-Industry Location Quotient</span></span>
<span id="cb217-659"><a href="#cb217-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-660"><a href="#cb217-660" aria-hidden="true" tabindex="-1"></a><span class="co">#This allows for differing modifiers within a given row of the national matrix; that is, it allows for differing cell-by-cell adjustments within An rather than uniform adjustments along each row.</span></span>
<span id="cb217-661"><a href="#cb217-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-662"><a href="#cb217-662" aria-hidden="true" tabindex="-1"></a>Toy_CLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-663"><a href="#cb217-663" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-664"><a href="#cb217-664" aria-hidden="true" tabindex="-1"></a>  Toy_CLQ[[i]] <span class="ot">&lt;-</span> (Toy_LQ[,i] <span class="sc">%*%</span> <span class="fu">t</span>(<span class="dv">1</span><span class="sc">/</span>Toy_LQ[,i])) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-665"><a href="#cb217-665" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_CLQ[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-666"><a href="#cb217-666" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-667"><a href="#cb217-667" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_CLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-668"><a href="#cb217-668" aria-hidden="true" tabindex="-1"></a> <span class="fu">print</span>(<span class="st">"Cross-Industry Location Quotients"</span>)</span>
<span id="cb217-669"><a href="#cb217-669" aria-hidden="true" tabindex="-1"></a> Toy_CLQ</span>
<span id="cb217-670"><a href="#cb217-670" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb217-671"><a href="#cb217-671" aria-hidden="true" tabindex="-1"></a>Toy_CLQc <span class="ot">&lt;-</span> Toy_CLQ</span>
<span id="cb217-672"><a href="#cb217-672" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_CLQc)){</span>
<span id="cb217-673"><a href="#cb217-673" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_CLQc[[r]])){</span>
<span id="cb217-674"><a href="#cb217-674" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_CLQc[[r]])){</span>
<span id="cb217-675"><a href="#cb217-675" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_CLQc[[r]][i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb217-676"><a href="#cb217-676" aria-hidden="true" tabindex="-1"></a>   Toy_CLQc[[r]][i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb217-677"><a href="#cb217-677" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-678"><a href="#cb217-678" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb217-679"><a href="#cb217-679" aria-hidden="true" tabindex="-1"></a>   Toy_CLQc[[r]][i,j] <span class="ot">&lt;-</span> Toy_CLQc[[r]][i,j]</span>
<span id="cb217-680"><a href="#cb217-680" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-681"><a href="#cb217-681" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-682"><a href="#cb217-682" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-683"><a href="#cb217-683" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-684"><a href="#cb217-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-685"><a href="#cb217-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-686"><a href="#cb217-686" aria-hidden="true" tabindex="-1"></a>Toy_Dir_CLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-687"><a href="#cb217-687" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_CLQc)){</span>
<span id="cb217-688"><a href="#cb217-688" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_CLQ[[i]] <span class="ot">&lt;-</span> (Toy_CLQc[[i]] <span class="sc">*</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-689"><a href="#cb217-689" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-690"><a href="#cb217-690" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_CLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-691"><a href="#cb217-691" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regionial Direct Requirement Coeffecients from Cross-Industry Location Quotients"</span>)</span>
<span id="cb217-692"><a href="#cb217-692" aria-hidden="true" tabindex="-1"></a>Toy_Dir_CLQ</span>
<span id="cb217-693"><a href="#cb217-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-694"><a href="#cb217-694" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-695"><a href="#cb217-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-696"><a href="#cb217-696" aria-hidden="true" tabindex="-1"></a><span class="in">```{r  toySLQ}</span></span>
<span id="cb217-697"><a href="#cb217-697" aria-hidden="true" tabindex="-1"></a><span class="do">############ Semilogarithmic Location Quotient</span></span>
<span id="cb217-698"><a href="#cb217-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-699"><a href="#cb217-699" aria-hidden="true" tabindex="-1"></a>Toy_SLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-700"><a href="#cb217-700" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-701"><a href="#cb217-701" aria-hidden="true" tabindex="-1"></a>  Toy_SLQ[[i]] <span class="ot">&lt;-</span> (Toy_LQ[,i] <span class="sc">%*%</span> <span class="fu">t</span>(<span class="dv">1</span><span class="sc">/</span>(<span class="fu">log2</span>(<span class="dv">1</span> <span class="sc">+</span> Toy_LQ[,i])))) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-702"><a href="#cb217-702" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_SLQ[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-703"><a href="#cb217-703" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-704"><a href="#cb217-704" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_SLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-705"><a href="#cb217-705" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Semilogarithmic Location Quotients"</span>)</span>
<span id="cb217-706"><a href="#cb217-706" aria-hidden="true" tabindex="-1"></a>Toy_SLQ</span>
<span id="cb217-707"><a href="#cb217-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-708"><a href="#cb217-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-709"><a href="#cb217-709" aria-hidden="true" tabindex="-1"></a>Toy_SLQc <span class="ot">&lt;-</span> Toy_SLQ</span>
<span id="cb217-710"><a href="#cb217-710" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_SLQc)){</span>
<span id="cb217-711"><a href="#cb217-711" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_SLQc[[r]])){</span>
<span id="cb217-712"><a href="#cb217-712" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_SLQc[[r]])){</span>
<span id="cb217-713"><a href="#cb217-713" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_SLQc[[r]][i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb217-714"><a href="#cb217-714" aria-hidden="true" tabindex="-1"></a>   Toy_SLQc[[r]][i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb217-715"><a href="#cb217-715" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-716"><a href="#cb217-716" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb217-717"><a href="#cb217-717" aria-hidden="true" tabindex="-1"></a>   Toy_SLQc[[r]][i,j] <span class="ot">&lt;-</span> Toy_SLQc[[r]][i,j]</span>
<span id="cb217-718"><a href="#cb217-718" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-719"><a href="#cb217-719" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-720"><a href="#cb217-720" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-721"><a href="#cb217-721" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-722"><a href="#cb217-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-723"><a href="#cb217-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-724"><a href="#cb217-724" aria-hidden="true" tabindex="-1"></a>Toy_Dir_SLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-725"><a href="#cb217-725" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_SLQc)){</span>
<span id="cb217-726"><a href="#cb217-726" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_SLQ[[i]] <span class="ot">&lt;-</span> (Toy_SLQc[[i]] <span class="sc">*</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-727"><a href="#cb217-727" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-728"><a href="#cb217-728" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_SLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-729"><a href="#cb217-729" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regionial Direct Requirement Coeffecients from Semilogarithmic Location Quotients"</span>)</span>
<span id="cb217-730"><a href="#cb217-730" aria-hidden="true" tabindex="-1"></a>Toy_Dir_SLQ</span>
<span id="cb217-731"><a href="#cb217-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-732"><a href="#cb217-732" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-733"><a href="#cb217-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-734"><a href="#cb217-734" aria-hidden="true" tabindex="-1"></a><span class="in">```{r  toyFLQ}</span></span>
<span id="cb217-735"><a href="#cb217-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-736"><a href="#cb217-736" aria-hidden="true" tabindex="-1"></a><span class="do">############ Flegg Location Quotient</span></span>
<span id="cb217-737"><a href="#cb217-737" aria-hidden="true" tabindex="-1"></a>Toy_FLQ_delta <span class="ot">&lt;-</span> .<span class="dv">3</span></span>
<span id="cb217-738"><a href="#cb217-738" aria-hidden="true" tabindex="-1"></a>Toy_lambda <span class="ot">&lt;-</span> (<span class="fu">log2</span>(<span class="dv">1</span> <span class="sc">+</span> (<span class="fu">colSums</span>(Toy_Xemp_mat)<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat))))<span class="sc">^</span>(Toy_FLQ_delta)</span>
<span id="cb217-739"><a href="#cb217-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-740"><a href="#cb217-740" aria-hidden="true" tabindex="-1"></a>Toy_FLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-741"><a href="#cb217-741" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-742"><a href="#cb217-742" aria-hidden="true" tabindex="-1"></a>  Toy_FLQ[[i]] <span class="ot">&lt;-</span> ((Toy_LQ[,i] <span class="sc">%*%</span> <span class="fu">t</span>(<span class="dv">1</span><span class="sc">/</span>Toy_LQ[,i])) <span class="sc">*</span> Toy_lambda[i]) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-743"><a href="#cb217-743" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_FLQ[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-744"><a href="#cb217-744" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-745"><a href="#cb217-745" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_FLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-746"><a href="#cb217-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-747"><a href="#cb217-747" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Flegg Location Quotients"</span>)</span>
<span id="cb217-748"><a href="#cb217-748" aria-hidden="true" tabindex="-1"></a>Toy_FLQ </span>
<span id="cb217-749"><a href="#cb217-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-750"><a href="#cb217-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-751"><a href="#cb217-751" aria-hidden="true" tabindex="-1"></a>Toy_FLQc <span class="ot">&lt;-</span> Toy_FLQ</span>
<span id="cb217-752"><a href="#cb217-752" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_FLQc)){</span>
<span id="cb217-753"><a href="#cb217-753" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_FLQc[[r]])){</span>
<span id="cb217-754"><a href="#cb217-754" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_FLQc[[r]])){</span>
<span id="cb217-755"><a href="#cb217-755" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_FLQc[[r]][i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb217-756"><a href="#cb217-756" aria-hidden="true" tabindex="-1"></a>   Toy_FLQc[[r]][i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb217-757"><a href="#cb217-757" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-758"><a href="#cb217-758" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb217-759"><a href="#cb217-759" aria-hidden="true" tabindex="-1"></a>   Toy_FLQc[[r]][i,j] <span class="ot">&lt;-</span> Toy_FLQc[[r]][i,j]</span>
<span id="cb217-760"><a href="#cb217-760" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-761"><a href="#cb217-761" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-762"><a href="#cb217-762" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-763"><a href="#cb217-763" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-764"><a href="#cb217-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-765"><a href="#cb217-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-766"><a href="#cb217-766" aria-hidden="true" tabindex="-1"></a>Toy_Dir_FLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-767"><a href="#cb217-767" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_FLQc)){</span>
<span id="cb217-768"><a href="#cb217-768" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_FLQ[[i]] <span class="ot">&lt;-</span> (Toy_FLQc[[i]] <span class="sc">*</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-769"><a href="#cb217-769" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-770"><a href="#cb217-770" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_FLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-771"><a href="#cb217-771" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regionial Direct Requirement Coeffecients from Flegg Location Quotients"</span>)</span>
<span id="cb217-772"><a href="#cb217-772" aria-hidden="true" tabindex="-1"></a>Toy_Dir_FLQ</span>
<span id="cb217-773"><a href="#cb217-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-774"><a href="#cb217-774" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-775"><a href="#cb217-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-776"><a href="#cb217-776" aria-hidden="true" tabindex="-1"></a><span class="in">```{r  toyAFLQ}</span></span>
<span id="cb217-777"><a href="#cb217-777" aria-hidden="true" tabindex="-1"></a><span class="do">############ Augmented Flegg Location Quotient</span></span>
<span id="cb217-778"><a href="#cb217-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-779"><a href="#cb217-779" aria-hidden="true" tabindex="-1"></a>Toy_LQa <span class="ot">&lt;-</span> Toy_LQ</span>
<span id="cb217-780"><a href="#cb217-780" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_LQa)){</span>
<span id="cb217-781"><a href="#cb217-781" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_LQa)){</span>
<span id="cb217-782"><a href="#cb217-782" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_LQ[i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb217-783"><a href="#cb217-783" aria-hidden="true" tabindex="-1"></a>  Toy_LQa[i,j] <span class="ot">&lt;-</span> <span class="fu">log2</span>(<span class="dv">1</span> <span class="sc">+</span> Toy_LQ[i,j])</span>
<span id="cb217-784"><a href="#cb217-784" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-785"><a href="#cb217-785" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span>{</span>
<span id="cb217-786"><a href="#cb217-786" aria-hidden="true" tabindex="-1"></a>  Toy_LQa[i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb217-787"><a href="#cb217-787" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-788"><a href="#cb217-788" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-789"><a href="#cb217-789" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-790"><a href="#cb217-790" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb217-791"><a href="#cb217-791" aria-hidden="true" tabindex="-1"></a>Toy_AFLQ <span class="ot">&lt;-</span> Toy_FLQ</span>
<span id="cb217-792"><a href="#cb217-792" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_FLQ)){</span>
<span id="cb217-793"><a href="#cb217-793" aria-hidden="true" tabindex="-1"></a>  Toy_AFLQ[[r]] <span class="ot">&lt;-</span> (Toy_FLQ[[r]] <span class="sc">%*%</span> <span class="fu">diag</span>(Toy_LQa[,r])) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-794"><a href="#cb217-794" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(Toy_AFLQ[[r]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-795"><a href="#cb217-795" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-796"><a href="#cb217-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-797"><a href="#cb217-797" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Augmented Flegg Location Quotients"</span>)</span>
<span id="cb217-798"><a href="#cb217-798" aria-hidden="true" tabindex="-1"></a>Toy_AFLQ </span>
<span id="cb217-799"><a href="#cb217-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-800"><a href="#cb217-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-801"><a href="#cb217-801" aria-hidden="true" tabindex="-1"></a>Toy_Dir_AFLQ <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-802"><a href="#cb217-802" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Toy_AFLQ)){</span>
<span id="cb217-803"><a href="#cb217-803" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_AFLQ[[i]] <span class="ot">&lt;-</span> (Toy_AFLQ[[i]] <span class="sc">*</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-804"><a href="#cb217-804" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-805"><a href="#cb217-805" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_AFLQ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-806"><a href="#cb217-806" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regionial Direct Requirement Coeffecients from Augmented Flegg Location Quotients"</span>)</span>
<span id="cb217-807"><a href="#cb217-807" aria-hidden="true" tabindex="-1"></a>Toy_Dir_AFLQ</span>
<span id="cb217-808"><a href="#cb217-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-809"><a href="#cb217-809" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-810"><a href="#cb217-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-811"><a href="#cb217-811" aria-hidden="true" tabindex="-1"></a>Each Location Quotient is a different estimate of the regional supply proportion of good $i$. Using a Location Quotient in conjunction with the national-level Direct Requirements matrix, one can estimate an *intra*regional Direct Requirements (input/ technical coefficients) matrix. </span>
<span id="cb217-812"><a href="#cb217-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-813"><a href="#cb217-813" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-814"><a href="#cb217-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-815"><a href="#cb217-815" aria-hidden="true" tabindex="-1"></a>*Reprise*</span>
<span id="cb217-816"><a href="#cb217-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-817"><a href="#cb217-817" aria-hidden="true" tabindex="-1"></a>However, to get back to the central question: How similar are the inputs of Chicago to the outputs of Madison? we may only need to look as far as the Location Quotients themselves. We have established that if $LQ_{i}^{r} &gt; 1$, then industry $i$ is concentrated in region $r$ relative to the nation. As such we can expect all demand of good $i$ to be satisfied regionally and regional surplus will be exported to other less concentrated regions. Similarly, if $LQ_{i}^{r} &lt; 1$, then industry $i$ is less concentrated in region $r$ relative to the nation. Thus if we look for industries in Madison where $LQ_{i}^{r} &gt; 1$, **and** in Chicago where $LQ_{i}^{r} &lt; 1$, we may use this matching to address the central question.  </span>
<span id="cb217-818"><a href="#cb217-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-819"><a href="#cb217-819" aria-hidden="true" tabindex="-1"></a>For example, the Fiber and Grains simple LQ for Dane County (i.e., Madison) are both greater than 1. Similarly, only the Fiber simple LQ for Brown County (i.e., Green Bay), and only the Grain simple LQ for All Else is less than 1, making either only a partial partner. However, the Fiber and Grains simple LQ for Cook County (i.e., Chicago) are both less than 1, implying it is the strongest sink and best matched for using goods for which Madison is concentrated.  </span>
<span id="cb217-820"><a href="#cb217-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-821"><a href="#cb217-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-822"><a href="#cb217-822" aria-hidden="true" tabindex="-1"></a><span class="in">```{r  toyOverlay}</span></span>
<span id="cb217-823"><a href="#cb217-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-824"><a href="#cb217-824" aria-hidden="true" tabindex="-1"></a>Toy_export <span class="ot">&lt;-</span> Toy_CLQ<span class="sc">$</span>Dane</span>
<span id="cb217-825"><a href="#cb217-825" aria-hidden="true" tabindex="-1"></a>Toy_import <span class="ot">&lt;-</span> Toy_CLQ<span class="sc">$</span>Cook</span>
<span id="cb217-826"><a href="#cb217-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-827"><a href="#cb217-827" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb217-828"><a href="#cb217-828" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb217-829"><a href="#cb217-829" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_export[i,j] <span class="sc">&lt;</span> <span class="dv">1</span>){</span>
<span id="cb217-830"><a href="#cb217-830" aria-hidden="true" tabindex="-1"></a>   Toy_export[i,j] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb217-831"><a href="#cb217-831" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-832"><a href="#cb217-832" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb217-833"><a href="#cb217-833" aria-hidden="true" tabindex="-1"></a>   Toy_export[i,j] <span class="ot">&lt;-</span> Toy_export[i,j]</span>
<span id="cb217-834"><a href="#cb217-834" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-835"><a href="#cb217-835" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-836"><a href="#cb217-836" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-837"><a href="#cb217-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-838"><a href="#cb217-838" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb217-839"><a href="#cb217-839" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb217-840"><a href="#cb217-840" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_import[i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb217-841"><a href="#cb217-841" aria-hidden="true" tabindex="-1"></a>   Toy_import[i,j] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb217-842"><a href="#cb217-842" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-843"><a href="#cb217-843" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb217-844"><a href="#cb217-844" aria-hidden="true" tabindex="-1"></a>   Toy_import[i,j] <span class="ot">&lt;-</span> Toy_import[i,j]</span>
<span id="cb217-845"><a href="#cb217-845" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-846"><a href="#cb217-846" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-847"><a href="#cb217-847" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-848"><a href="#cb217-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-849"><a href="#cb217-849" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Sub-industry CLQ Import/Export Compatibility - Madison as Exporter, Chicago as Importer"</span>)</span>
<span id="cb217-850"><a href="#cb217-850" aria-hidden="true" tabindex="-1"></a>(Toy_export<span class="sc">/</span>Toy_import) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-851"><a href="#cb217-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-852"><a href="#cb217-852" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-853"><a href="#cb217-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-854"><a href="#cb217-854" aria-hidden="true" tabindex="-1"></a>Similarly, for the other sub-industry location quotients, if sector $i$ at the region-level is relatively smaller than sector $j$ at the region-level (i.e, $CLQ^{r}_{ij} &lt;1$), then some of $j$'s need for $i$ in $r$ will need to be imported. </span>
<span id="cb217-855"><a href="#cb217-855" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-856"><a href="#cb217-856" aria-hidden="true" tabindex="-1"></a>One can divide two sub-industry location quotients, an export region by an import region, and derive the following  relationships:</span>
<span id="cb217-857"><a href="#cb217-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-858"><a href="#cb217-858" aria-hidden="true" tabindex="-1"></a>NaN -&gt; Exp &lt; 1 &amp; Imp &gt; 1 </span>
<span id="cb217-859"><a href="#cb217-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-860"><a href="#cb217-860" aria-hidden="true" tabindex="-1"></a>Inf -&gt; Exp &gt;1 &amp; Imp &gt; 1</span>
<span id="cb217-861"><a href="#cb217-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-862"><a href="#cb217-862" aria-hidden="true" tabindex="-1"></a>0.0 -&gt; Exp &lt; 1 &amp; Imp &lt; 1</span>
<span id="cb217-863"><a href="#cb217-863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-864"><a href="#cb217-864" aria-hidden="true" tabindex="-1"></a>'##' -&gt; Exp &gt; 1 &amp; Imp &lt; 1</span>
<span id="cb217-865"><a href="#cb217-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-866"><a href="#cb217-866" aria-hidden="true" tabindex="-1"></a>In this example, Chicago will need to import: Extract, Fiber, Grains, and Hog commodities for the Info sector, Fiber for the Extract  sector, Fiber and Grains for the Hogs sector, Nothing for the Grains sector, Grains for the Fiber sector, and finally Fiber, Grains, and Hogs for the Extract sector. While Madison will export its excess in the exact same categories! </span>
<span id="cb217-867"><a href="#cb217-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-868"><a href="#cb217-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-869"><a href="#cb217-869" aria-hidden="true" tabindex="-1"></a>*MAPE*</span>
<span id="cb217-870"><a href="#cb217-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-871"><a href="#cb217-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-872"><a href="#cb217-872" aria-hidden="true" tabindex="-1"></a><span class="in">```{r  toyMAPE}</span></span>
<span id="cb217-873"><a href="#cb217-873" aria-hidden="true" tabindex="-1"></a><span class="co">#MAPE</span></span>
<span id="cb217-874"><a href="#cb217-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-875"><a href="#cb217-875" aria-hidden="true" tabindex="-1"></a><span class="fu">local</span>({ </span>
<span id="cb217-876"><a href="#cb217-876" aria-hidden="true" tabindex="-1"></a>  MAT <span class="ot">&lt;-</span> <span class="fu">bdiag</span>(Toy_Dir_LQ)</span>
<span id="cb217-877"><a href="#cb217-877" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb217-878"><a href="#cb217-878" aria-hidden="true" tabindex="-1"></a>  Toy_MAPE_mat  <span class="ot">&lt;&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb217-879"><a href="#cb217-879" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="fu">length</span>(Toy_LQ), <span class="at">by =</span> <span class="dv">5</span> )){</span>
<span id="cb217-880"><a href="#cb217-880" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="fu">length</span>(Toy_LQ), <span class="at">by =</span> <span class="dv">5</span> )){</span>
<span id="cb217-881"><a href="#cb217-881" aria-hidden="true" tabindex="-1"></a>  Toy_MAPE_mat <span class="ot">&lt;&lt;-</span> <span class="fu">c</span>(Toy_MAPE_mat, <span class="fu">mean</span>((<span class="fu">abs</span>(<span class="fu">c</span>(MAT[j<span class="sc">:</span>j<span class="sc">+</span>n,j<span class="sc">:</span>j<span class="sc">+</span>n]) <span class="sc">-</span> <span class="fu">c</span>(MAT[i<span class="sc">:</span>i<span class="sc">+</span>n,i<span class="sc">:</span>i<span class="sc">+</span>n]))<span class="sc">/</span><span class="fu">c</span>(MAT[i<span class="sc">:</span>i<span class="sc">+</span>n,i<span class="sc">:</span>i<span class="sc">+</span>n]))<span class="sc">*</span><span class="dv">100</span>))</span>
<span id="cb217-882"><a href="#cb217-882" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-883"><a href="#cb217-883" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-884"><a href="#cb217-884" aria-hidden="true" tabindex="-1"></a>  Toy_MAPE_mat <span class="ot">&lt;&lt;-</span> <span class="fu">matrix</span>(Toy_MAPE_mat, <span class="at">nrow =</span> n, <span class="at">byrow =</span> <span class="cn">FALSE</span>)</span>
<span id="cb217-885"><a href="#cb217-885" aria-hidden="true" tabindex="-1"></a>}) </span>
<span id="cb217-886"><a href="#cb217-886" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_MAPE_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-887"><a href="#cb217-887" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_MAPE_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-888"><a href="#cb217-888" aria-hidden="true" tabindex="-1"></a>Toy_MAPE_mat</span>
<span id="cb217-889"><a href="#cb217-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-890"><a href="#cb217-890" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-891"><a href="#cb217-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-892"><a href="#cb217-892" aria-hidden="true" tabindex="-1"></a>Alternatively, we can ask the question: Are the inter-industry flows of Chicago similar to the inter-industry flows of Madison? Or in other words do they have congruent intraregional economic activity? To answer this we can compare the estimated regional level Direct Requirements (technical coefficients) through the application of Mean Absolute Percent Error. Let $\text{MAPE} = \left(\sum_{i=1}^{n}\sum_{j=1}^{n}\frac{|a_{ij} - \tilde{a}_{ij}|}{a_{ij}}\right) \times 100$.  </span>
<span id="cb217-893"><a href="#cb217-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-894"><a href="#cb217-894" aria-hidden="true" tabindex="-1"></a>For example, using the regional Direct Requirements matrix derived from the simple location quotient procedure, we can see that among the possible matches, the inter-industry flows of Madison are most similar to Green Bay, with Chicago and Madison displaying the most incongruent intraregional economic activity. In  this case more incongruity points toward more gains from trade. </span>
<span id="cb217-895"><a href="#cb217-895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-896"><a href="#cb217-896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-897"><a href="#cb217-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-898"><a href="#cb217-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-899"><a href="#cb217-899" aria-hidden="true" tabindex="-1"></a>*Gravity*</span>
<span id="cb217-900"><a href="#cb217-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-901"><a href="#cb217-901" aria-hidden="true" tabindex="-1"></a><span class="in">```{r  toyGravity}</span></span>
<span id="cb217-902"><a href="#cb217-902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-903"><a href="#cb217-903" aria-hidden="true" tabindex="-1"></a>Toy_Lat <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">42.3</span>, <span class="fl">44.49</span>, <span class="fl">41.84</span>, <span class="fl">43.07</span>)</span>
<span id="cb217-904"><a href="#cb217-904" aria-hidden="true" tabindex="-1"></a>Toy_Lon <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">89.04</span>, <span class="sc">-</span><span class="fl">88.03</span>, <span class="sc">-</span><span class="fl">87.77</span>, <span class="sc">-</span><span class="fl">89.39</span>)</span>
<span id="cb217-905"><a href="#cb217-905" aria-hidden="true" tabindex="-1"></a>Toy_Dist_mat <span class="ot">&lt;-</span> <span class="fu">distm</span>(<span class="fu">cbind</span>(Toy_Lon, Toy_Lat))<span class="sc">/</span><span class="dv">1000000</span></span>
<span id="cb217-906"><a href="#cb217-906" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Dist_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-907"><a href="#cb217-907" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Dist_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-908"><a href="#cb217-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-909"><a href="#cb217-909" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy_Q &lt;- (1/(Toy_Dist_mat)^2)</span></span>
<span id="cb217-910"><a href="#cb217-910" aria-hidden="true" tabindex="-1"></a>Toy_Q <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="sc">-</span>Toy_Dist_mat)</span>
<span id="cb217-911"><a href="#cb217-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-912"><a href="#cb217-912" aria-hidden="true" tabindex="-1"></a>Toy_Gravity_mat <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>())</span>
<span id="cb217-913"><a href="#cb217-913" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Xemp_mat)){</span>
<span id="cb217-914"><a href="#cb217-914" aria-hidden="true" tabindex="-1"></a>  Toy_Gravity_mat[[i]] <span class="ot">&lt;-</span> (Toy_Xemp_mat[i,] <span class="sc">%*%</span> <span class="fu">t</span>(Toy_Xemp_mat[i,])) <span class="sc">/</span> <span class="fu">sum</span>(Toy_Xemp_mat[i,]) <span class="sc">*</span> Toy_Q</span>
<span id="cb217-915"><a href="#cb217-915" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Gravity_mat[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-916"><a href="#cb217-916" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-917"><a href="#cb217-917" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Gravity_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-918"><a href="#cb217-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-919"><a href="#cb217-919" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Gravity Model Formulations - Interreginal Flows by Industry"</span>)</span>
<span id="cb217-920"><a href="#cb217-920" aria-hidden="true" tabindex="-1"></a>Toy_Gravity_mat </span>
<span id="cb217-921"><a href="#cb217-921" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-922"><a href="#cb217-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-923"><a href="#cb217-923" aria-hidden="true" tabindex="-1"></a>Similarly, the Gravity approach represents interregional interindustry transaction estimates. In this example, the "All Else" category dominates the analysis, and rightly so given that it is an aggregate residual category. Furthermore the “impedance” (distance) measure is undefinable for an aggregate "All Else" category. For illustration an arbitrary proxy location is used. </span>
<span id="cb217-924"><a href="#cb217-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-925"><a href="#cb217-925" aria-hidden="true" tabindex="-1"></a>Ignoring "AllElse", we may employ the Gravity approach to answer the question: Does Madison have more interregional interindustry transaction with Chicago or Green Bay? </span>
<span id="cb217-926"><a href="#cb217-926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-927"><a href="#cb217-927" aria-hidden="true" tabindex="-1"></a>In this example, Chicago is a stronger trading partner for Extraction and Info, whereas Green Bay is a stronger trading partner for Fiber, Grains, and Hogs. </span>
<span id="cb217-928"><a href="#cb217-928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-929"><a href="#cb217-929" aria-hidden="true" tabindex="-1"></a>Taking one step further and comparing the aggregate magnitudes of interregional interindustry transactions reveals that Green Bay has nearly twice as much trading value than Chicago does with Madison. Note, however, that when we employ an exponential distance decay impediance function, such that *intra*regional interindustry transactions are definable, then Madison will actually have more "pull" with itself than Greenbay for Fiber and Grains. In this case, we would estimate Madison to have interregional interindustry transactions with Chicago for Extraction and Info commodities, and only Hogs with Green Bay. And as for Grains and Fiber, interindustry transactions are mostly dominated by *intra*regional exchange. </span>
<span id="cb217-930"><a href="#cb217-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-931"><a href="#cb217-931" aria-hidden="true" tabindex="-1"></a><span class="fu">### Extension</span></span>
<span id="cb217-932"><a href="#cb217-932" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb217-933"><a href="#cb217-933" aria-hidden="true" tabindex="-1"></a>*A nested and hierarchical approach*</span>
<span id="cb217-934"><a href="#cb217-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-935"><a href="#cb217-935" aria-hidden="true" tabindex="-1"></a>We have shown that it is feasible to construct regional-level technical coefficients matrix from a national-level Leontief matrix and regional industry employment. This then brings about some possible extensions. One is the possibility of performing a multistage regionalization, whereby first or second-level administrative divisions (e.g., states) are used to establish a coarse regionalization. Then either place specific technical coefficients can be derived using the administrative division technical coefficients or the administrative division regionalization can be used as the basis for constructing interregional compatibility. </span>
<span id="cb217-936"><a href="#cb217-936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-937"><a href="#cb217-937" aria-hidden="true" tabindex="-1"></a>To derive an administrative technical coefficients matrix, we aggregate the place specific regional industry employment to the administrative level. Let $\mathbf{X^{r}}$ be the industry-by-region measures economic activity. If all $j$ regions make up the desired administrative division, then the aggregate administrative measure of economic activity is given by $\mathbf{x^{R}} = \mathbf{X^{r}i}$, i.e., the row sums of the industry-by-region economic activity matrix. The administrative division Direct Requirements (technical coefficients) matrix can then be derived using a Location Quotient approach. </span>
<span id="cb217-938"><a href="#cb217-938" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-939"><a href="#cb217-939" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-940"><a href="#cb217-940" aria-hidden="true" tabindex="-1"></a>The simple administrative division location quotient is given by: </span>
<span id="cb217-941"><a href="#cb217-941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-942"><a href="#cb217-942" aria-hidden="true" tabindex="-1"></a>$$LQ^{R}_{i} = \left( \frac{x^{R}_{i} / x^{R}} {x^{n}_{i} / x^{n}} \right) = \left( \frac{(\mathbf{X^{r}i})_{i}  / \mathbf{iX^{r}i}} {x^{n}_{i} / x^{n}} \right) $$</span>
<span id="cb217-943"><a href="#cb217-943" aria-hidden="true" tabindex="-1"></a>And the administrative Direct Requirements (technical coefficients) matrix is generated by:</span>
<span id="cb217-944"><a href="#cb217-944" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-945"><a href="#cb217-945" aria-hidden="true" tabindex="-1"></a>a^{R}_{ij} = \left<span class="sc">\{</span> </span>
<span id="cb217-946"><a href="#cb217-946" aria-hidden="true" tabindex="-1"></a>\begin{align*}</span>
<span id="cb217-947"><a href="#cb217-947" aria-hidden="true" tabindex="-1"></a>(LQ^{R}_{i})a^{n}_{ij} \space\space \text{if} \space\space LQ^{R}_{i} &lt; 1 <span class="sc">\\</span></span>
<span id="cb217-948"><a href="#cb217-948" aria-hidden="true" tabindex="-1"></a>a^{n}_{ij} \space\space \text{if} \space\space LQ^{R}_{i} \geq 1</span>
<span id="cb217-949"><a href="#cb217-949" aria-hidden="true" tabindex="-1"></a>\end{align*}</span>
<span id="cb217-950"><a href="#cb217-950" aria-hidden="true" tabindex="-1"></a>\right<span class="sc">\}</span></span>
<span id="cb217-951"><a href="#cb217-951" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-952"><a href="#cb217-952" aria-hidden="true" tabindex="-1"></a>From here we may iterate and derive regional technical coefficients from the administrative technical coefficients matrix using a location quotient approach. </span>
<span id="cb217-953"><a href="#cb217-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-954"><a href="#cb217-954" aria-hidden="true" tabindex="-1"></a>The second stage simple regional division location quotient is given by: </span>
<span id="cb217-955"><a href="#cb217-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-956"><a href="#cb217-956" aria-hidden="true" tabindex="-1"></a>$$\widetilde{LQ}^{r}_{i} = \left( \frac{x^{r}_{i} / x^{r}} {x^{R}_{i} / x^{R}} \right) = \left( \frac{x^{r}_{i} / x^{r}} {(\mathbf{X^{r}i})_{i}  / \mathbf{iX^{r}i}} \right)  $$</span>
<span id="cb217-957"><a href="#cb217-957" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-958"><a href="#cb217-958" aria-hidden="true" tabindex="-1"></a>And the administrative Direct Requirements (technical coefficients) matrix is generated by:</span>
<span id="cb217-959"><a href="#cb217-959" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-960"><a href="#cb217-960" aria-hidden="true" tabindex="-1"></a>\widetilde{a}^{rr}_{ij} = \left<span class="sc">\{</span> </span>
<span id="cb217-961"><a href="#cb217-961" aria-hidden="true" tabindex="-1"></a>\begin{align*}</span>
<span id="cb217-962"><a href="#cb217-962" aria-hidden="true" tabindex="-1"></a>(\widetilde{LQ}^{r}_{i})a^{R}_{ij} \space\space \text{if} \space\space \widetilde{LQ}^{r}_{i} &lt; 1 <span class="sc">\\</span></span>
<span id="cb217-963"><a href="#cb217-963" aria-hidden="true" tabindex="-1"></a>a^{R}_{ij} \space\space \text{if} \space\space \widetilde{LQ}^{r}_{i} \geq 1</span>
<span id="cb217-964"><a href="#cb217-964" aria-hidden="true" tabindex="-1"></a>\end{align*}</span>
<span id="cb217-965"><a href="#cb217-965" aria-hidden="true" tabindex="-1"></a>\right<span class="sc">\}</span></span>
<span id="cb217-966"><a href="#cb217-966" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-967"><a href="#cb217-967" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-968"><a href="#cb217-968" aria-hidden="true" tabindex="-1"></a>We can then examine what, if any, functional differences exist between a deriving regional coefficients directly from the national level or from a two stage, national  to administrative division to regional approach. Note, under the simple LQ approach, whenever $LQ \geq 1  \vdash a^{n}_{ij} = a^{rr}_{ij} = a^{R}_{ij} = \widetilde{a}^{rr}_{ij}$. </span>
<span id="cb217-969"><a href="#cb217-969" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-970"><a href="#cb217-970" aria-hidden="true" tabindex="-1"></a>Combining steps, we can specify the Administrative Direct Requirements  directly from the  National Direct Requirements as:</span>
<span id="cb217-971"><a href="#cb217-971" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-972"><a href="#cb217-972" aria-hidden="true" tabindex="-1"></a>\widetilde{a}^{rr}_{ij} = \left<span class="sc">\{</span> </span>
<span id="cb217-973"><a href="#cb217-973" aria-hidden="true" tabindex="-1"></a>\begin{align*}</span>
<span id="cb217-974"><a href="#cb217-974" aria-hidden="true" tabindex="-1"></a>(LQ^{r}_{i})a^{n}_{ij} \space\space \text{if} \space\space \widetilde{LQ}^{r}_{i} &lt; 1 \text{ } \&amp; \text{ } LQ^{R}_{i} &lt; 1 <span class="sc">\\</span></span>
<span id="cb217-975"><a href="#cb217-975" aria-hidden="true" tabindex="-1"></a>(\widetilde{LQ}^{r}_{i})a^{n}_{ij} \space\space \text{if} \space\space \widetilde{LQ}^{r}_{i} &lt; 1 \text{ } \&amp; \text{ } LQ^{R}_{i} \geq 1 <span class="sc">\\</span></span>
<span id="cb217-976"><a href="#cb217-976" aria-hidden="true" tabindex="-1"></a>(LQ^{R}_{i})a^{n}_{ij} \space\space  \text{if} \space\space \widetilde{LQ}^{r}_{i} \geq 1 \text{ } \&amp; \text{ } LQ^{R}_{i} &lt; 1 <span class="sc">\\</span></span>
<span id="cb217-977"><a href="#cb217-977" aria-hidden="true" tabindex="-1"></a>a^{n}_{ij} \space\space \text{if} \space\space \widetilde{LQ}^{r}_{i} \geq 1 \text{ } \&amp; \text{ } LQ^{R}_{i} \geq 1 </span>
<span id="cb217-978"><a href="#cb217-978" aria-hidden="true" tabindex="-1"></a>\end{align*}</span>
<span id="cb217-979"><a href="#cb217-979" aria-hidden="true" tabindex="-1"></a>\right<span class="sc">\}</span></span>
<span id="cb217-980"><a href="#cb217-980" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb217-981"><a href="#cb217-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-982"><a href="#cb217-982" aria-hidden="true" tabindex="-1"></a>Note $$\widetilde{LQ}^{r}_{i} \cdot LQ^{R}_{i} = \left( \frac{x^{r}_{i} / x^{r}} {x^{R}_{i} / x^{R}} \right) \cdot \left( \frac{x^{R}_{i} / x^{R}} {x^{n}_{i} / x^{n}} \right) = \left( \frac{x^{r}_{i} / x^{r}} {x^{n}_{i} / x^{n}} \right) = LQ^{r}_{i}$$</span>
<span id="cb217-983"><a href="#cb217-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-984"><a href="#cb217-984" aria-hidden="true" tabindex="-1"></a>In this example, the national-level Direct Requirements matrix is, $a^{n}_{ij}$, is given by: </span>
<span id="cb217-985"><a href="#cb217-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-988"><a href="#cb217-988" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-989"><a href="#cb217-989" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"National Direct Requirement Coeffecients"</span>)</span>
<span id="cb217-990"><a href="#cb217-990" aria-hidden="true" tabindex="-1"></a>Toy_Direct_mat <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-991"><a href="#cb217-991" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-992"><a href="#cb217-992" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-993"><a href="#cb217-993" aria-hidden="true" tabindex="-1"></a>And the intraregional Direct Requirements matrix is, $a^{rr}_{ij} \space \forall \space r$ using the simple LQ approach is is given by: </span>
<span id="cb217-994"><a href="#cb217-994" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-997"><a href="#cb217-997" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-998"><a href="#cb217-998" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regionial Direct Requirement Coeffecients from Simple Location Quotients"</span>)</span>
<span id="cb217-999"><a href="#cb217-999" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ</span>
<span id="cb217-1000"><a href="#cb217-1000" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1001"><a href="#cb217-1001" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1002"><a href="#cb217-1002" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1003"><a href="#cb217-1003" aria-hidden="true" tabindex="-1"></a>Suppose $R = <span class="sc">\{</span>\text{Brown, Cook, Dane}<span class="sc">\}</span>$, such that administrative-level Direct Requirements matrix, $a^{R}_{ij}$, using the simple LQ approach is is given by: </span>
<span id="cb217-1004"><a href="#cb217-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1007"><a href="#cb217-1007" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1008"><a href="#cb217-1008" aria-hidden="true" tabindex="-1"></a>Toy_Xemp_mat_R <span class="ot">&lt;-</span> Toy_Xemp_mat[,<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>] <span class="sc">%*%</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each =</span> <span class="fu">ncol</span>(Toy_Xemp_mat[,<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]))</span>
<span id="cb217-1009"><a href="#cb217-1009" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Xemp_mat_R) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ADM1"</span>)</span>
<span id="cb217-1010"><a href="#cb217-1010" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1011"><a href="#cb217-1011" aria-hidden="true" tabindex="-1"></a>Toy_LQ_R <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span><span class="fu">nrow</span>(Toy_Xemp_mat_R), <span class="at">ncol =</span> <span class="fu">ncol</span>(Toy_Xemp_mat_R))</span>
<span id="cb217-1012"><a href="#cb217-1012" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Xemp_mat_R)){</span>
<span id="cb217-1013"><a href="#cb217-1013" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_Xemp_mat_R)){</span>
<span id="cb217-1014"><a href="#cb217-1014" aria-hidden="true" tabindex="-1"></a>  Toy_LQ_R[i,j] <span class="ot">&lt;-</span>((Toy_Xemp_mat_R[i,j])<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat_R[,j]))<span class="sc">/</span>(<span class="fu">sum</span>(Toy_Xemp_mat[i,])<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat))</span>
<span id="cb217-1015"><a href="#cb217-1015" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-1016"><a href="#cb217-1016" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-1017"><a href="#cb217-1017" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_LQ_R) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1018"><a href="#cb217-1018" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_LQ_R) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ADM1"</span>)</span>
<span id="cb217-1019"><a href="#cb217-1019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1020"><a href="#cb217-1020" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1021"><a href="#cb217-1021" aria-hidden="true" tabindex="-1"></a>Toy_LQc_R <span class="ot">&lt;-</span>  Toy_LQ_R</span>
<span id="cb217-1022"><a href="#cb217-1022" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Xemp_mat_R)){</span>
<span id="cb217-1023"><a href="#cb217-1023" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_Xemp_mat_R)){</span>
<span id="cb217-1024"><a href="#cb217-1024" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_LQ_R[i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb217-1025"><a href="#cb217-1025" aria-hidden="true" tabindex="-1"></a>   Toy_LQc_R[i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb217-1026"><a href="#cb217-1026" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-1027"><a href="#cb217-1027" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb217-1028"><a href="#cb217-1028" aria-hidden="true" tabindex="-1"></a>   Toy_LQc_R[i,j] <span class="ot">&lt;-</span> Toy_LQ_R[i,j]</span>
<span id="cb217-1029"><a href="#cb217-1029" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-1030"><a href="#cb217-1030" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-1031"><a href="#cb217-1031" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-1032"><a href="#cb217-1032" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_LQc_R) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1033"><a href="#cb217-1033" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_LQc_R)  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ADM1"</span>)</span>
<span id="cb217-1034"><a href="#cb217-1034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1035"><a href="#cb217-1035" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1036"><a href="#cb217-1036" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1037"><a href="#cb217-1037" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ_R <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-1038"><a href="#cb217-1038" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_LQc_R)){</span>
<span id="cb217-1039"><a href="#cb217-1039" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_LQ_R[[i]] <span class="ot">&lt;-</span> (<span class="fu">diag</span>(Toy_LQc_R[,i]) <span class="sc">%*%</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1040"><a href="#cb217-1040" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Dir_LQ_R[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1041"><a href="#cb217-1041" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-1042"><a href="#cb217-1042" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_LQ_R) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ADM1"</span>)</span>
<span id="cb217-1043"><a href="#cb217-1043" aria-hidden="true" tabindex="-1"></a><span class="co">#print("Administrative Division Direct Requirement Coefficients from Simple Location Quotients")</span></span>
<span id="cb217-1044"><a href="#cb217-1044" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ_R</span>
<span id="cb217-1045"><a href="#cb217-1045" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1046"><a href="#cb217-1046" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1047"><a href="#cb217-1047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1048"><a href="#cb217-1048" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1049"><a href="#cb217-1049" aria-hidden="true" tabindex="-1"></a>And administrative intraregional Direct Requirements matrix, $\widetilde{a}^{rr}_{ij}$ using the simple LQ approach is is given by: </span>
<span id="cb217-1050"><a href="#cb217-1050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1053"><a href="#cb217-1053" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1054"><a href="#cb217-1054" aria-hidden="true" tabindex="-1"></a>Toy_Xemp_mat_Rt <span class="ot">&lt;-</span> Toy_Xemp_mat[,<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb217-1055"><a href="#cb217-1055" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1056"><a href="#cb217-1056" aria-hidden="true" tabindex="-1"></a>Toy_LQ_Rt <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span><span class="fu">nrow</span>(Toy_Xemp_mat_Rt), <span class="at">ncol =</span> <span class="fu">ncol</span>(Toy_Xemp_mat_Rt))</span>
<span id="cb217-1057"><a href="#cb217-1057" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Xemp_mat_Rt)){</span>
<span id="cb217-1058"><a href="#cb217-1058" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_Xemp_mat_Rt)){</span>
<span id="cb217-1059"><a href="#cb217-1059" aria-hidden="true" tabindex="-1"></a>  Toy_LQ_Rt[i,j] <span class="ot">&lt;-</span>((Toy_Xemp_mat_Rt[i,j])<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat_Rt[,j]))<span class="sc">/</span>(<span class="fu">sum</span>(Toy_Xemp_mat_R[i,])<span class="sc">/</span><span class="fu">sum</span>(Toy_Xemp_mat_R))</span>
<span id="cb217-1060"><a href="#cb217-1060" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-1061"><a href="#cb217-1061" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-1062"><a href="#cb217-1062" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1063"><a href="#cb217-1063" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_LQ_Rt) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1064"><a href="#cb217-1064" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_LQ_Rt) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1065"><a href="#cb217-1065" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1066"><a href="#cb217-1066" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1067"><a href="#cb217-1067" aria-hidden="true" tabindex="-1"></a>Toy_LQc_Rt <span class="ot">&lt;-</span>  Toy_LQ_Rt</span>
<span id="cb217-1068"><a href="#cb217-1068" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Xemp_mat_Rt)){</span>
<span id="cb217-1069"><a href="#cb217-1069" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_Xemp_mat_Rt)){</span>
<span id="cb217-1070"><a href="#cb217-1070" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (Toy_LQ_Rt[i,j] <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb217-1071"><a href="#cb217-1071" aria-hidden="true" tabindex="-1"></a>   Toy_LQc_Rt[i,j] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb217-1072"><a href="#cb217-1072" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-1073"><a href="#cb217-1073" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb217-1074"><a href="#cb217-1074" aria-hidden="true" tabindex="-1"></a>   Toy_LQc_Rt[i,j] <span class="ot">&lt;-</span> Toy_LQ_Rt[i,j]</span>
<span id="cb217-1075"><a href="#cb217-1075" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb217-1076"><a href="#cb217-1076" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-1077"><a href="#cb217-1077" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-1078"><a href="#cb217-1078" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_LQc_Rt) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1079"><a href="#cb217-1079" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_LQc_Rt)  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1080"><a href="#cb217-1080" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1081"><a href="#cb217-1081" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1082"><a href="#cb217-1082" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1083"><a href="#cb217-1083" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ_Rt <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-1084"><a href="#cb217-1084" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(Toy_LQc_Rt)){</span>
<span id="cb217-1085"><a href="#cb217-1085" aria-hidden="true" tabindex="-1"></a>  Toy_Dir_LQ_Rt[[i]] <span class="ot">&lt;-</span> (<span class="fu">diag</span>(Toy_LQc_Rt[,i]) <span class="sc">%*%</span> Toy_Direct_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1086"><a href="#cb217-1086" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Dir_LQ_Rt[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1087"><a href="#cb217-1087" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-1088"><a href="#cb217-1088" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Dir_LQ_Rt) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1089"><a href="#cb217-1089" aria-hidden="true" tabindex="-1"></a><span class="co">#print("Regional Direct Requirement Coefficients from Administrative Division Coefficients from Simple Location Quotients")</span></span>
<span id="cb217-1090"><a href="#cb217-1090" aria-hidden="true" tabindex="-1"></a>Toy_Dir_LQ_Rt</span>
<span id="cb217-1091"><a href="#cb217-1091" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1092"><a href="#cb217-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1093"><a href="#cb217-1093" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1094"><a href="#cb217-1094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1095"><a href="#cb217-1095" aria-hidden="true" tabindex="-1"></a>*Reprise (Again)*</span>
<span id="cb217-1096"><a href="#cb217-1096" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1097"><a href="#cb217-1097" aria-hidden="true" tabindex="-1"></a><span class="in">``` {r}</span></span>
<span id="cb217-1098"><a href="#cb217-1098" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Simple Location Quotients"</span>)</span>
<span id="cb217-1099"><a href="#cb217-1099" aria-hidden="true" tabindex="-1"></a>Toy_LQ <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1100"><a href="#cb217-1100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1101"><a href="#cb217-1101" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Administrative Division Simple Location Quotients"</span>)</span>
<span id="cb217-1102"><a href="#cb217-1102" aria-hidden="true" tabindex="-1"></a>Toy_LQ_Rt <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1103"><a href="#cb217-1103" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1104"><a href="#cb217-1104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1105"><a href="#cb217-1105" aria-hidden="true" tabindex="-1"></a>Remember that under the original national paradigm Madison was an exporter (i.e., $LQ^{r}_{i} &gt; 1$) for only Fiber and Grains and Chicago was the only region  that was an importer (i.e., $LQ^{r}_{i} &lt; 1$) of **both** Fiber and Grains. However, under the nested hierarchical paradigm, Madison is an exporter of Fiber and Grains and Extraction (i.e., $\widetilde{LQ}^{r}_{i} \geq 1$). Within the administrative division cluster regime, there is now no longer a region that is an importer of all three of Madison's exports. Chicago is still an importer of Fiber and Grains, but not Extraction. Whereas Green Bay is an importer of Extract and Fiber, but not Grains. </span>
<span id="cb217-1106"><a href="#cb217-1106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1107"><a href="#cb217-1107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1108"><a href="#cb217-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1109"><a href="#cb217-1109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1110"><a href="#cb217-1110" aria-hidden="true" tabindex="-1"></a><span class="fu">### Remission</span></span>
<span id="cb217-1111"><a href="#cb217-1111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1112"><a href="#cb217-1112" aria-hidden="true" tabindex="-1"></a>*Project Narrative Models*</span>
<span id="cb217-1113"><a href="#cb217-1113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1114"><a href="#cb217-1114" aria-hidden="true" tabindex="-1"></a>In addition to the methods established in the literature deployed to answer the question: How similar are the inputs of Chicago to the outputs of Madison? we may also adapt the Project Narrative methods, too (within the data restrictions). </span>
<span id="cb217-1115"><a href="#cb217-1115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1116"><a href="#cb217-1116" aria-hidden="true" tabindex="-1"></a>Let the "Absolute Total Use Coefficient" be given by $\mathbf{\alpha} = (\widehat{\mathbf{Zi}})^{-1}\mathbf{Z}\mathbf{X}^{r}$ and the "Relative Total Use Coefficient" be given by ${\mathbf{\rho}}  = (\widehat{\mathbf{Zi}})^{-1}\mathbf{Z}\mathbf{X}^{r}(\widehat{\mathbf{iX}^{r}})^{-1}$. </span>
<span id="cb217-1117"><a href="#cb217-1117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1118"><a href="#cb217-1118" aria-hidden="true" tabindex="-1"></a>We may also specify "Absolute Regional Typology Coefficients" and "Relative Regional Typology Coefficients" for each commodity $i$ as $\mathbf{\phi}_{i} =\hat{\alpha}_{i}\mathbf{i}\mathbf{i}'[\hat{\alpha}_{i}\mathbf{i}\mathbf{i}'+\hat{\alpha}'_{i}\mathbf{i}\mathbf{i}']^{-1}$ and $\mathbf{\varphi}_{i} =\hat{\rho}_{i}\mathbf{i}\mathbf{i}'[\hat{\rho}_{i}\mathbf{i}\mathbf{i}'+\hat{\rho}'_{i}\mathbf{i}\mathbf{i}']^{-1}$. </span>
<span id="cb217-1119"><a href="#cb217-1119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1120"><a href="#cb217-1120" aria-hidden="true" tabindex="-1"></a>In addition, we may also specify "Gravity of Absolute Total Use Coefficients" and "Gravity of Relative Total Use Coefficients" for each commodity $i$ as $\theta_{i} = <span class="co">[</span><span class="ot">\mathbf{{\alpha'}}_{i}\mathbf{\alpha}_{i}</span><span class="co">](\mathbf{\alpha}_{i}\mathbf{i})</span>^{-1} \odot \mathbf{Q}$ and $\vartheta_{i} = <span class="co">[</span><span class="ot">\mathbf{{\rho'}}_{i}\mathbf{\rho}_{i}</span><span class="co">](\mathbf{\rho}_{i}\mathbf{i})</span>^{-1} \odot \mathbf{Q}$,  where  $\mathbf{Q} = e^{-\mathbf{d}}$  the exponential distance decay function.</span>
<span id="cb217-1121"><a href="#cb217-1121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1122"><a href="#cb217-1122" aria-hidden="true" tabindex="-1"></a>Alternatively, as </span>
<span id="cb217-1123"><a href="#cb217-1123" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">align</span><span class="ot">=</span><span class="st">"center"</span><span class="kw">&gt;</span></span>
<span id="cb217-1124"><a href="#cb217-1124" aria-hidden="true" tabindex="-1"></a>$\displaystyle \alpha^{r}_{i} = \frac{\sum^{n}_{j=1} z_{ij} x^{r}_{j}} {\sum^{n}_{j=1} z_{ij}}$,</span>
<span id="cb217-1125"><a href="#cb217-1125" aria-hidden="true" tabindex="-1"></a>$\displaystyle \rho^{r}_{i} = \frac{\alpha^{r}_{i}} {\sum^{n}_{j=1} x^{r}_{j}}$</span>
<span id="cb217-1126"><a href="#cb217-1126" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/p&gt;</span></span>
<span id="cb217-1127"><a href="#cb217-1127" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">align</span><span class="ot">=</span><span class="st">"center"</span><span class="kw">&gt;</span></span>
<span id="cb217-1128"><a href="#cb217-1128" aria-hidden="true" tabindex="-1"></a>$\displaystyle \phi^{rs}_{i} = \frac{\alpha^{r}_{i}} {\alpha^{r}_{i} + \alpha^{s}_{i} }$,</span>
<span id="cb217-1129"><a href="#cb217-1129" aria-hidden="true" tabindex="-1"></a>$\displaystyle \varphi^{rs}_{i} = \frac{\rho^{r}_{i}} {\rho^{r}_{i} + \rho^{s}_{i} }$</span>
<span id="cb217-1130"><a href="#cb217-1130" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/p&gt;</span></span>
<span id="cb217-1131"><a href="#cb217-1131" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">align</span><span class="ot">=</span><span class="st">"center"</span><span class="kw">&gt;</span></span>
<span id="cb217-1132"><a href="#cb217-1132" aria-hidden="true" tabindex="-1"></a>$\displaystyle \theta^{rs}_{i} = \frac{\alpha^{r}_{i} \alpha^{s}_{i} } {\sum^{g}_{r=1} \alpha^{r}_{i}} Q^{rs}$,</span>
<span id="cb217-1133"><a href="#cb217-1133" aria-hidden="true" tabindex="-1"></a>$\displaystyle \vartheta^{rs}_{i} = \frac{\rho^{r}_{i} \rho^{s}_{i} } {\sum^{g}_{r=1} \rho^{r}_{i}} Q^{rs}$</span>
<span id="cb217-1134"><a href="#cb217-1134" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/p&gt;</span></span>
<span id="cb217-1135"><a href="#cb217-1135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1136"><a href="#cb217-1136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1137"><a href="#cb217-1137" aria-hidden="true" tabindex="-1"></a><span class="in">```{r toyPN}</span></span>
<span id="cb217-1138"><a href="#cb217-1138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1139"><a href="#cb217-1139" aria-hidden="true" tabindex="-1"></a>Toy_Alpha_mat <span class="ot">&lt;-</span> (<span class="fu">solve</span>(<span class="fu">diag</span>(<span class="fu">as.vector</span>(Toy_Transactions_mat <span class="sc">%*%</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Transactions_mat))))) <span class="sc">%*%</span> Toy_Transactions_mat <span class="sc">%*%</span> Toy_Xemp_mat) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1140"><a href="#cb217-1140" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Alpha_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1141"><a href="#cb217-1141" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Absolute Total Use Coefficients"</span>)</span>
<span id="cb217-1142"><a href="#cb217-1142" aria-hidden="true" tabindex="-1"></a>Toy_Alpha_mat</span>
<span id="cb217-1143"><a href="#cb217-1143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1144"><a href="#cb217-1144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1145"><a href="#cb217-1145" aria-hidden="true" tabindex="-1"></a>Toy_Rho_mat <span class="ot">&lt;-</span> (<span class="fu">solve</span>(<span class="fu">diag</span>(<span class="fu">as.vector</span>(Toy_Transactions_mat <span class="sc">%*%</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Transactions_mat))))) <span class="sc">%*%</span> Toy_Transactions_mat <span class="sc">%*%</span> Toy_Xemp_mat <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">diag</span>(<span class="fu">as.vector</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">nrow</span>(Toy_Xemp_mat)) <span class="sc">%*%</span> Toy_Xemp_mat ))) ) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1146"><a href="#cb217-1146" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Rho_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1147"><a href="#cb217-1147" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Rho_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1148"><a href="#cb217-1148" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Relative Total Use Coefficients"</span>)</span>
<span id="cb217-1149"><a href="#cb217-1149" aria-hidden="true" tabindex="-1"></a>Toy_Rho_mat </span>
<span id="cb217-1150"><a href="#cb217-1150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1151"><a href="#cb217-1151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1152"><a href="#cb217-1152" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_A <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-1153"><a href="#cb217-1153" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb217-1154"><a href="#cb217-1154" aria-hidden="true" tabindex="-1"></a>  Toy_Phi_tilde_mat  <span class="ot">&lt;-</span> <span class="fu">c</span>(Toy_Alpha_mat[i,]) <span class="sc">%*%</span>  <span class="fu">t</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Xemp_mat)))</span>
<span id="cb217-1155"><a href="#cb217-1155" aria-hidden="true" tabindex="-1"></a>  Toy_Phi_mat_A[[i]] <span class="ot">&lt;-</span> (Toy_Phi_tilde_mat <span class="sc">/</span> (Toy_Phi_tilde_mat <span class="sc">+</span> <span class="fu">t</span>(Toy_Phi_tilde_mat))) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1156"><a href="#cb217-1156" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Phi_mat_A[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1157"><a href="#cb217-1157" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(Toy_Phi_mat_A[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1158"><a href="#cb217-1158" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-1159"><a href="#cb217-1159" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Phi_mat_A) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1160"><a href="#cb217-1160" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regional Typology Coefficients - Absolute"</span>)</span>
<span id="cb217-1161"><a href="#cb217-1161" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_A  </span>
<span id="cb217-1162"><a href="#cb217-1162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1163"><a href="#cb217-1163" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_R <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-1164"><a href="#cb217-1164" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Industry_Count){</span>
<span id="cb217-1165"><a href="#cb217-1165" aria-hidden="true" tabindex="-1"></a>  Toy_Phi_tilde_mat  <span class="ot">&lt;-</span> <span class="fu">c</span>(Toy_Rho_mat[i,]) <span class="sc">%*%</span>  <span class="fu">t</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Xemp_mat)))</span>
<span id="cb217-1166"><a href="#cb217-1166" aria-hidden="true" tabindex="-1"></a>  Toy_Phi_mat_R[[i]] <span class="ot">&lt;-</span> (Toy_Phi_tilde_mat <span class="sc">/</span> (Toy_Phi_tilde_mat <span class="sc">+</span> <span class="fu">t</span>(Toy_Phi_tilde_mat))) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1167"><a href="#cb217-1167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Phi_mat_R[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1168"><a href="#cb217-1168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(Toy_Phi_mat_R[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1169"><a href="#cb217-1169" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-1170"><a href="#cb217-1170" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Phi_mat_R) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1171"><a href="#cb217-1171" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Regional Typology Coefficients - Relative"</span>)</span>
<span id="cb217-1172"><a href="#cb217-1172" aria-hidden="true" tabindex="-1"></a>Toy_Phi_mat_R</span>
<span id="cb217-1173"><a href="#cb217-1173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1174"><a href="#cb217-1174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1175"><a href="#cb217-1175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1176"><a href="#cb217-1176" aria-hidden="true" tabindex="-1"></a>Toy_Lat <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">42.3</span>, <span class="fl">44.49</span>, <span class="fl">41.84</span>, <span class="fl">43.07</span>)</span>
<span id="cb217-1177"><a href="#cb217-1177" aria-hidden="true" tabindex="-1"></a>Toy_Lon <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">89.04</span>, <span class="sc">-</span><span class="fl">88.03</span>, <span class="sc">-</span><span class="fl">87.77</span>, <span class="sc">-</span><span class="fl">89.39</span>)</span>
<span id="cb217-1178"><a href="#cb217-1178" aria-hidden="true" tabindex="-1"></a>Toy_Dist_mat <span class="ot">&lt;-</span> <span class="fu">distm</span>(<span class="fu">cbind</span>(Toy_Lon, Toy_Lat))<span class="sc">/</span><span class="dv">1000000</span></span>
<span id="cb217-1179"><a href="#cb217-1179" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Dist_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1180"><a href="#cb217-1180" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Dist_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1181"><a href="#cb217-1181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1182"><a href="#cb217-1182" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy_Q &lt;- (1/(Toy_Dist_mat)^2)</span></span>
<span id="cb217-1183"><a href="#cb217-1183" aria-hidden="true" tabindex="-1"></a>Toy_Q <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="sc">-</span>Toy_Dist_mat)</span>
<span id="cb217-1184"><a href="#cb217-1184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1185"><a href="#cb217-1185" aria-hidden="true" tabindex="-1"></a>Toy_Gravity_mat_Alpha <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>())</span>
<span id="cb217-1186"><a href="#cb217-1186" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Alpha_mat)){</span>
<span id="cb217-1187"><a href="#cb217-1187" aria-hidden="true" tabindex="-1"></a>  Toy_Gravity_mat_Alpha[[i]] <span class="ot">&lt;-</span> ((Toy_Alpha_mat[i,] <span class="sc">%*%</span> <span class="fu">t</span>(Toy_Alpha_mat[i,])) <span class="sc">/</span> <span class="fu">sum</span>(Toy_Alpha_mat[i,]) <span class="sc">*</span> Toy_Q ) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1188"><a href="#cb217-1188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Gravity_mat_Alpha[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1189"><a href="#cb217-1189" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-1190"><a href="#cb217-1190" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Gravity_mat_Alpha) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1191"><a href="#cb217-1191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1192"><a href="#cb217-1192" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Gravity of Absolute Total Use Coefficients"</span>)</span>
<span id="cb217-1193"><a href="#cb217-1193" aria-hidden="true" tabindex="-1"></a>Toy_Gravity_mat_Alpha</span>
<span id="cb217-1194"><a href="#cb217-1194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1195"><a href="#cb217-1195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1196"><a href="#cb217-1196" aria-hidden="true" tabindex="-1"></a>Toy_Gravity_mat_Rho <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>())</span>
<span id="cb217-1197"><a href="#cb217-1197" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Toy_Rho_mat)){</span>
<span id="cb217-1198"><a href="#cb217-1198" aria-hidden="true" tabindex="-1"></a>  Toy_Gravity_mat_Rho[[i]] <span class="ot">&lt;-</span> ((Toy_Rho_mat[i,] <span class="sc">%*%</span> <span class="fu">t</span>(Toy_Rho_mat[i,])) <span class="sc">/</span> <span class="fu">sum</span>(Toy_Rho_mat[i,]) <span class="sc">*</span> Toy_Q ) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1199"><a href="#cb217-1199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Toy_Gravity_mat_Rho[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1200"><a href="#cb217-1200" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-1201"><a href="#cb217-1201" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Toy_Gravity_mat_Rho) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1202"><a href="#cb217-1202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1203"><a href="#cb217-1203" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Gravity of Relative Total Use Coefficients"</span>)</span>
<span id="cb217-1204"><a href="#cb217-1204" aria-hidden="true" tabindex="-1"></a>Toy_Gravity_mat_Rho</span>
<span id="cb217-1205"><a href="#cb217-1205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1206"><a href="#cb217-1206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1207"><a href="#cb217-1207" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1208"><a href="#cb217-1208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1209"><a href="#cb217-1209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1210"><a href="#cb217-1210" aria-hidden="true" tabindex="-1"></a>The Absolute Use Coefficient portrays national-level intermediate transaction proportions scaled by regional-level economic activity in the form of industry employment. In this example the Info sector is by far the largest purchaser of intermediate goods for every industry including itself. And Cook County happens to have the largest Info workforce, making it dominate the Absolute Use Coefficient table. </span>
<span id="cb217-1211"><a href="#cb217-1211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1212"><a href="#cb217-1212" aria-hidden="true" tabindex="-1"></a>This is only the case, however, when we use the national-level Transactions matrix to capture the interconnectedness of industries. If instead  we employ the national-level technical coefficients matrix, which  specifies the amount of industry $i$’s commodity used to produce of one unit of industry $j$ ’s commodity, the Absolute Use Coefficient table is dominated by the AllElse category with the overall largest workforce. In this way we may take the national-level technical coefficients matrix, $\mathbf{A^{n}}$, as a first approximation to regional technical coefficients, $\mathbf{\tilde{A}^r}$, and thus the numerator of the project narrative Absolute and Relative Use Coefficients becomes $\mathbf{\tilde{A}^{r}X^{r}}$ or $\mathbf{\tilde{Z}^{r}}$ a first approximation of the regional Transactions matrix.</span>
<span id="cb217-1213"><a href="#cb217-1213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1214"><a href="#cb217-1214" aria-hidden="true" tabindex="-1"></a>The Relative Use Coefficient portrays national-level intermediate transaction proportions scaled by regional-level industry employment proportions. </span>
<span id="cb217-1215"><a href="#cb217-1215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1216"><a href="#cb217-1216" aria-hidden="true" tabindex="-1"></a>The Relative and Absolute "Regional Typology Coefficients", $\phi$, portray a region-by-region Use Coefficient proportion for each commodity type.  In other words, the row maximum assigns the best potential relationship for each commodity of that region. We can use the $\phi$ to answer the question: For which commodities is Madison a sink or a source? And which regions are complementary to those commodity balances? Looking across each row, whenever the coefficient is greater than 0.5 that region is a source *relative* to the column region and vice versa. If the coefficient is less than 0.5, the row region is a *relative* sink to the column region, for that commodity. In this example, the Relative $\phi$ shows only Green Bay as a potential relative source for Madison and only for the Extract, Fiber, and Hogs commodities.</span>
<span id="cb217-1217"><a href="#cb217-1217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1218"><a href="#cb217-1218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1219"><a href="#cb217-1219" aria-hidden="true" tabindex="-1"></a>The Gravity of the Absolute and Relative "Total Use Coefficients", uses an alternate procedure to estimate the volume and sensitivity of the coefficient proportions. In this example, Madison (and Green Bay for that matter) is dominated by the "pull" of Chicago. </span>
<span id="cb217-1220"><a href="#cb217-1220" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb217-1221"><a href="#cb217-1221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1222"><a href="#cb217-1222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1223"><a href="#cb217-1223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1224"><a href="#cb217-1224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1225"><a href="#cb217-1225" aria-hidden="true" tabindex="-1"></a><span class="fu">### Resurrection</span></span>
<span id="cb217-1226"><a href="#cb217-1226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1227"><a href="#cb217-1227" aria-hidden="true" tabindex="-1"></a>**Location specific metrics of industry input needs**</span>
<span id="cb217-1228"><a href="#cb217-1228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1229"><a href="#cb217-1229" aria-hidden="true" tabindex="-1"></a>We specify a vector of *location input needs* as the product of the national input coefficient matrix and the location specific total output vector, $\mathbf{Ax^{r}}$.  </span>
<span id="cb217-1230"><a href="#cb217-1230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1231"><a href="#cb217-1231" aria-hidden="true" tabindex="-1"></a>Similarly, let the *share* or *relative input needs* vector be given as $\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1}$. </span>
<span id="cb217-1232"><a href="#cb217-1232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1233"><a href="#cb217-1233" aria-hidden="true" tabindex="-1"></a>In addition, we define the *actual* or *import input needs* vector as, $\max <span class="sc">\{</span>\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0<span class="sc">\}</span>$. </span>
<span id="cb217-1234"><a href="#cb217-1234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1235"><a href="#cb217-1235" aria-hidden="true" tabindex="-1"></a>(Similarly, let the *actual* exports vector $\mathbf{\tilde{x}^{r}}$ be defined as $\vert \min <span class="sc">\{</span>\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0<span class="sc">\}</span> \vert$)</span>
<span id="cb217-1236"><a href="#cb217-1236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1237"><a href="#cb217-1237" aria-hidden="true" tabindex="-1"></a>And let the *relative import input needs* vector be given by, $\max <span class="sc">\{</span>\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}, 0<span class="sc">\}</span>$.</span>
<span id="cb217-1238"><a href="#cb217-1238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1239"><a href="#cb217-1239" aria-hidden="true" tabindex="-1"></a>Note: one may concatenate the input needs vectors across each location to construct an industry-by-location matrix of input needs for each specification above. Specifically denoted by: </span>
<span id="cb217-1240"><a href="#cb217-1240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1241"><a href="#cb217-1241" aria-hidden="true" tabindex="-1"></a> $\mathbf{AX}$, $\mathbf{AX}\left(\mathbf{\widehat{iAX}}\right)^{-1}$, $\max <span class="sc">\{</span>\mathbf{AX}  - \mathbf{X}, 0<span class="sc">\}</span>$, and $\max <span class="sc">\{</span> \mathbf{AX}\left(\mathbf{\widehat{iAX}}\right)^{-1} - \mathbf{X}\left(\mathbf{\widehat{iX}}\right)^{-1}, 0 <span class="sc">\}</span>$ </span>
<span id="cb217-1242"><a href="#cb217-1242" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb217-1243"><a href="#cb217-1243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1244"><a href="#cb217-1244" aria-hidden="true" tabindex="-1"></a>**Cross location industry compatibility**</span>
<span id="cb217-1245"><a href="#cb217-1245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1246"><a href="#cb217-1246" aria-hidden="true" tabindex="-1"></a>To elucidate the industrial compatibility across locations, we construct a *similarity index*. In general, it is defined on the metric space $(\mathbf{X}, D)$ where $\mathbf{X}$ is a set of vectors $<span class="sc">\{</span>\mathbf{x}_{i} \in \mathbb{R} : i \in <span class="sc">\{</span>1, \dots, n <span class="sc">\}\}</span>$ and $D:\mathbf{X} \times \mathbf{X}  \rightarrow \mathbb{R}$ is a distance function.  </span>
<span id="cb217-1247"><a href="#cb217-1247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1248"><a href="#cb217-1248" aria-hidden="true" tabindex="-1"></a>Specifying $D$ as a *Euclidean* or *2-norm distance*, we define the industrial compatibility distance or *simple similarity index* between two locations $r$ and $s$ as:</span>
<span id="cb217-1249"><a href="#cb217-1249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1250"><a href="#cb217-1250" aria-hidden="true" tabindex="-1"></a>$$D^{rs} = \Vert \mathbf{Ax^{r}} - \mathbf{x^{s}} \Vert_{2} = \sqrt{(\mathbf{Ax^{r}} - \mathbf{x^{s}})^{'}(\mathbf{Ax^{r}} - \mathbf{x^{s}})}$$</span>
<span id="cb217-1251"><a href="#cb217-1251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1252"><a href="#cb217-1252" aria-hidden="true" tabindex="-1"></a>In addition, let the *relative similarity index* between two locations $r$ and $s$ be given by:</span>
<span id="cb217-1253"><a href="#cb217-1253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1254"><a href="#cb217-1254" aria-hidden="true" tabindex="-1"></a>$$\Vert \mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1} \Vert_{2}$$</span>
<span id="cb217-1255"><a href="#cb217-1255" aria-hidden="true" tabindex="-1"></a>The  *import similarity index* between two locations $r$ and $s$ be given by:</span>
<span id="cb217-1256"><a href="#cb217-1256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1257"><a href="#cb217-1257" aria-hidden="true" tabindex="-1"></a>$$\Vert \max<span class="sc">\{</span>\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0<span class="sc">\}</span> - \mathbf{x^{s}} \Vert_{2}$$</span>
<span id="cb217-1258"><a href="#cb217-1258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1259"><a href="#cb217-1259" aria-hidden="true" tabindex="-1"></a>Let the *relative import similarity index* between two locations $r$ and $s$ be given by:</span>
<span id="cb217-1260"><a href="#cb217-1260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1261"><a href="#cb217-1261" aria-hidden="true" tabindex="-1"></a>$$\Vert \max<span class="sc">\{</span>\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}, 0<span class="sc">\}</span>  - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1} \Vert_{2}$$</span>
<span id="cb217-1262"><a href="#cb217-1262" aria-hidden="true" tabindex="-1"></a>(I would argue that when a similarity index employs an import specification the "exporting" location should be specified instead as $\mathbf{\tilde{x}^{s}} = \vert \min <span class="sc">\{</span>\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0<span class="sc">\}</span> \vert$ )</span>
<span id="cb217-1263"><a href="#cb217-1263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1264"><a href="#cb217-1264" aria-hidden="true" tabindex="-1"></a>One may further weight a *similarity index* by a geographical impedance function, $\mathbf{Q}$. In general terms, let this metric be defined by $\mathfrak{D}\left(\mathbf{Ax^{r}}, \mathbf{x^{s}}, \mathbf{Q}\right)$. In practice, the geographical impedance between locations $r$ and $s$ is given by, $Q^{rs} = e^{-d^{rs}}$ or $Q^{rs} = 1/(d^{rs})^2$ where $d^{rs}$ is the great-circle distance between the two locations. Specifically, </span>
<span id="cb217-1265"><a href="#cb217-1265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1266"><a href="#cb217-1266" aria-hidden="true" tabindex="-1"></a>$$d^{rs}  = R \cdot \arccos(\sin(\phi_{r})\sin(\phi_{s}) + \cos(\phi_{r})\cos(\phi_{s})\cos(\vert \lambda_{r} - \lambda_{s} \vert)) $$</span>
<span id="cb217-1267"><a href="#cb217-1267" aria-hidden="true" tabindex="-1"></a>Where $\lambda_{r}, \phi_{r}$ and $\lambda_{s}, \phi_{r}$ are the longitude and latitude of locations $r$ and $s$, and $R$ is the radius of the reference sphere, which in this case is the *mean earth radius* from the WGS84 ellipsoid. </span>
<span id="cb217-1268"><a href="#cb217-1268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1269"><a href="#cb217-1269" aria-hidden="true" tabindex="-1"></a>As such the *spatial simple similarity index* is given by </span>
<span id="cb217-1270"><a href="#cb217-1270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1271"><a href="#cb217-1271" aria-hidden="true" tabindex="-1"></a>$$\mathfrak{D}^{rs} = D^{rs}/Q^{rs} = \sqrt{(\mathbf{Ax^{r}} - \mathbf{x^{s}})^{'}(\mathbf{Ax^{r}} - \mathbf{x^{s}})}/Q^{rs}$$</span>
<span id="cb217-1272"><a href="#cb217-1272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1273"><a href="#cb217-1273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1274"><a href="#cb217-1274" aria-hidden="true" tabindex="-1"></a>Let the *spatial relative similarity index* between two locations $r$ and $s$ be given by:</span>
<span id="cb217-1275"><a href="#cb217-1275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1276"><a href="#cb217-1276" aria-hidden="true" tabindex="-1"></a>$$\sqrt{(\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1})^{'}(\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1})}  / Q^{rs}$$</span>
<span id="cb217-1277"><a href="#cb217-1277" aria-hidden="true" tabindex="-1"></a>Let the  *spatial import similarity index* between two locations $r$ and $s$ be given by:</span>
<span id="cb217-1278"><a href="#cb217-1278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1279"><a href="#cb217-1279" aria-hidden="true" tabindex="-1"></a>$$\sqrt{(<span class="co">[</span><span class="ot">\mathbf{Ax^{r}} - \mathbf{x^{r}}</span><span class="co">]</span> - \mathbf{x^{s}})^{'}(<span class="co">[</span><span class="ot">\mathbf{Ax^{r}} - \mathbf{x^{r}}</span><span class="co">]</span> - \mathbf{x^{s}})}/Q^{rs}$$</span>
<span id="cb217-1280"><a href="#cb217-1280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1281"><a href="#cb217-1281" aria-hidden="true" tabindex="-1"></a>Let the *spatial relative import similarity index* between two locations $r$ and $s$ be given by:</span>
<span id="cb217-1282"><a href="#cb217-1282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1283"><a href="#cb217-1283" aria-hidden="true" tabindex="-1"></a>$$\sqrt{(<span class="co">[</span><span class="ot">\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}</span><span class="co">]</span>  - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1})^{'}(<span class="co">[</span><span class="ot">\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}</span><span class="co">]</span> - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1})} / Q^{rs}$$</span>
<span id="cb217-1284"><a href="#cb217-1284" aria-hidden="true" tabindex="-1"></a>For any given location-by-location Similarity Index matrix specification, the minimum "distance" by row is said to be the most compatible trading partner.</span>
<span id="cb217-1285"><a href="#cb217-1285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1286"><a href="#cb217-1286" aria-hidden="true" tabindex="-1"></a>Alternative specifications of the spatial distance are possible. One possibility is to discretize the impedance matrix as a binary proximity operator which is one when two locations share a boundary (or vertex) and zero otherwise.  </span>
<span id="cb217-1287"><a href="#cb217-1287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1288"><a href="#cb217-1288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1289"><a href="#cb217-1289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1290"><a href="#cb217-1290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1291"><a href="#cb217-1291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1292"><a href="#cb217-1292" aria-hidden="true" tabindex="-1"></a>**Empirical Example**</span>
<span id="cb217-1293"><a href="#cb217-1293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1294"><a href="#cb217-1294" aria-hidden="true" tabindex="-1"></a>Suppose we still only have national level Input-Output tables (consisting of Make/Use tables, industry-by-industry, industry-by-commodity, and commodity-by-commodity total requirements tables, and commodity-by-industry direct requirements tables) and location specific industry activity (in the form of employment, payroll, and number of establishments). How might we implement the above methods?</span>
<span id="cb217-1295"><a href="#cb217-1295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1296"><a href="#cb217-1296" aria-hidden="true" tabindex="-1"></a>As before, we can derive a national-level, industry-by-industry direct requirements matrix, $\mathbf{A^{n}}$, from the national-level, industry-by-industry total requirements matrix, $\mathbf{L^{n}}$, using $\mathbf{A^{n}} = \mathbf{I} - (\mathbf{L^{n}})^{-1}$. Furthermore, we can construct the location specific total output vector, $\mathbf{x^{r}}$ from a payroll and labor share quotient. As  a first pass assume unit labor share, such that location specific industry payroll is equivalent to location specific total output. </span>
<span id="cb217-1297"><a href="#cb217-1297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1298"><a href="#cb217-1298" aria-hidden="true" tabindex="-1"></a>Suppose these tables are given by:</span>
<span id="cb217-1299"><a href="#cb217-1299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1300"><a href="#cb217-1300" aria-hidden="true" tabindex="-1"></a>"National Total Requirements Table": $\mathbf{L}$</span>
<span id="cb217-1301"><a href="#cb217-1301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1304"><a href="#cb217-1304" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1305"><a href="#cb217-1305" aria-hidden="true" tabindex="-1"></a>Industry_Count <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb217-1306"><a href="#cb217-1306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1307"><a href="#cb217-1307" aria-hidden="true" tabindex="-1"></a>Toy_Total_mat <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fl">1.2523</span>,  <span class="fl">0.0143</span>, <span class="fl">0.0055</span>, <span class="fl">0.0276</span>, <span class="fl">0.0892</span>,</span>
<span id="cb217-1308"><a href="#cb217-1308" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.0251</span>,  <span class="fl">1.1230</span>, <span class="fl">0.1450</span>, <span class="fl">0.0331</span>, <span class="fl">0.0709</span>,</span>
<span id="cb217-1309"><a href="#cb217-1309" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.0203</span>,  <span class="fl">0.0236</span>, <span class="fl">1.0420</span>, <span class="fl">0.0128</span>, <span class="fl">0.0237</span>,</span>
<span id="cb217-1310"><a href="#cb217-1310" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.0092</span>,  <span class="fl">0.0171</span>, <span class="fl">0.0088</span>, <span class="fl">1.0048</span>, <span class="fl">0.0105</span>,</span>
<span id="cb217-1311"><a href="#cb217-1311" aria-hidden="true" tabindex="-1"></a>                           <span class="fl">0.4020</span>,  <span class="fl">0.2675</span>, <span class="fl">0.1055</span>, <span class="fl">0.5102</span>, <span class="fl">1.7703</span>), <span class="at">nrow =</span> Industry_Count, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb217-1312"><a href="#cb217-1312" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Total_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1313"><a href="#cb217-1313" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Total_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1314"><a href="#cb217-1314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1315"><a href="#cb217-1315" aria-hidden="true" tabindex="-1"></a>Toy_Total_mat</span>
<span id="cb217-1316"><a href="#cb217-1316" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1317"><a href="#cb217-1317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1318"><a href="#cb217-1318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1319"><a href="#cb217-1319" aria-hidden="true" tabindex="-1"></a>"National Direct Requirements Table": $\mathbf{A} = \mathbf{I} - (\mathbf{L})^{-1}$</span>
<span id="cb217-1320"><a href="#cb217-1320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1323"><a href="#cb217-1323" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1324"><a href="#cb217-1324" aria-hidden="true" tabindex="-1"></a>Toy_Direct_mat <span class="ot">&lt;-</span> <span class="fu">diag</span>(<span class="fu">ncol</span>(Toy_Total_mat)) <span class="sc">-</span> <span class="fu">solve</span>(Toy_Total_mat)</span>
<span id="cb217-1325"><a href="#cb217-1325" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Direct_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1326"><a href="#cb217-1326" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Direct_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1327"><a href="#cb217-1327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1328"><a href="#cb217-1328" aria-hidden="true" tabindex="-1"></a>Toy_Direct_mat <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1329"><a href="#cb217-1329" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1330"><a href="#cb217-1330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1331"><a href="#cb217-1331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1332"><a href="#cb217-1332" aria-hidden="true" tabindex="-1"></a>"Industry-by-Location Payroll Table":  $$\mathbf{X} = </span>
<span id="cb217-1333"><a href="#cb217-1333" aria-hidden="true" tabindex="-1"></a>  \begin{bmatrix} </span>
<span id="cb217-1334"><a href="#cb217-1334" aria-hidden="true" tabindex="-1"></a>   \mathbf{x^{r}} &amp; \mathbf{x^{s}} &amp; \cdots &amp; \mathbf{x^{l}}</span>
<span id="cb217-1335"><a href="#cb217-1335" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}$$</span>
<span id="cb217-1336"><a href="#cb217-1336" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb217-1339"><a href="#cb217-1339" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1340"><a href="#cb217-1340" aria-hidden="true" tabindex="-1"></a>Region_Count <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb217-1341"><a href="#cb217-1341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1342"><a href="#cb217-1342" aria-hidden="true" tabindex="-1"></a>Toy_X_mat <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">4979</span>, <span class="dv">487</span>, <span class="dv">5498</span>, <span class="dv">1517</span>, </span>
<span id="cb217-1343"><a href="#cb217-1343" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">4512</span>, <span class="dv">1395</span>,  <span class="dv">4287</span>, <span class="dv">0</span>,</span>
<span id="cb217-1344"><a href="#cb217-1344" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">19912</span>, <span class="dv">20003</span>,  <span class="dv">11322</span>, <span class="dv">1305</span>,</span>
<span id="cb217-1345"><a href="#cb217-1345" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">23685</span>, <span class="dv">201144</span>,  <span class="dv">2670</span>, <span class="dv">58896</span>,</span>
<span id="cb217-1346"><a href="#cb217-1346" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">81009</span>, <span class="dv">224686</span>,  <span class="dv">98075</span>, <span class="dv">27797</span>), <span class="at">nrow =</span> Industry_Count, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb217-1347"><a href="#cb217-1347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1348"><a href="#cb217-1348" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_X_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Extract"</span>, <span class="st">"Fiber"</span>, <span class="st">"Grains"</span>, <span class="st">"Hogs"</span>, <span class="st">"Info"</span>)</span>
<span id="cb217-1349"><a href="#cb217-1349" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_X_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1350"><a href="#cb217-1350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1351"><a href="#cb217-1351" aria-hidden="true" tabindex="-1"></a>Toy_X_mat</span>
<span id="cb217-1352"><a href="#cb217-1352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1353"><a href="#cb217-1353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1354"><a href="#cb217-1354" aria-hidden="true" tabindex="-1"></a>"Industry-by-Location Input Needs Table": $\mathbf{AX}$</span>
<span id="cb217-1355"><a href="#cb217-1355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1358"><a href="#cb217-1358" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1359"><a href="#cb217-1359" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat <span class="ot">&lt;-</span> (Toy_Direct_mat  <span class="sc">%*%</span>  Toy_X_mat) </span>
<span id="cb217-1360"><a href="#cb217-1360" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb217-1361"><a href="#cb217-1361" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1362"><a href="#cb217-1362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1363"><a href="#cb217-1363" aria-hidden="true" tabindex="-1"></a>"Relative Industry-by-Location Input Needs Table":  $\mathbf{AX}\left(\mathbf{\widehat{iAX}}\right)^{-1}$</span>
<span id="cb217-1364"><a href="#cb217-1364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1367"><a href="#cb217-1367" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1368"><a href="#cb217-1368" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_rel <span class="ot">&lt;-</span> (Toy_Input_mat) <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">diag</span>(<span class="fu">c</span>((<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Direct_mat)) <span class="sc">%*%</span> Toy_Input_mat))))</span>
<span id="cb217-1369"><a href="#cb217-1369" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Input_mat_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1370"><a href="#cb217-1370" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_rel  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1371"><a href="#cb217-1371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1372"><a href="#cb217-1372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1373"><a href="#cb217-1373" aria-hidden="true" tabindex="-1"></a>"Import Industry-by-Location Input Needs Table":  $\max <span class="sc">\{</span>\mathbf{AX}  - \mathbf{X}, 0<span class="sc">\}</span>$ </span>
<span id="cb217-1374"><a href="#cb217-1374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1377"><a href="#cb217-1377" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1378"><a href="#cb217-1378" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_imp <span class="ot">&lt;-</span> <span class="fu">pmax</span>(Toy_Input_mat <span class="sc">-</span> Toy_X_mat, <span class="dv">0</span>)</span>
<span id="cb217-1379"><a href="#cb217-1379" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_imp  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb217-1380"><a href="#cb217-1380" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1381"><a href="#cb217-1381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1382"><a href="#cb217-1382" aria-hidden="true" tabindex="-1"></a>"Net Exports Table":  $\max <span class="sc">\{</span>\mathbf{AX}  - \mathbf{X}, 0<span class="sc">\}</span>$ $\mathbf{\tilde{X}} = \vert \min <span class="sc">\{</span>\mathbf{AX}  - \mathbf{X}, 0<span class="sc">\}</span> \vert$ </span>
<span id="cb217-1383"><a href="#cb217-1383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1386"><a href="#cb217-1386" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1387"><a href="#cb217-1387" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_exp <span class="ot">&lt;-</span> <span class="fu">abs</span>(<span class="fu">pmin</span>(Toy_Input_mat <span class="sc">-</span> Toy_X_mat, <span class="dv">0</span>))</span>
<span id="cb217-1388"><a href="#cb217-1388" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_exp  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb217-1389"><a href="#cb217-1389" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1390"><a href="#cb217-1390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1391"><a href="#cb217-1391" aria-hidden="true" tabindex="-1"></a>"Relative Import Industry-by-Location Input Needs Table":  $\max <span class="sc">\{</span>\mathbf{AX}\left(\mathbf{\widehat{iAX}}\right)^{-1} - \mathbf{X}\left(\mathbf{\widehat{iX}}\right)^{-1}, 0<span class="sc">\}</span>$ </span>
<span id="cb217-1392"><a href="#cb217-1392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1395"><a href="#cb217-1395" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1396"><a href="#cb217-1396" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_imp_rel <span class="ot">&lt;-</span> <span class="fu">pmax</span>(Toy_Input_mat_rel <span class="sc">-</span> Toy_X_mat <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">diag</span>(<span class="fu">c</span>((<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">nrow</span>(Toy_X_mat)) <span class="sc">%*%</span> Toy_X_mat)))), <span class="dv">0</span>)</span>
<span id="cb217-1397"><a href="#cb217-1397" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Input_mat_imp_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1398"><a href="#cb217-1398" aria-hidden="true" tabindex="-1"></a>Toy_Input_mat_imp_rel  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1399"><a href="#cb217-1399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1400"><a href="#cb217-1400" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1401"><a href="#cb217-1401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1402"><a href="#cb217-1402" aria-hidden="true" tabindex="-1"></a>Assuming a Euclidean distance function, the similarity index is given by </span>
<span id="cb217-1403"><a href="#cb217-1403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1404"><a href="#cb217-1404" aria-hidden="true" tabindex="-1"></a>"Simple Similarity Index": $\Vert \mathbf{Ax^{r}} - \mathbf{x^{s}} \Vert_{2} ~ \forall ~ r,s \in l$</span>
<span id="cb217-1405"><a href="#cb217-1405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1406"><a href="#cb217-1406" aria-hidden="true" tabindex="-1"></a>In this example denoted </span>
<span id="cb217-1407"><a href="#cb217-1407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1408"><a href="#cb217-1408" aria-hidden="true" tabindex="-1"></a>$$ \begin{bmatrix} </span>
<span id="cb217-1409"><a href="#cb217-1409" aria-hidden="true" tabindex="-1"></a>    \Vert\mathbf{Ax^{a}} - \mathbf{x^{a}}\Vert_{2} &amp; \Vert\mathbf{Ax^{a}} - \mathbf{x^{b}}\Vert_{2} &amp; \Vert\mathbf{Ax^{a}} - \mathbf{x^{c}}\Vert_{2} &amp; \Vert\mathbf{Ax^{a}} - \mathbf{x^{d}}\Vert_{2}<span class="sc">\\</span> </span>
<span id="cb217-1410"><a href="#cb217-1410" aria-hidden="true" tabindex="-1"></a>    \Vert\mathbf{Ax^{b}} - \mathbf{x^{a}}\Vert_{2} &amp; \Vert\mathbf{Ax^{b}} - \mathbf{x^{b}}\Vert_{2} &amp; \Vert\mathbf{Ax^{b}} - \mathbf{x^{c}}\Vert_{2} &amp; \Vert\mathbf{Ax^{b}} - \mathbf{x^{d}}\Vert_{2}<span class="sc">\\</span> </span>
<span id="cb217-1411"><a href="#cb217-1411" aria-hidden="true" tabindex="-1"></a>    \Vert\mathbf{Ax^{c}} - \mathbf{x^{a}}\Vert_{2} &amp; \Vert\mathbf{Ax^{c}} - \mathbf{x^{b}}\Vert_{2} &amp; \Vert\mathbf{Ax^{c}} - \mathbf{x^{c}}\Vert_{2} &amp; \Vert\mathbf{Ax^{c}} - \mathbf{x^{d}}\Vert_{2}<span class="sc">\\</span> </span>
<span id="cb217-1412"><a href="#cb217-1412" aria-hidden="true" tabindex="-1"></a>    \Vert\mathbf{Ax^{d}} - \mathbf{x^{a}}\Vert_{2} &amp; \Vert\mathbf{Ax^{d}} - \mathbf{x^{b}}\Vert_{2} &amp; \Vert\mathbf{Ax^{d}} - \mathbf{x^{c}}\Vert_{2} &amp; \Vert\mathbf{Ax^{d}} - \mathbf{x^{d}}\Vert_{2}<span class="sc">\\</span> </span>
<span id="cb217-1413"><a href="#cb217-1413" aria-hidden="true" tabindex="-1"></a>  \end{bmatrix}$$</span>
<span id="cb217-1414"><a href="#cb217-1414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1417"><a href="#cb217-1417" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1418"><a href="#cb217-1418" aria-hidden="true" tabindex="-1"></a>Toy_sim <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-1419"><a href="#cb217-1419" aria-hidden="true" tabindex="-1"></a>Toy_sim  <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Region_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb217-1420"><a href="#cb217-1420" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-1421"><a href="#cb217-1421" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-1422"><a href="#cb217-1422" aria-hidden="true" tabindex="-1"></a>  Toy_sim[i,j]  <span class="ot">&lt;-</span> <span class="fu">norm</span>((Toy_Input_mat[,i] <span class="sc">-</span> (Toy_X_mat[,j])), <span class="at">type =</span> <span class="st">"2"</span>)</span>
<span id="cb217-1423"><a href="#cb217-1423" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb217-1424"><a href="#cb217-1424" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-1425"><a href="#cb217-1425" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_sim) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1426"><a href="#cb217-1426" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_sim) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1427"><a href="#cb217-1427" aria-hidden="true" tabindex="-1"></a>Toy_sim <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">cbind</span>(., <span class="at">RowMin =</span> <span class="fu">c</span>(<span class="fu">colnames</span>(Toy_sim)[<span class="fu">apply</span>(Toy_sim, <span class="dv">1</span>, which.min)]))</span>
<span id="cb217-1428"><a href="#cb217-1428" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">colnames</span>(Toy_sim)[<span class="fu">apply</span>(Toy_sim, <span class="dv">1</span>, which.min)])</span>
<span id="cb217-1429"><a href="#cb217-1429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1430"><a href="#cb217-1430" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1431"><a href="#cb217-1431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1432"><a href="#cb217-1432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1433"><a href="#cb217-1433" aria-hidden="true" tabindex="-1"></a>"Relative Similarity Index": $\Vert \mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1} \Vert_{2} ~ \forall ~ r,s \in l$</span>
<span id="cb217-1434"><a href="#cb217-1434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1437"><a href="#cb217-1437" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1438"><a href="#cb217-1438" aria-hidden="true" tabindex="-1"></a>Toy_sim_rel <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-1439"><a href="#cb217-1439" aria-hidden="true" tabindex="-1"></a>Toy_sim_rel  <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Region_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb217-1440"><a href="#cb217-1440" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-1441"><a href="#cb217-1441" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-1442"><a href="#cb217-1442" aria-hidden="true" tabindex="-1"></a>  Toy_sim_rel[i,j]  <span class="ot">&lt;-</span> <span class="fu">norm</span>((Toy_Input_mat_rel[,i] <span class="sc">-</span> (Toy_X_mat[,j] <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">c</span>((<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Direct_mat)) <span class="sc">%*%</span> Toy_X_mat[,j] ))) )), <span class="at">type =</span> <span class="st">"2"</span>)</span>
<span id="cb217-1443"><a href="#cb217-1443" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb217-1444"><a href="#cb217-1444" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-1445"><a href="#cb217-1445" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_sim_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1446"><a href="#cb217-1446" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_sim_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1447"><a href="#cb217-1447" aria-hidden="true" tabindex="-1"></a>Toy_sim_rel  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>) <span class="sc">%&gt;%</span> <span class="fu">cbind</span>(., <span class="at">RowMin =</span> <span class="fu">c</span>(<span class="fu">colnames</span>(Toy_sim_rel)[<span class="fu">apply</span>(Toy_sim_rel, <span class="dv">1</span>, which.min)]))</span>
<span id="cb217-1448"><a href="#cb217-1448" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">colnames</span>(Toy_sim_rel)[<span class="fu">apply</span>(Toy_sim_rel, <span class="dv">1</span>, which.min)])</span>
<span id="cb217-1449"><a href="#cb217-1449" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1450"><a href="#cb217-1450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1451"><a href="#cb217-1451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1452"><a href="#cb217-1452" aria-hidden="true" tabindex="-1"></a>"Import Similarity Index": $\Vert \max<span class="sc">\{</span>\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0<span class="sc">\}</span> - \mathbf{x^{s}} \Vert_{2} ~ \forall ~ r,s \in l$</span>
<span id="cb217-1453"><a href="#cb217-1453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1456"><a href="#cb217-1456" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1457"><a href="#cb217-1457" aria-hidden="true" tabindex="-1"></a>Toy_sim_imp <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-1458"><a href="#cb217-1458" aria-hidden="true" tabindex="-1"></a>Toy_sim_imp  <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Region_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb217-1459"><a href="#cb217-1459" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-1460"><a href="#cb217-1460" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-1461"><a href="#cb217-1461" aria-hidden="true" tabindex="-1"></a>  Toy_sim_imp[i,j]  <span class="ot">&lt;-</span> <span class="fu">norm</span>((Toy_Input_mat_imp[,i] <span class="sc">-</span> (Toy_X_mat[,j])), <span class="at">type =</span> <span class="st">"2"</span>)</span>
<span id="cb217-1462"><a href="#cb217-1462" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb217-1463"><a href="#cb217-1463" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-1464"><a href="#cb217-1464" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_sim_imp) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1465"><a href="#cb217-1465" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_sim_imp) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1466"><a href="#cb217-1466" aria-hidden="true" tabindex="-1"></a>Toy_sim_imp  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">cbind</span>(., <span class="at">RowMin =</span> <span class="fu">c</span>(<span class="fu">colnames</span>(Toy_sim_imp)[<span class="fu">apply</span>(Toy_sim_imp, <span class="dv">1</span>, which.min)]))</span>
<span id="cb217-1467"><a href="#cb217-1467" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">colnames</span>(Toy_sim_imp)[<span class="fu">apply</span>(Toy_sim_imp, <span class="dv">1</span>, which.min)])</span>
<span id="cb217-1468"><a href="#cb217-1468" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1469"><a href="#cb217-1469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1470"><a href="#cb217-1470" aria-hidden="true" tabindex="-1"></a>"*Import Similarity Index - Net Exports": $\Vert \max<span class="sc">\{</span>\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0<span class="sc">\}</span> - \mathbf{\tilde{x}^{s}} \Vert_{2} ~ \forall ~ r,s \in l$</span>
<span id="cb217-1471"><a href="#cb217-1471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1474"><a href="#cb217-1474" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1475"><a href="#cb217-1475" aria-hidden="true" tabindex="-1"></a>Toy_sim_exp <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-1476"><a href="#cb217-1476" aria-hidden="true" tabindex="-1"></a>Toy_sim_exp  <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Region_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb217-1477"><a href="#cb217-1477" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-1478"><a href="#cb217-1478" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-1479"><a href="#cb217-1479" aria-hidden="true" tabindex="-1"></a>  Toy_sim_exp[i,j]  <span class="ot">&lt;-</span> <span class="fu">norm</span>((Toy_Input_mat_imp[,i] <span class="sc">-</span> (Toy_Input_mat_exp[,j])), <span class="at">type =</span> <span class="st">"2"</span>)</span>
<span id="cb217-1480"><a href="#cb217-1480" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb217-1481"><a href="#cb217-1481" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-1482"><a href="#cb217-1482" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_sim_exp) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1483"><a href="#cb217-1483" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_sim_exp) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1484"><a href="#cb217-1484" aria-hidden="true" tabindex="-1"></a>Toy_sim_exp  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)  <span class="sc">%&gt;%</span> <span class="fu">cbind</span>(., <span class="at">RowMin =</span> <span class="fu">c</span>(<span class="fu">colnames</span>(Toy_sim_exp)[<span class="fu">apply</span>(Toy_sim_exp, <span class="dv">1</span>, which.min)]))</span>
<span id="cb217-1485"><a href="#cb217-1485" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">colnames</span>(Toy_sim_exp)[<span class="fu">apply</span>(Toy_sim_exp, <span class="dv">1</span>, which.min)])</span>
<span id="cb217-1486"><a href="#cb217-1486" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1487"><a href="#cb217-1487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1488"><a href="#cb217-1488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1489"><a href="#cb217-1489" aria-hidden="true" tabindex="-1"></a>"Relative Import Similarity Index": $\Vert \max<span class="sc">\{</span>\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}, 0<span class="sc">\}</span> - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1} \Vert_{2} ~ \forall ~ r,s \in l$</span>
<span id="cb217-1490"><a href="#cb217-1490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1493"><a href="#cb217-1493" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1494"><a href="#cb217-1494" aria-hidden="true" tabindex="-1"></a>Toy_sim_imp_rel <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-1495"><a href="#cb217-1495" aria-hidden="true" tabindex="-1"></a>Toy_sim_imp_rel  <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Region_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb217-1496"><a href="#cb217-1496" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-1497"><a href="#cb217-1497" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-1498"><a href="#cb217-1498" aria-hidden="true" tabindex="-1"></a>  Toy_sim_imp_rel[i,j]  <span class="ot">&lt;-</span> <span class="fu">norm</span>((Toy_Input_mat_imp_rel[,i] <span class="sc">-</span> (Toy_X_mat[,j] <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">c</span>((<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Direct_mat)) <span class="sc">%*%</span> Toy_X_mat[,j] ))) )), <span class="at">type =</span> <span class="st">"2"</span>)</span>
<span id="cb217-1499"><a href="#cb217-1499" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb217-1500"><a href="#cb217-1500" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-1501"><a href="#cb217-1501" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_sim_imp_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1502"><a href="#cb217-1502" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_sim_imp_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1503"><a href="#cb217-1503" aria-hidden="true" tabindex="-1"></a>Toy_sim_imp_rel  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>) <span class="sc">%&gt;%</span> <span class="fu">cbind</span>(., <span class="at">RowMin =</span> <span class="fu">c</span>(<span class="fu">colnames</span>(Toy_sim_imp_rel)[<span class="fu">apply</span>(Toy_sim_imp_rel, <span class="dv">1</span>, which.min)]))</span>
<span id="cb217-1504"><a href="#cb217-1504" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">colnames</span>(Toy_sim_imp_rel)[<span class="fu">apply</span>(Toy_sim_imp_rel, <span class="dv">1</span>, which.min)])</span>
<span id="cb217-1505"><a href="#cb217-1505" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1506"><a href="#cb217-1506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1507"><a href="#cb217-1507" aria-hidden="true" tabindex="-1"></a>"*Relative Import Similarity Index - Net Exports": $\Vert \max<span class="sc">\{</span>\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}, 0<span class="sc">\}</span> - \mathbf{\tilde{x}^{s}}(\mathbf{i\tilde{x}^{s}})^{-1} \Vert_{2} ~ \forall ~ r,s \in l$</span>
<span id="cb217-1508"><a href="#cb217-1508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1511"><a href="#cb217-1511" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1512"><a href="#cb217-1512" aria-hidden="true" tabindex="-1"></a>Toy_sim_exp_rel <span class="ot">&lt;-</span>  <span class="fu">c</span>()</span>
<span id="cb217-1513"><a href="#cb217-1513" aria-hidden="true" tabindex="-1"></a>Toy_sim_exp_rel  <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> Region_Count, <span class="at">ncol =</span> Region_Count)</span>
<span id="cb217-1514"><a href="#cb217-1514" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-1515"><a href="#cb217-1515" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>Region_Count){</span>
<span id="cb217-1516"><a href="#cb217-1516" aria-hidden="true" tabindex="-1"></a>  Toy_sim_exp_rel[i,j]  <span class="ot">&lt;-</span> <span class="fu">norm</span>((Toy_Input_mat_imp_rel[,i] <span class="sc">-</span> (Toy_Input_mat_exp[,j] <span class="sc">%*%</span> <span class="fu">solve</span>(<span class="fu">c</span>((<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>), <span class="at">each=</span><span class="fu">ncol</span>(Toy_Direct_mat)) <span class="sc">%*%</span> Toy_Input_mat_exp[,j] ))) )), <span class="at">type =</span> <span class="st">"2"</span>)</span>
<span id="cb217-1517"><a href="#cb217-1517" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb217-1518"><a href="#cb217-1518" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb217-1519"><a href="#cb217-1519" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_sim_exp_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1520"><a href="#cb217-1520" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_sim_exp_rel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1521"><a href="#cb217-1521" aria-hidden="true" tabindex="-1"></a>Toy_sim_exp_rel  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>) <span class="sc">%&gt;%</span> <span class="fu">cbind</span>(., <span class="at">RowMin =</span> <span class="fu">c</span>(<span class="fu">colnames</span>(Toy_sim_exp_rel)[<span class="fu">apply</span>(Toy_sim_exp_rel, <span class="dv">1</span>, which.min)]))</span>
<span id="cb217-1522"><a href="#cb217-1522" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">colnames</span>(Toy_sim_exp_rel)[<span class="fu">apply</span>(Toy_sim_exp_rel, <span class="dv">1</span>, which.min)])</span>
<span id="cb217-1523"><a href="#cb217-1523" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1524"><a href="#cb217-1524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1525"><a href="#cb217-1525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1526"><a href="#cb217-1526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1527"><a href="#cb217-1527" aria-hidden="true" tabindex="-1"></a>Adding the spatial elements:</span>
<span id="cb217-1528"><a href="#cb217-1528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1529"><a href="#cb217-1529" aria-hidden="true" tabindex="-1"></a>"Geographical Impedance": $Q^{rs} = e^{-d^{rs}} ~ \forall ~ r,s \in l$</span>
<span id="cb217-1530"><a href="#cb217-1530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1533"><a href="#cb217-1533" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1534"><a href="#cb217-1534" aria-hidden="true" tabindex="-1"></a>Toy_Lat <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">42.3</span>, <span class="fl">44.49</span>, <span class="fl">41.84</span>, <span class="fl">43.07</span>)</span>
<span id="cb217-1535"><a href="#cb217-1535" aria-hidden="true" tabindex="-1"></a>Toy_Lon <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">89.04</span>, <span class="sc">-</span><span class="fl">88.03</span>, <span class="sc">-</span><span class="fl">87.77</span>, <span class="sc">-</span><span class="fl">89.39</span>)</span>
<span id="cb217-1536"><a href="#cb217-1536" aria-hidden="true" tabindex="-1"></a>Toy_Dist_mat <span class="ot">&lt;-</span> <span class="fu">distm</span>(<span class="fu">cbind</span>(Toy_Lon, Toy_Lat))<span class="sc">/</span><span class="dv">1000000</span></span>
<span id="cb217-1537"><a href="#cb217-1537" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Toy_Dist_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1538"><a href="#cb217-1538" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Toy_Dist_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AllElse"</span>, <span class="st">"Brown"</span>, <span class="st">"Cook"</span>, <span class="st">"Dane"</span>)</span>
<span id="cb217-1539"><a href="#cb217-1539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1540"><a href="#cb217-1540" aria-hidden="true" tabindex="-1"></a><span class="co">#Toy_Q &lt;- (1/(Toy_Dist_mat)^2)</span></span>
<span id="cb217-1541"><a href="#cb217-1541" aria-hidden="true" tabindex="-1"></a>Toy_Q <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="sc">-</span>Toy_Dist_mat)</span>
<span id="cb217-1542"><a href="#cb217-1542" aria-hidden="true" tabindex="-1"></a>Toy_Q  <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1543"><a href="#cb217-1543" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1544"><a href="#cb217-1544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1545"><a href="#cb217-1545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1546"><a href="#cb217-1546" aria-hidden="true" tabindex="-1"></a>"Spatial Simple Similarity Index": $\Vert \mathbf{Ax^{r}} - \mathbf{x^{s}} \Vert_{2} / Q^{rs} ~ \forall ~ r,s \in l$</span>
<span id="cb217-1547"><a href="#cb217-1547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1550"><a href="#cb217-1550" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1551"><a href="#cb217-1551" aria-hidden="true" tabindex="-1"></a>(Toy_sim  <span class="sc">/</span> Toy_Q) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb217-1552"><a href="#cb217-1552" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1553"><a href="#cb217-1553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1554"><a href="#cb217-1554" aria-hidden="true" tabindex="-1"></a>"Spatial Relative Similarity Index": $\Vert \mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1} \Vert_{2} / Q^{rs} ~ \forall ~ r,s \in l$</span>
<span id="cb217-1555"><a href="#cb217-1555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1558"><a href="#cb217-1558" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1559"><a href="#cb217-1559" aria-hidden="true" tabindex="-1"></a>(Toy_sim_rel  <span class="sc">/</span> Toy_Q) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1560"><a href="#cb217-1560" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1561"><a href="#cb217-1561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1562"><a href="#cb217-1562" aria-hidden="true" tabindex="-1"></a>"Spatial Import Similarity Index": $\Vert \max<span class="sc">\{</span>\mathbf{Ax^{r}} - \mathbf{x^{r}}, 0<span class="sc">\}</span> - \mathbf{x^{s}} \Vert_{2} / Q^{rs} ~ \forall ~ r,s \in l$</span>
<span id="cb217-1563"><a href="#cb217-1563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1566"><a href="#cb217-1566" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1567"><a href="#cb217-1567" aria-hidden="true" tabindex="-1"></a>(Toy_sim_imp  <span class="sc">/</span> Toy_Q) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb217-1568"><a href="#cb217-1568" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1569"><a href="#cb217-1569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1570"><a href="#cb217-1570" aria-hidden="true" tabindex="-1"></a>"Spatial Relative Import Similarity Index": $\Vert \max<span class="sc">\{</span>\mathbf{Ax^{r}}(\mathbf{iAx^{r}})^{-1} - \mathbf{x^{r}}(\mathbf{ix^{r}})^{-1}, 0<span class="sc">\}</span> - \mathbf{x^{s}}(\mathbf{ix^{s}})^{-1} \Vert_{2} / Q^{rs} ~ \forall ~ r,s \in l$</span>
<span id="cb217-1571"><a href="#cb217-1571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1574"><a href="#cb217-1574" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1575"><a href="#cb217-1575" aria-hidden="true" tabindex="-1"></a>(Toy_sim_imp_rel  <span class="sc">/</span> Toy_Q) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">4</span>)</span>
<span id="cb217-1576"><a href="#cb217-1576" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1577"><a href="#cb217-1577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1578"><a href="#cb217-1578" aria-hidden="true" tabindex="-1"></a>For any given location-by-location Similarity Index matrix specification, the minimum "distance" by row is said to be the most compatible trading partner.</span>
<span id="cb217-1579"><a href="#cb217-1579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1580"><a href="#cb217-1580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1581"><a href="#cb217-1581" aria-hidden="true" tabindex="-1"></a>**Proximity Example**</span>
<span id="cb217-1582"><a href="#cb217-1582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1585"><a href="#cb217-1585" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb217-1586"><a href="#cb217-1586" aria-hidden="true" tabindex="-1"></a>Toy_prox <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rbind</span>(</span>
<span id="cb217-1587"><a href="#cb217-1587" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb217-1588"><a href="#cb217-1588" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb217-1589"><a href="#cb217-1589" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb217-1590"><a href="#cb217-1590" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb217-1591"><a href="#cb217-1591" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>),</span>
<span id="cb217-1592"><a href="#cb217-1592" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb217-1593"><a href="#cb217-1593" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>),</span>
<span id="cb217-1594"><a href="#cb217-1594" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb217-1595"><a href="#cb217-1595" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>)), <span class="at">nrow =</span> <span class="dv">9</span>)</span>
<span id="cb217-1596"><a href="#cb217-1596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1597"><a href="#cb217-1597" aria-hidden="true" tabindex="-1"></a>Toy_RUCC <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">9</span>,<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">9</span>)</span>
<span id="cb217-1598"><a href="#cb217-1598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1599"><a href="#cb217-1599" aria-hidden="true" tabindex="-1"></a>Toy_RUCC_prox <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">t</span>(Toy_RUCC <span class="sc">*</span> Toy_prox ) <span class="sc">*</span> Toy_RUCC)</span>
<span id="cb217-1600"><a href="#cb217-1600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1601"><a href="#cb217-1601" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(Toy_RUCC_prox) <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb217-1602"><a href="#cb217-1602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1603"><a href="#cb217-1603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1604"><a href="#cb217-1604" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb217-1605"><a href="#cb217-1605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1606"><a href="#cb217-1606" aria-hidden="true" tabindex="-1"></a><span class="fu">### Notes</span></span>
<span id="cb217-1607"><a href="#cb217-1607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1608"><a href="#cb217-1608" aria-hidden="true" tabindex="-1"></a>"The Assumption of Spatially Invariant Production Functions: The Problem of Heterogeneity</span>
<span id="cb217-1609"><a href="#cb217-1609" aria-hidden="true" tabindex="-1"></a>All classic nonsurvey methods assume that national total use coefficients - the production functions in full - hold at every conceivable regional dimension. Various suggestions have been made as to why this is unlikely to be observed in practice. Smith and Morrison (1974 p.22) identify anything from differences in productive efficiency to climatic variation as contributing to the phenomenon. However, it is argued here that, apart from variation due to stochastic observation error, differences in total use can be attributed to the violation of one fundamental assumption of the Leontief model, and that is that each defined sector is homogeneous. Homogeneity implies that the set of coefficients which describes each defined commodity's production is wholly unique. Hence there can be no variation in the means of production for any defined commodity, and if there is, for whatever reason, the commodity would require separate definition in order for the homogeneity assumption to hold. The reason for the assumption is quite straightforward. If each production function describes a diverse set of commodities, the pattem of linkage is hidden within average relationships (see Table 5.1 below), and hence the precision with which one can calculate, for example, multipliers is eroded.</span>
<span id="cb217-1610"><a href="#cb217-1610" aria-hidden="true" tabindex="-1"></a>It is argued here that differences in regional and national total use derive from the fact that the production functions of the national model are heterogeneously defined. The argument is as follows. At the broadest levels of commodity definition i.e. agriculture, manufacture, regional production functions are merged together, and as such cannot be identified in the national model. As the definitions of the national model are increased, the production functions of regionally specialised commodities emerge i.e. dair&gt;' farming, sea fishing, fish farming. At some much higher level of disaggregation - where homogeneity is approached - the definitions o f the national model are so fine that it is possible to identify the individual factories and firms operating within the nation. At this point, the national model becomes one of infinite-regions because it is possible to extract the input-output table for any conceivable spatial subset of the nation. Not only the problem of estimating regional production functions evaporated, the trade estimation problem has ceased to exist." - (Brand, 1998)</span>
<span id="cb217-1611"><a href="#cb217-1611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1612"><a href="#cb217-1612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1613"><a href="#cb217-1613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1614"><a href="#cb217-1614" aria-hidden="true" tabindex="-1"></a>FIN</span>
<span id="cb217-1615"><a href="#cb217-1615" aria-hidden="true" tabindex="-1"></a>::: </span>
<span id="cb217-1616"><a href="#cb217-1616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1617"><a href="#cb217-1617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1618"><a href="#cb217-1618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-1619"><a href="#cb217-1619" aria-hidden="true" tabindex="-1"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>